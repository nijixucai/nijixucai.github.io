<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="遇到的问题： 1、是否所有的背书节点都有相同的功能？一笔交易是不是任意的背书节点都可以验证，还是只能由支持此交易的背书节点验证？ 背书节点的功能不同，安装什么链码就具有回事呢么功能。 因为交易是通过链码生成的，所以也只能由安装了相同链码的背书节点进行验证。 2、背书节点在验证的时候是否知道了交易的全部内容，如何保证数据的隐私的？ 只有在同一个channel中的背书节点才会对该channel的交易进">
<meta property="og:type" content="article">
<meta property="og:title" content="区块链开发框架-Hyperledger-Fabric学习总结">
<meta property="og:url" content="https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/index.html">
<meta property="og:site_name" content="滴水成涓">
<meta property="og:description" content="遇到的问题： 1、是否所有的背书节点都有相同的功能？一笔交易是不是任意的背书节点都可以验证，还是只能由支持此交易的背书节点验证？ 背书节点的功能不同，安装什么链码就具有回事呢么功能。 因为交易是通过链码生成的，所以也只能由安装了相同链码的背书节点进行验证。 2、背书节点在验证的时候是否知道了交易的全部内容，如何保证数据的隐私的？ 只有在同一个channel中的背书节点才会对该channel的交易进">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.2.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.2.1.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.3.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.4.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.5.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.6.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.7.png">
<meta property="article:published_time" content="2020-12-15T02:24:42.054Z">
<meta property="article:modified_time" content="2020-12-31T04:11:04.159Z">
<meta property="article:author" content="guozhe">
<meta property="article:tag" content="blockchain">
<meta property="article:tag" content="Hyperledger-Fabric">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.2.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>区块链开发框架-Hyperledger-Fabric学习总结</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="滴水成涓" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://github.com/guozhe001" target="_blank" rel="noopener">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/12/15/language/java/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5%E8%80%8C%E4%B8%8D%E6%98%AF@Autoware/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/12/11/blockchain/0%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&text=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&is_video=false&description=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=区块链开发框架-Hyperledger-Fabric学习总结&body=Check out this article: https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&name=区块链开发框架-Hyperledger-Fabric学习总结&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&t=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Fabric概念学习与梳理"><span class="toc-number">1.</span> <span class="toc-text">1.Fabric概念学习与梳理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Blockchain-network-Fabric的网络"><span class="toc-number">1.1.</span> <span class="toc-text">Blockchain network(Fabric的网络)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-the-Network"><span class="toc-number">1.1.1.</span> <span class="toc-text">Creating the Network</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Certificate-Authorities（证书颁发机构）"><span class="toc-number">1.1.2.</span> <span class="toc-text">Certificate Authorities（证书颁发机构）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Adding-Network-Administrators（添加网络管理员）"><span class="toc-number">1.1.3.</span> <span class="toc-text">Adding Network Administrators（添加网络管理员）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Defining-a-Consortium-定义一个联盟"><span class="toc-number">1.1.4.</span> <span class="toc-text">Defining a Consortium(定义一个联盟)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-a-channel-for-a-consortium-为联盟创建一个通道"><span class="toc-number">1.1.5.</span> <span class="toc-text">Creating a channel for a consortium(为联盟创建一个通道)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Peers-and-Ledgers（节点与账单）"><span class="toc-number">1.1.6.</span> <span class="toc-text">Peers and Ledgers（节点与账单）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Applications-and-Smart-Contract-chaincode（应用程序和智能合约联链码）"><span class="toc-number">1.1.7.</span> <span class="toc-text">Applications and Smart Contract chaincode（应用程序和智能合约联链码）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing-a-chaincode-package（安装链码包）"><span class="toc-number">1.1.8.</span> <span class="toc-text">Installing a chaincode package（安装链码包）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Defining-a-chaincode（定义链码）"><span class="toc-number">1.1.9.</span> <span class="toc-text">Defining a chaincode（定义链码）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Endorsement-policy（背书策略）"><span class="toc-number">1.1.10.</span> <span class="toc-text">Endorsement policy（背书策略）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Invoking-a-smart-contract（调用智能合约）"><span class="toc-number">1.1.11.</span> <span class="toc-text">Invoking a smart contract（调用智能合约）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-completed（网络完成）"><span class="toc-number">1.1.12.</span> <span class="toc-text">Network completed（网络完成）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Generating-and-accepting-transactions（生成和接受交易）"><span class="toc-number">1.1.13.</span> <span class="toc-text">Generating and accepting transactions（生成和接受交易）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Types-of-peers（peer节点的类型）"><span class="toc-number">1.1.14.</span> <span class="toc-text">Types of peers（peer节点的类型）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Adding-organizations-and-peers-to-the-channel（将组织和节点添加到渠道）"><span class="toc-number">1.1.15.</span> <span class="toc-text">Adding organizations and peers to the channel（将组织和节点添加到渠道）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Fabric开发快速入门"><span class="toc-number">2.</span> <span class="toc-text">2.Fabric开发快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1开发环境准备"><span class="toc-number">2.1.</span> <span class="toc-text">2.1开发环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1安装homebrew"><span class="toc-number">2.1.1.</span> <span class="toc-text">2.1.1安装homebrew</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-安装Fabric的环境依赖"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.1.2 安装Fabric的环境依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-fabric源码下载"><span class="toc-number">2.1.3.</span> <span class="toc-text">2.1.3 fabric源码下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-安装开发工具"><span class="toc-number">2.1.4.</span> <span class="toc-text">2.1.4 安装开发工具</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        区块链开发框架-Hyperledger-Fabric学习总结
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">guozhe</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-12-15T02:24:42.054Z" itemprop="datePublished">2020-12-15</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/">blockchain</a> › <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/">Hyperledger-Fabric</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Hyperledger-Fabric/" rel="tag">Hyperledger-Fabric</a>, <a class="tag-link" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" rel="tag">blockchain</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>遇到的问题：</p>
<p>1、是否所有的背书节点都有相同的功能？一笔交易是不是任意的背书节点都可以验证，还是只能由支持此交易的背书节点验证？<br>
背书节点的功能不同，安装什么链码就具有回事呢么功能。<br>
因为交易是通过链码生成的，所以也只能由安装了相同链码的背书节点进行验证。</p>
<p>2、背书节点在验证的时候是否知道了交易的全部内容，如何保证数据的隐私的？<br>
只有在同一个channel中的背书节点才会对该channel的交易进行验证，而在一个组织加入一个channel的时候时需要其他所有组织的同意才行，所以在同一个channel中，所有的交易都是公开透明的，因为这个channel中的所有组织都是相互信任的。</p>
<p>3、区块数据的数据结构如果是数组的话，如何做到防篡改？</p>
<p>4、主节点是干什么的？主节点可以交易吗？主节点和普通的peer节点有什么不一样？</p>
<p>5、链码是不是就是智能合约，那么是不是说只能在这个链上的交易才能使用这个智能合约？</p>
<p>使用fabric开发的关于票据的应用示例：</p>
<p><a href="https://github.com/Skyellbin/bill" target="_blank" rel="noopener">https://github.com/Skyellbin/bill</a><br>
<a href="https://github.com/Zhidafeng/BillSystem" target="_blank" rel="noopener">https://github.com/Zhidafeng/BillSystem</a><br>
<a href="https://github.com/alectian/HyperledgerFabric_BillManage" target="_blank" rel="noopener">https://github.com/alectian/HyperledgerFabric_BillManage</a><br>
<a href="https://github.com/sweetMegan/bill" target="_blank" rel="noopener">https://github.com/sweetMegan/bill</a></p>
<p>0.资料整理</p>
<ul>
<li>
<p><a href="https://www.hyperledger.org/" target="_blank" rel="noopener">hyperledger官网</a></p>
</li>
<li>
<p><a href="https://hyperledgercn.github.io/hyperledgerDocs/" target="_blank" rel="noopener">hyperledger中文文档</a></p>
</li>
<li>
<p><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/" target="_blank" rel="noopener">hyperladger英文文档</a></p>
</li>
</ul>
<h1 id="1-Fabric概念学习与梳理">1.Fabric概念学习与梳理</h1>
<h2 id="Blockchain-network-Fabric的网络">Blockchain network(Fabric的网络)</h2>
<p>原始官方文档：<a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/network/network.html" target="_blank" rel="noopener">https://hyperledger-fabric.readthedocs.io/en/release-2.2/network/network.html</a></p>
<h3 id="Creating-the-Network">Creating the Network</h3>
<p>从创建基础网络开始：<br>
<img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.2.png" alt="network.diagram.2."><br>
<em>在orderer启动之后网络就形成了，在我们的示例网络N中，包括单个节点O4的ordered service是根据网络配置NC4配置的，该网络配置向组织R4提供管理权限。在网络级别，证书颁发机构CA4用于向R4组织的管理员和网络节点分配身份。</em></p>
<p>我们可以看到定义网络N的第一件事就是ordering service ，O4。将订购服务视为网络的初始管理点很有帮助。将ordering service视为网络的初始管理点很有帮助。按照事先约定，O4最初由组织R4中的管理员配置和启动，并托管在R4中。配置NC4包含描述网络管理功能的初始的策略集合。最初，将其设置为仅通过网络授予R4权限。这将改变，我们将在后面看到，但目前R4是网络的唯一成员。</p>
<h3 id="Certificate-Authorities（证书颁发机构）">Certificate Authorities（证书颁发机构）</h3>
<p>您还可以看到证书颁发机构CA4，用于向管理员和网络节点颁发证书。CA4在我们的网络中起着关键作用，因为它颁发X.509证书，该证书可用于将组件标识为属于组织R4。由CA颁发的证书也可以用于签署交易，以表明组织认可交易结果–这是允许交易提交到分类帐的前提。让我们更详细地研究CA的这两个方面。</p>
<p>首先，区块链网络的不同组件使用证书将自己标识为来自特定组织。这就是为什么通常有不止一个CA支持一个区块链网络-不同的组织经常使用不同的CA。<br>
证书到成员组织的映射是通过称为Membership Services Provider (MSP)的结构实现的。网络配置NC4使用MSP来标识由CA4分配的证书的属性，该证书将证书持有者与组织R4相关联。然后，NC4可以在策略中使用此MSP向R4的参与者授予对网络资源的特定权限。这种策略的一个示例是R4中的管理员可以向网络添加的新成员。</p>
<p>其次，稍后我们将看到CA颁发的证书如何成为交易生成和验证过程的核心。具体来说，X.509证书用于客户端应用程序交易建议和智能合约交易响应中以进行数字签名交易。随后，托管账本的网络节点在接受交易记录到账本之前会验证交易的签名是否有效。</p>
<p>让我们回顾一下示例区块链网络的基本结构：证书颁发机构CA4定义了一组用户，可以访问网络N；这些用户对网络N中资源的权限被网络配置NC4中包含的策略所描述。在我们配置并启动ordering service节点O4时，所有这些都变为现实。</p>
<h3 id="Adding-Network-Administrators（添加网络管理员）">Adding Network Administrators（添加网络管理员）</h3>
<p>NC4只配置了R4的用户在网络上的权限。在下一个阶段，我们将允许组织R1用户管理网络。让我们看看网络如何发展：<br>
<img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.2.1.png" alt="network.diagram.2.1"><br>
<em>组织R4更新网络配置以使组织R1也成为管理员。此后，R1和R4在网络配置上享有同等的权利。</em></p>
<p>尽管订购者节点O4在R4的基础结构上运行，但R1拥有共享的管理权限，只要它可以访问网络即可。这意味着R1或R4可以更新网络配置NC4，以允许R2组织进行网络操作的子集。这样，即使R4在运行订购服务，R1也对其拥有完全的管理权限，并且R2具有创建新联合体的部分权限。</p>
<p>你在示例中看到的ordering service是网络中的单个节点，这是最简单的形式。ordering service通常是多节点的，可以配置为在不同组织的不同节点。例如，我们可能在R4中运行O4并将其连接到组织R1中单独的订购者节点O2。这样，我们将拥有一个多站点，多组织的管理结构。</p>
<p>我们将在本主题的稍后部分讨论ordering service，但是现在，仅将ordering service视为一个可为不同组织提供对网络受控访问的管理点。</p>
<h3 id="Defining-a-Consortium-定义一个联盟">Defining a Consortium(定义一个联盟)</h3>
<p>尽管现在可以通过R1和R4管理网络，但是几乎没有什么事情可做。我们需要做的第一件事是定义一个联盟。这个词的字面意思是“拥有共同命运的团体”，因此对于区块链网络中的一组组织来说是一个合适的选择。</p>
<p>让我们看看联盟的定义：<br>
<img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.3.png" alt="network.diagram.3"><br>
<em>网络管理员定义了一个联盟X1，该联盟包含两个成员，组织R1和R2。该联盟的定义存储在网络配置NC4中，并将在网络开发的下一阶段使用。CA1和CA2是这些组织的各自的证书颁发机构。</em></p>
<p>因为NC4配置的是只允许R1或R4可以创建新的联盟。该图显示了添加的新联盟X1，该联盟将R1和R2定义为其组成组织。我们还可以看到已经添加了CA2用以认证R2的用户。请注意，一个联盟可以有任意数量的组织成员–我们刚刚显示了两个，因为它是最简单的配置。</p>
<p>为什么联盟如此重要？我们可以看到一个联盟定义了网络中彼此需要共享交易的组织集合，在本例中R1和 R2。如果组织有共同的目标，将它们组合在一起真的很有意义，而这正上面的联盟定义。</p>
<p>该网络虽然由单个组织启动，但现在由较大的一组组织控制。现在，我们将使用联盟X1创建Hyperledger Fabric区块链的一个非常重要的部分-一个通道。</p>
<h3 id="Creating-a-channel-for-a-consortium-为联盟创建一个通道">Creating a channel for a consortium(为联盟创建一个通道)</h3>
<p>channel是主要的通信机制，联盟的成员可以通过channel相互通信。网络中可以有多个通道，我们先从一个渠道开始。<br>
让我们看看如何将第一个channel添加到网络中：<br>
<img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.4.png" alt="network.diagram.4"><br>
<em>使用联盟定义X1为R1和R2创建了通道C1。通道由通道配置CC1进行治理，完全独立于网络配置。CC1由对C1拥有同等权利的R1和R2管理。 R4在CC1中没有任何权利。</em></p>
<p>通道C1为财团X1提供了专用的通信机制。我们可以看到通道C1已连接到ordersing service(O4)，但没有附加任何内容。在网络开发的下一阶段，我们将连接组件，例如客户端应用程序和peer节点。但是，渠道代表着未来连接的潜力。</p>
<p>即使通道C1是网络N的一部分，但也可以与它完全区分开。注意组织R3和R4不在此通道中，C1只用于R1和R2之间的交易处理。在上一步中，我们了解了R4如何授予R1创建新联盟的权限。值得一提的是R4还允许R1创建channel！在此图中，可能是组织R1或R4创建了通道C1。</p>
<p>再次注意通道C1对于网络配置NC4如何具有完全独立的配置CC1。CC1包含用于控制R1和R2在通道C1上的权限的策略-正如我们所看到的，R3和R4在此通道上没有权限。R3和R4只能在R1或R2将其添加适当策略到通道配置CC1中，才可以与C1交互。一个示例是定义谁可以向channel添加新组织。特别要注意的是，R4不能将自身添加到通道C1中-它必须并且只能由R1或R2授权。</p>
<p>为什么channel如此重要？channels之所以有用，是因为它们为联盟成员之间的私有通信和私有数据提供了一种机制。channel提供了隐私性保护，对于其他的channels和整个网络。Hyperledger Fabric在这方面很强大，因为它允许组织共享基础结构并同时保持私有状态。这里没有矛盾-网络中的不同联盟需要适当共享不同的信息和流程，而渠道则提供了一种有效的机制来做到这一点。通道可有效共享基础架构，同时保持数据和通信的隐私。</p>
<p>我们还可以看到，一旦创建了一个channel，它实际上就是“脱离网络”。从创建开始到未来，只有在channel配置中明确指定的组织才能对其进行控制。同样，从此时开始对网络配置NC4的任何更新都不会直接影响channel配置CC1；例如，如果联盟定义X1更改，它将不会影响通道C1的成员。通道之所以有用，是因为它们允许构成通道的组织之间进行私人通信。此外，通道中的数据与网络的其余部分（包括其他通道）完全隔离。</p>
<p>顺便说一句，还有一个特殊的系统通道（<strong>system channel</strong>）的定义，是为了给排序服务（ordering service）使用的。它的行为与常规channel完全相同，因此，有时也称为应用程序通道（<strong>application channels</strong>）。</p>
<h3 id="Peers-and-Ledgers（节点与账单）">Peers and Ledgers（节点与账单）</h3>
<p>现在开始使用渠道将区块链网络和组织组件连接在一起。在网络开发的下一阶段，我们可以看到我们的网络N刚刚获得了两个新组件，即peer节点P1和账本实例L1。</p>
<p><img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.5.png" alt="network.diagram.5"><br>
<em>peer节点P1已加入通道C1。 P1物理上存储账本L1的副本。 P1和O4可以使用通道C1相互通信。</em></p>
<p>peer节点是托管区块链账本副本的网络组件，最后，我们开始看到一些可识别的区块链组件。P1在网络中的目的纯粹是托管账本L1的副本，以供其他人访问。我们可以认为L1物理上托管在P1上，但逻辑上托管在通道C1上。当我们向channel添加更多peer时，我们会更清楚地看到这个想法。</p>
<p>P1配置的关键部分是CA1发出的X.509身份，该身份将P1与组织R1相关联。当R1组织的管理员将peer节点P1加入通道C1并且P1开始从排序节点O4拉取数据块的时候，O4使用通道配置CC1来确定P1在该通道上的权限。例如，CC1中的策略确定P1（或组织R1）是否可以在通道C1上读取（和/或）写入。</p>
<p>注意拥有peer的组织是如何将peer加入渠道的，尽管我们仅添加了一个peer，但我们将看到网络中的多个渠道上如何有多个peer节点。稍后我们将看到peer可以扮演的不同角色。</p>
<h3 id="Applications-and-Smart-Contract-chaincode（应用程序和智能合约联链码）">Applications and Smart Contract chaincode（应用程序和智能合约联链码）</h3>
<p>现在，通道C1上有一个账本L1，我们可以开始连接客户端应用程序，以使用为操作账本提供服务的peer。</p>
<p>请注意网络已经增长了：<br>
<img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.6.png" alt="network.diagram.6"><br>
<em>已经智能合约S5已经被部署到了P1，属于组织R1的客户端应用程序A1可以使用S5通过P1来访问账本L1。A1、P1和O4都加入了通道C1，如图所示，A1、P1和O4都加入了通道C1，即它们都可以利用该通道提供的通信设施。</em></p>
<p>在网络开发的下一阶段，我们可以看到客户端应用程序A1可以使用通道C1连接到特定的网络资源–在这种情况下，A1可以同时连接到peer节点P1和ordered节点O4。让我们在此之前查看渠道是如何成为网络和组织组件之间通信核心的。就像对peer节点和ordered节点一样，客户端应用程序也具有一个可以将其与组织关联起来的身份。在我们的例子中，客户端应用程序A1与组织R1关联，尽管它在Fabric区块链网络之外，但仍然可以通过渠道C1访问到区块链。</p>
<p>现在看来，A1可以直接通过P1访问分类帐L1，但实际上，所有访问都是通过称为智能合约链码S5的特殊程序进行管理的。将S5定义为账本的所有常见访问模式； S5提供了一套明确定义的方式，可用来查询或更新账本L1。</p>
<p>每个组织的开发人员都可以创建智能合约，然后发起在联盟之间共享的业务流程。智能合约用于生成可以分配到网络中每个节点的交易。我们稍后再讨论这个想法；当网络更大时，将更容易理解。现在，需要了解的重要一点是，到此为止，必须在智能合约上执行两次操作。目前为止，需要了解的重要一点是必须在智能合约上执行两次操作：</p>
<ol>
<li>它必须已经安装（<strong>installed</strong>）在peer上</li>
<li>然后已经在通道上定义（<strong>defined</strong>）</li>
</ol>
<p>Hyperledger Fabric用户经常把术<strong>语智能合约（smart contract）<strong>和</strong>链码（chaincode）<strong>进行互换使用。通常，智能合约定义了</strong>交易逻辑（ transaction logic ）</strong>，这个交易逻辑控制了现实世界状态中包含业务对象的生命周期。然后将其打包成链码，然后将其部署到区块链网络。可以将智能合约视为支配交易，而链码则是控制如何打包智能合约以进行部署。</p>
<h3 id="Installing-a-chaincode-package（安装链码包）">Installing a chaincode package（安装链码包）</h3>
<p>开发了智能合约S5之后，组织R1中的管理员必须创建一个链码包并将其安装到peer节点P1上。这是一个简单的操作；一旦完成，P1就完全了解S5。具体来说，P1可以看到S5的**实现（implementation）<strong>逻辑-就是用于访问账本L1的代码。我们将此与S5的</strong>接口（interface）**进行对比，后者仅描述S5的输入和输出，而与它的实现无关。</p>
<p>当一个组织在一个渠道中有多个peer时，它可以选择在哪些peer节点安装智能合约。它不需要在每个peer节点上安装智能合约。</p>
<h3 id="Defining-a-chaincode（定义链码）">Defining a chaincode（定义链码）</h3>
<p>尽管链码已安装在各个组织的peer上，但它是在channel范围内管理和操作的。每个组织都需要批准<strong>链码定义（chaincode definition）</strong>，这是一组参数，用于确定如何在渠道上使用链码。组织必须批准链码定义，才能使用已安装的智能合约来查询账本并认可交易。在我们的只有一个peer节点P1的例子中，组织R1中的管理员必须批准S5的<strong>链码定义（chaincode definition）</strong>。</p>
<p>需要足够数量的组织批准<strong>链码定义（chaincode definition）</strong>（默认情况下，大多数情况下为批准），然后才能将<strong>链码定义</strong>提交给渠道并用于与渠道账本进行交互。由于例子中的通道C1只有一个成员，因此R1的管理员可以将S5的<strong>链码定义</strong>提交给通道C1。提交链码的定义后，便可以由客户端应用程序A1调用S5！</p>
<p>请注意，尽管通道上的每个组件现在都可以访问S5，但它们无法看到其程序逻辑。对于安装它的那些节点（我们的示例中是P1），它仍然是私有的。从概念上讲，这意味着已定义并提交给渠道的智能合约接口与已安装的智能合约实现相反。加强这个想法；安装智能合约我们可以将其视为物理托管（<strong>physically hosted</strong>）在peer上，而已在通道上定义的智能合约我们可以将其视为逻辑托管（ <strong>logically hosted</strong>）在通道上。</p>
<h3 id="Endorsement-policy（背书策略）">Endorsement policy（背书策略）</h3>
<p>链码定义中提供的最重要的信息是背书策略。它描述了哪些组织必须批准交易然后其他组织才能将其接受到其账本副本上。在我们的示例网络中，只有R1或R2认可交易，才能将交易接受到账本L1上。</p>
<p>将链码定义提交给渠道会将背书策略放在渠道的账本上；它使通道的任何成员都可以访问它。您可以在<a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/txflow.html" target="_blank" rel="noopener">交易流</a>主题中阅读有关背书策略的更多信息。</p>
<h3 id="Invoking-a-smart-contract（调用智能合约）">Invoking a smart contract（调用智能合约）</h3>
<p>将智能合约安装在peer节点上并在channel上定义后，即可由客户端应用程序调用。</p>
<p>客户端应用程序通过向由智能合约背书策略指定的组织所拥有的节点发起交易提案；智能合约使用交易提案作为它的输入来生成认可的交易响应，该响应由peer节点返回到客户端应用程序。</p>
<p>这些交易响应与交易提议打包在一起，形成一个完全认可的交易，可以分散到整个网络。现在了解应用程序如何调用智能合约以生成认可的交易即可，稍后我们将对其进行更详细的介绍。</p>
<p>在网络开发的这一阶段，我们可以看到组织R1正在完全参与网络。它的应用程序-从A1开始-可以通过智能合约S5访问账本L1，以生成将由R1认可的交易，由于它们符合认可策略因此被接受到账本中。</p>
<h3 id="Network-completed（网络完成）">Network completed（网络完成）</h3>
<p>回想一下，我们的目标是为联盟X1（组织R1和R2）创建渠道。网络开发的下一阶段将看到组织R2将其基础结构添加到网络中。</p>
<p>让我们来看看网络进化成什么样了：<br>
<img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/network.diagram.7.png" alt="network.diagram.7"><br>
<em>通过增加组织R2的基础结构，网络得到了发展。具体来说，R2添加了peer节点P2，该peer节点托管账本L1的副本和链码S5。R2批准与R1相同的链码定义。P2也与应用程序A2一样加入了通道C1，A2和P2通过CA2进行身份认证。所有这些意味着应用程序A1和A2都可以使用peer节点P1或P2在C1上调用S5。</em></p>
<p>我们可以看到组织R2在通道C1上添加了一个peer节点P2。 P2还托管账本L1的副本和智能合约S5。我们可以看到R2还添加了可以通过通道C1连接到网络的客户端应用程序A2。为此，组织R2中的管理员已创建peer节点P2，并将其用与R1中的管理员相同的方式加入到通道C1。管理员还必须批准与R1相同的链码定义。</p>
<p>我们已经建立了第一个运营网络！在网络开发的现阶段，我们拥有一个渠道，在此通道上组织R1和R2可以彼此进行交易。具体来说，这意味着应用程序A1和A2可以使用智能合约S5和通道C1上的账本L1生成交易。</p>
<h3 id="Generating-and-accepting-transactions（生成和接受交易）">Generating and accepting transactions（生成和接受交易）</h3>
<p>与始终托管着账本副本的peer节点相反，我们看到有两种不同的peer节点：拥有智能合约的peer和没有智能合约的peer。在我们的网络中，每个peer都托管着智能合约的副本，但是在较大的网络中，将有更多的peer节点不托管智能合约的副本。peer节点只能运行安装在其上的智能合约，但是它可以通过连接到通道来知道智能合约的接口。</p>
<p>您不应该将没有安装智能合约的peer节点视为劣等节点。具有智能合约的peer节点更具有特殊的功能-有助于**生成（generate ）<strong>交易。请注意，所有peer节点都可以</strong>验证（validate）<strong>并随后</strong>接受（accept）<strong>或</strong>拒绝（reject）<strong>交易到其账本L1的副本上。但是，只有安装了智能合约的peer节点才能参与交易</strong>认可（endorsement）**的过程，这对生成合法交易至关重要。</p>
<p>我们无需担心本主题中如何生成，分配和接受交易的确切细节–能够理解我们拥有一个区块链网络，组织R1和R2可以共享信息和流程作为账本接受（ledger-captured）的交易。我们将在其他主题中学习有关交易，账本，智能合约的更多信息。</p>
<h3 id="Types-of-peers（peer节点的类型）">Types of peers（peer节点的类型）</h3>
<p>在Hyperledger Fabric中，尽管所有peer都相同，但它们可以根据网络的配置方式承担多个角色。现在，我们对典型的网络拓扑有了足够的了解，可以描述这些角色。</p>
<ul>
<li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/glossary.html#commitment" target="_blank" rel="noopener">Committing peer</a>：提交peer节点，通道中的每个peer节点都是提交peer节点。它接收包含已经生成的交易的块，随后将其验证，然后再将它们以追加的方式提交到peer节点的账本副本中。</li>
<li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/glossary.html#endorsement" target="_blank" rel="noopener">Endorsing peer</a>：背书节点，每一个安装了智能合约的peer节点都可以成为背书节点。但是要真正成为背书节点，客户端应用程序必须使用peer的智能合约来生成数字签名的事务响应。背书对等方一词是对此事实的明确引用。<br>
智能合约的背书策略确定组织的peer应先对生成的交易进行数字签名，然后才能将其接受到提交peer的账本副本中。</li>
</ul>
<p>上面是peer节点的的两种主要类型。peer还可以采用其他两种角色：</p>
<ul>
<li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/glossary.html#leading-peer" target="_blank" rel="noopener">Leader peer</a>：领导节点，当一个组织在同一个channel中有多个peer节点时，领导节点负责将交易从排序节点分发到组织内的其他提交节点。一个peer可以选择参与静态或动态领导选择。</li>
</ul>
<p>因此，从领导者的角度考虑两组peer是有帮助的-那些具有静态领导者选择的peer和那些具有动态领导者选择的peer。对于静态节点，可以将零个或多个peer配置为领导节点。对于动态节点集合，将由该集合选出一个peer作为领导者。此外，在动态集合中，如果领导节点失败了，则其余peer将重新选举领导节点。</p>
<p>这意味着同一个组织的peers可以让一个或多个领导节点连接到排序服务。这可以帮助提高处理大量事务的大型网络的弹性和可伸缩性。</p>
<ul>
<li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/glossary.html#anchor-peer" target="_blank" rel="noopener">Anchor peer</a>:锚节点，如果peer需要与另一个组织中的peer进行通信，则可以使用该组织在通道配置中定义的锚节点。一个组织可以为其定义零个或多个锚节点，并且锚节点可以帮助处理许多不同的跨组织通信场景。</li>
</ul>
<p>注意，一个peer可以同时是一个提交节点、背书节点、领导节点和锚节点！在一个组织中出于所有实际目的，仅锚节点是可选的，领导节点，背书节点和提交节点都至少有一个。</p>
<h3 id="Adding-organizations-and-peers-to-the-channel（将组织和节点添加到渠道）">Adding organizations and peers to the channel（将组织和节点添加到渠道）</h3>
<p>当组织R2加入通道时，它必须在其peer节点P2上安装智能合约S5。这很明显–如果应用程序A1或A2希望在peer节点P2上使用S5来生成交易，首先S5必须存在，安装智能合约可以做到让其存在。此时，peer节点P2具有智能合约和账本的物理副本；像P1一样，它可以在其账本L1的副本上生成和接受交易。</p>
<p>为了使用智能合约S5，R2必须批准与R1批准的相同的链码定义。由于链码定义已由组织R1提交给通道，因此R2组织批准链码定义并安装链码软件包后便可以使用链码了。提交交易只需发生一次。一个新的组织认可链码参数的行为被通道内的其他组织统一后便可以使用链码。由于链码定义的认可是在组织级别进行的，因此R2认可链码定义一次，然后将多个peer节点加入安装了链码包的渠道。然而，如果R2想要对链码定义进行修改的话，则R1和R2都需要在组织层面认可这个新的链码定义，然后需要其中一个组织将定义提交给渠道。</p>
<p>在我们的网络中，我们可以看到通道C1链接了两个客户端应用程序，两个peer节点和一个排序服务。由于只有一个通道，因此也只有一个逻辑账本可以与这些组件进行交互。节点P1和P2有相同的账本L1的副本。智能合约S5的副本通常使用相同的编程语言来实现，但如果不同，则他们在语义上必须等效。</p>
<p>我们可以看到，将对peer小心地添加到网络可以帮助支持增加的吞吐量，稳定性和弹性。例如，网络中更多的peer节点将允许更多的应用程序连接到它；在遇到计划内或计划外的停机时组织中的多个peer将提供额外的弹性。</p>
<p>这一切都意味着可以配置支持各种操作目标的复杂的拓扑网络，网络可以达到的规模不存在理论上的限制。此外，单个组织中的peer可以有效地发现并彼此通信的技术机制-<a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/gossip.html#gossip-protocol" target="_blank" rel="noopener">gossip protocol</a>-将容纳大量peer节点以支持此类拓扑。</p>
<p>仔细使用网络和通道策略可以使大型网络得到良好管理。组织可以自由地将peer节点添加到网络，只要它们符合网络约定的策略即可。网络和渠道策略在自治和控制之间建立了平衡，这是去中心化网络的特征。</p>
<p>TODO</p>
<h1 id="2-Fabric开发快速入门">2.Fabric开发快速入门</h1>
<h2 id="2-1开发环境准备">2.1开发环境准备</h2>
<h3 id="2-1-1安装homebrew">2.1.1安装homebrew</h3>
<p>查看<a href="https://mirror.tuna.tsinghua.edu.cn/help/homebrew" target="_blank" rel="noopener">清华大学开源软件镜像站</a>配置国内镜像加快安装软件的速度。</p>
<h3 id="2-1-2-安装Fabric的环境依赖">2.1.2 安装Fabric的环境依赖</h3>
<p>包括：git、go、jq、softhsm、docker</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install git go jq softhsm</span><br><span class="line">brew cask install --appdir="/Applications" docker</span><br></pre></td></tr></table></figure>
<p>我在安装的时候因为Great Wall的原因有个go的工具没有下载下来，记录一下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Failure while executing; `git clone --branch release-branch.go1.15 -c advice.detachedHead=false https://go.googlesource.com/tools.git /Users/apple/Library/Caches/Homebrew/go--gotools--git` exited with 128. Here's the output:</span><br><span class="line">Cloning into '/Users/apple/Library/Caches/Homebrew/go--gotools--git'...</span><br><span class="line">fatal: unable to access 'https://go.googlesource.com/tools.git/': Failed to connect to go.googlesource.com port 443: Operation timed out</span><br></pre></td></tr></table></figure>
<h3 id="2-1-3-fabric源码下载">2.1.3 fabric源码下载</h3>
<p>为了加速，在<a href="https://gitee.com/" target="_blank" rel="noopener">gitee</a>上导入项目：<a href="https://github.com/hyperledger/fabric%E7%84%B6%E5%90%8Eclone%E5%88%B0%E6%9C%AC%E5%9C%B0%E3%80%82" target="_blank" rel="noopener">https://github.com/hyperledger/fabric然后clone到本地。</a></p>
<h3 id="2-1-4-安装开发工具">2.1.4 安装开发工具</h3>
<p>1、在fabric目录下，运行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make gotools</span><br></pre></td></tr></table></figure>
<p>2、安装完成工具之后，验证环境是否正常</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make basic-checks integration-test-prereqs</span><br><span class="line">ginkgo -r ./integration/nwo</span><br></pre></td></tr></table></figure>
<p>我的第二部测试没有通过，记录如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(base) apple@WHOAMIdeMacBook-Pro:~/code/open-source/blockchain/hyperledger/fabric$     ginkgo -r ./integration/nwo</span><br><span class="line">Running Suite: New World Order Suite</span><br><span class="line">====================================</span><br><span class="line">Random Seed: 1607936946</span><br><span class="line">Will run 4 of 4 specs</span><br><span class="line"></span><br><span class="line">Failure [0.011 seconds]</span><br><span class="line">[BeforeSuite] BeforeSuite</span><br><span class="line">/Users/apple/code/open-source/blockchain/hyperledger/fabric/integration/nwo/nwo_suite_test.go:29</span><br><span class="line"></span><br><span class="line">  missing required image: hyperledger/fabric-ccenv:latest</span><br><span class="line"></span><br><span class="line">  /Users/apple/code/open-source/blockchain/hyperledger/fabric/integration/nwo/buildserver.go:56</span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line">Ran 4 of 0 Specs in 0.512 seconds</span><br><span class="line">FAIL! -- 0 Passed | 4 Failed | 0 Pending | 0 Skipped</span><br><span class="line">--- FAIL: TestNewWorldOrder (0.51s)</span><br><span class="line">FAIL</span><br><span class="line"></span><br><span class="line">Ginkgo ran 1 suite in 3.561084735s</span><br><span class="line">Test Suite Failed</span><br></pre></td></tr></table></figure>
<p>3、从脚本运行中的信息可以直到依赖了哪些软件：</p>
<ul>
<li><a href="https://github.com/docker-library/official-images/blob/master/library/alpine" target="_blank" rel="noopener">library/alpine:3.12</a></li>
<li><a href="https://hub.docker.com/r/hyperledger/fabric-baseos" target="_blank" rel="noopener">hyperledger/fabric-baseos</a></li>
<li><a href="https://github.com/docker-library/golang" target="_blank" rel="noopener">golang:1.14.12-alpine3.12</a></li>
<li><a href="https://hub.docker.com/r/hyperledger/fabric-ccenv" target="_blank" rel="noopener">hyperledger/fabric-ccenv</a></li>
<li><a href="https://hub.docker.com/r/confluentinc/cp-zookeeper" target="_blank" rel="noopener">confluentinc/cp-zookeeper:5.3.1</a></li>
<li><a href="https://hub.docker.com/r/confluentinc/cp-kafka" target="_blank" rel="noopener">confluentinc/cp-kafka:5.3.1</a></li>
<li><a href="https://github.com/docker-library/official-images/blob/master/library/couchdb" target="_blank" rel="noopener">library/couchdb:3.1.1</a></li>
</ul>
<p>5.添加更多的依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加 gnu-tar</span></span><br><span class="line">brew install gnu-tar --with-default-names</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加 libtool</span></span><br><span class="line">brew install libtool</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译 configtxgen</span></span><br><span class="line">make configtxgen</span><br></pre></td></tr></table></figure>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://github.com/guozhe001" target="_blank" rel="noopener">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Fabric概念学习与梳理"><span class="toc-number">1.</span> <span class="toc-text">1.Fabric概念学习与梳理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Blockchain-network-Fabric的网络"><span class="toc-number">1.1.</span> <span class="toc-text">Blockchain network(Fabric的网络)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-the-Network"><span class="toc-number">1.1.1.</span> <span class="toc-text">Creating the Network</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Certificate-Authorities（证书颁发机构）"><span class="toc-number">1.1.2.</span> <span class="toc-text">Certificate Authorities（证书颁发机构）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Adding-Network-Administrators（添加网络管理员）"><span class="toc-number">1.1.3.</span> <span class="toc-text">Adding Network Administrators（添加网络管理员）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Defining-a-Consortium-定义一个联盟"><span class="toc-number">1.1.4.</span> <span class="toc-text">Defining a Consortium(定义一个联盟)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-a-channel-for-a-consortium-为联盟创建一个通道"><span class="toc-number">1.1.5.</span> <span class="toc-text">Creating a channel for a consortium(为联盟创建一个通道)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Peers-and-Ledgers（节点与账单）"><span class="toc-number">1.1.6.</span> <span class="toc-text">Peers and Ledgers（节点与账单）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Applications-and-Smart-Contract-chaincode（应用程序和智能合约联链码）"><span class="toc-number">1.1.7.</span> <span class="toc-text">Applications and Smart Contract chaincode（应用程序和智能合约联链码）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing-a-chaincode-package（安装链码包）"><span class="toc-number">1.1.8.</span> <span class="toc-text">Installing a chaincode package（安装链码包）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Defining-a-chaincode（定义链码）"><span class="toc-number">1.1.9.</span> <span class="toc-text">Defining a chaincode（定义链码）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Endorsement-policy（背书策略）"><span class="toc-number">1.1.10.</span> <span class="toc-text">Endorsement policy（背书策略）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Invoking-a-smart-contract（调用智能合约）"><span class="toc-number">1.1.11.</span> <span class="toc-text">Invoking a smart contract（调用智能合约）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-completed（网络完成）"><span class="toc-number">1.1.12.</span> <span class="toc-text">Network completed（网络完成）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Generating-and-accepting-transactions（生成和接受交易）"><span class="toc-number">1.1.13.</span> <span class="toc-text">Generating and accepting transactions（生成和接受交易）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Types-of-peers（peer节点的类型）"><span class="toc-number">1.1.14.</span> <span class="toc-text">Types of peers（peer节点的类型）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Adding-organizations-and-peers-to-the-channel（将组织和节点添加到渠道）"><span class="toc-number">1.1.15.</span> <span class="toc-text">Adding organizations and peers to the channel（将组织和节点添加到渠道）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Fabric开发快速入门"><span class="toc-number">2.</span> <span class="toc-text">2.Fabric开发快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1开发环境准备"><span class="toc-number">2.1.</span> <span class="toc-text">2.1开发环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1安装homebrew"><span class="toc-number">2.1.1.</span> <span class="toc-text">2.1.1安装homebrew</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-安装Fabric的环境依赖"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.1.2 安装Fabric的环境依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-fabric源码下载"><span class="toc-number">2.1.3.</span> <span class="toc-text">2.1.3 fabric源码下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-安装开发工具"><span class="toc-number">2.1.4.</span> <span class="toc-text">2.1.4 安装开发工具</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&text=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&is_video=false&description=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=区块链开发框架-Hyperledger-Fabric学习总结&body=Check out this article: https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&title=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&name=区块链开发框架-Hyperledger-Fabric学习总结&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://guozhe001.github.io/2020/12/15/blockchain/fabric/Fabric%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%A2%B3%E7%90%86/&t=区块链开发框架-Hyperledger-Fabric学习总结" target="_blank" rel="noopener"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2021
    guozhe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://github.com/guozhe001" target="_blank" rel="noopener">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
