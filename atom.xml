<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ»´æ°´æˆæ¶“</title>
  
  <subtitle>æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹</subtitle>
  <link href="https://guozhe001.github.io/atom.xml" rel="self"/>
  
  <link href="https://guozhe001.github.io/"/>
  <updated>2021-04-01T11:30:33.141Z</updated>
  <id>https://guozhe001.github.io/</id>
  
  <author>
    <name>guozhe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Macå®‰è£…swarm-bee</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/eth/%E5%AE%89%E8%A3%85swarm/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/eth/%E5%AE%89%E8%A3%85swarm/</id>
    <published>2021-04-01T10:26:52.458Z</published>
    <updated>2021-04-01T11:30:33.141Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…swarm-clef">å®‰è£…swarm-clef</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">brew tap ethersphere/tap</span></span><br><span class="line">HOMEBREW_CORE_GIT_REMOTE set: using https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git for Homebrew/brew Git remote.</span><br><span class="line">Updating Homebrew...</span><br><span class="line">remote: Counting objects: 8637, done.</span><br><span class="line">remote: Compressing objects: 100% (3519/3519), done.</span><br><span class="line">remote: Total 8637 (delta 5893), reused 7146 (delta 5115)</span><br><span class="line">Receiving objects: 100% (8637/8637), 2.98 MiB | 530.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (5893/5893), done.</span><br><span class="line">From https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core</span><br><span class="line">   4c4ccfe0f3..7fa7e5ada3  master     -&gt; origin/master</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/core).</span><br><span class="line">==&gt; New Formulae</span><br><span class="line">as-tree                  gopass-jsonapi           klee                     moto                     pyqt-3d                  qt-libiodbc              qt-unixodbc              virtualenv</span><br><span class="line">clusterctl               haskell-language-server  leaf-proxy               numactl                  pyqt-builder             qt-mariadb               rosa-cli                 wllvm</span><br><span class="line">djl-serving              iconsur                  libunwind                obfs4proxy               pyqt-networkauth         qt-mysql                 threemux                 xray</span><br><span class="line">enzyme                   influxdb@1               linux-pam                orgalorg                 python-tabulate          qt-percona-server        timg                     zlib-ng</span><br><span class="line">glibc                    kertish-dfs              lttng-ust                pandoc-plot              python-tk@3.9            qt-postgresql            tz</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">Updated 810 formulae.</span><br><span class="line">==&gt; Renamed Formulae</span><br><span class="line">kde-extra-cmake-modules -&gt; extra-cmake-modules     kde-kdoctools -&gt; kdoctools                         kde-threadweaver -&gt; threadweaver                   pyqt5 -&gt; pyqt@5</span><br><span class="line">kde-karchive -&gt; karchive                           kde-ki18n -&gt; ki18n                                 minizip2 -&gt; minizip-ng</span><br><span class="line"></span><br><span class="line">==&gt; Tapping ethersphere/tap</span><br><span class="line">Cloning into &#x27;/usr/local/Homebrew/Library/Taps/ethersphere/homebrew-tap&#x27;...</span><br><span class="line">remote: Enumerating objects: 54, done.</span><br><span class="line">remote: Counting objects: 100% (54/54), done.</span><br><span class="line">remote: Compressing objects: 100% (53/53), done.</span><br><span class="line">remote: Total 54 (delta 25), reused 3 (delta 0), pack-reused 0</span><br><span class="line">Unpacking objects: 100% (54/54), done.</span><br><span class="line">Tapped 2 formulae (79 files, 55.2KB).</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…swarm-clef-v2">å®‰è£…swarm-clef</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install swarm-clef</span></span><br><span class="line">==&gt; Installing swarm-clef from ethersphere/tap</span><br><span class="line">==&gt; Downloading https://github.com/ethersphere/bee-clef/releases/download/v0.4.9/bee-clef-darwin-amd64.tar.gz</span><br><span class="line">==&gt; Downloading from https://github-releases.githubusercontent.com/315272652/3b94a200-76ca-11eb-8e99-bff3c754fc38?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20210329%2Fus-eas</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; openssl rand -out /usr/local/var/lib/swarm-clef/password -base64 32</span><br><span class="line">==&gt; /usr/local/Cellar/swarm-clef/0.4.9/bin/swarm-clef-init &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Logs: /usr/local/var/log/swarm-clef/swarm-clef.log</span><br><span class="line"></span><br><span class="line">To have launchd start ethersphere/tap/swarm-clef now and restart at login:</span><br><span class="line">  brew services start ethersphere/tap/swarm-clef</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/swarm-clef/0.4.9: 9 files, 31.3MB, built in 10 seconds</span><br><span class="line">==&gt; `brew cleanup` has not been run in 30 days, running now...</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/git--man--2.30.1.tar.xz... (470.8KB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/git--html--2.30.1.tar.xz... (1.3MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/git--2.30.1.tar.xz... (6MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/git--2.30.1.big_sur.bottle.tar.gz... (14.8MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/glib--2.66.7.big_sur.bottle.tar.gz... (6.2MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/go--1.16.big_sur.bottle.tar.gz... (154.2MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/jasper--2.0.26.big_sur.bottle.tar.gz... (310.4KB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/node--15.11.0.big_sur.bottle.tar.gz... (15.5MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/openssl@1.1--1.1.1j.tar.gz... (9.4MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/openssl@1.1--1.1.1j.big_sur.bottle.tar.gz... (5.4MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/python@3.9--setuptools--53.0.0.tar.gz... (2.0MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/solidity--0.8.2.big_sur.bottle.tar.gz... (7.3MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/sqlite--3.34.0.big_sur.bottle.tar.gz... (2.0MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/sphinx-doc--3.5.1.tar.gz... (5.6MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/protobuf--3.14.0.tar.gz... (7.2MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/protobuf--patch--5433b6247127f9ca622b15c9f669efbaac830fa717ed6220081bc1fc3c735f91.patch... (1KB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/sphinx-doc--urllib3--1.26.3.tar.gz... (285.7KB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/cmake--3.19.6.tar.gz... (8.8MB)</span><br><span class="line">Removing: /Users/apple/Library/Caches/Homebrew/sphinx-doc--Pygments--2.8.0.tar.gz... (3.8MB)</span><br><span class="line">Removing: /Users/apple/Library/Logs/Homebrew/node@10... (64B)</span><br><span class="line">Removing: /Users/apple/Library/Logs/Homebrew/node... (64B)</span><br><span class="line">Pruned 2 symbolic links and 9 directories from /usr/local</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨">å¯åŠ¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew services start swarm-clef</span></span><br><span class="line">==&gt; Tapping homebrew/services</span><br><span class="line">Cloning into &#x27;/usr/local/Homebrew/Library/Taps/homebrew/homebrew-services&#x27;...</span><br><span class="line">remote: Enumerating objects: 20, done.</span><br><span class="line">remote: Counting objects: 100% (20/20), done.</span><br><span class="line">remote: Compressing objects: 100% (12/12), done.</span><br><span class="line">remote: Total 1141 (delta 8), reused 10 (delta 8), pack-reused 1121</span><br><span class="line">Receiving objects: 100% (1141/1141), 331.41 KiB | 397.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (485/485), done.</span><br><span class="line">Tapped 1 command (40 files, 420.5KB).</span><br><span class="line">==&gt; Successfully started `swarm-clef` (label: homebrew.mxcl.swarm-clef)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…swarm-bee">å®‰è£…swarm-bee</h2><h3 id="å®‰è£…">å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install swarm-bee</span></span><br><span class="line">HOMEBREW_CORE_GIT_REMOTE set: using https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git for Homebrew/brew Git remote.</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Installing swarm-bee from ethersphere/tap</span><br><span class="line">==&gt; Downloading https://github.com/ethersphere/bee/releases/download/v0.5.3/bee-darwin-amd64.tar.gz</span><br><span class="line">==&gt; Downloading from https://github-releases.githubusercontent.com/234530887/4ac71c80-8bb0-11eb-8943-fe7e40bc83d8?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20210329%2Fus-eas</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; openssl rand -out /usr/local/var/lib/swarm-bee/password -base64 32</span><br><span class="line">==&gt; /usr/local/Cellar/swarm-bee/0.5.3/bin/bee init --config /usr/local/etc/swarm-bee/bee.yaml &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Logs:   /usr/local/var/log/swarm-bee/bee.log</span><br><span class="line">Config: /usr/local/etc/swarm-bee/bee.yaml</span><br><span class="line"></span><br><span class="line">Bee has SWAP enabled and by default is using slock.it goerli ethereum endpoint.</span><br><span class="line">It is recommended to use external signer with bee.</span><br><span class="line">Check documentation for more info:</span><br><span class="line">- SWAP https://docs.ethswarm.org/docs/installation/manual#swap-bandwidth-incentives</span><br><span class="line">- External signer https://docs.ethswarm.org/docs/installation/bee-clef</span><br><span class="line"></span><br><span class="line">After you finish configuration run &#x27;bee-get-addr&#x27;.</span><br><span class="line"></span><br><span class="line">To have launchd start ethersphere/tap/swarm-bee now and restart at login:</span><br><span class="line">  brew services start ethersphere/tap/swarm-bee</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/swarm-bee/0.5.3: 7 files, 32.5MB, built in 5 seconds</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨-v2">å¯åŠ¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services start swarm-bee</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ—¥å¿—éªŒè¯å¯åŠ¨æƒ…å†µ">æŸ¥çœ‹æ—¥å¿—éªŒè¯å¯åŠ¨æƒ…å†µ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> tail -f /usr/local/var/log/swarm-bee/bee.log</span><br><span class="line">time=&quot;2021-03-29T11:53:15+08:00&quot; level=info msg=&quot;using ethereum address fb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:53:15+08:00&quot; level=info msg=&quot;debug api address: 127.0.0.1:1635&quot;</span><br><span class="line">time=&quot;2021-03-29T11:53:20+08:00&quot; level=info msg=&quot;using default factory address for chain id 5: f0277caffea72734853b834afc9892461ea18474&quot;</span><br><span class="line">time=&quot;2021-03-29T11:53:21+08:00&quot; level=info msg=&quot;no chequebook found, deploying new one.&quot;</span><br><span class="line">time=&quot;2021-03-29T11:53:23+08:00&quot; level=warning msg=&quot;cannot continue until there is sufficient ETH (for Gas) and at least 10 BZZ available on fb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:53:23+08:00&quot; level=warning msg=&quot;get your Goerli ETH and Goerli BZZ now via the bzzaar at https://bzz.ethswarm.org/?transaction=buy&amp;amount=10&amp;slippage=30&amp;receiver=0xfb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:53:43+08:00&quot; level=warning msg=&quot;cannot continue until there is sufficient ETH (for Gas) and at least 10 BZZ available on fb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:53:43+08:00&quot; level=warning msg=&quot;get your Goerli ETH and Goerli BZZ now via the bzzaar at https://bzz.ethswarm.org/?transaction=buy&amp;amount=10&amp;slippage=30&amp;receiver=0xfb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:54:05+08:00&quot; level=warning msg=&quot;cannot continue until there is sufficient ETH (for Gas) and at least 10 BZZ available on fb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:54:05+08:00&quot; level=warning msg=&quot;get your Goerli ETH and Goerli BZZ now via the bzzaar at https://bzz.ethswarm.org/?transaction=buy&amp;amount=10&amp;slippage=30&amp;receiver=0xfb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:54:26+08:00&quot; level=warning msg=&quot;cannot continue until there is sufficient ETH (for Gas) and at least 10 BZZ available on fb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br><span class="line">time=&quot;2021-03-29T11:54:26+08:00&quot; level=warning msg=&quot;get your Goerli ETH and Goerli BZZ now via the bzzaar at https://bzz.ethswarm.org/?transaction=buy&amp;amount=10&amp;slippage=30&amp;receiver=0xfb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜å¤„ç†">é—®é¢˜å¤„ç†</h2><h3 id="æ²¡æœ‰è¶³å¤Ÿçš„BZZ">æ²¡æœ‰è¶³å¤Ÿçš„BZZ</h3><p>åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼Œéœ€è¦æŠµæŠ¼10ä¸ªBZZï¼Œæ‰€ä»¥éœ€è¦å…ˆå»å…‘æ¢BZZã€‚æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msg=&quot;cannot continue until there is sufficient ETH (for Gas) and at least 10 BZZ available on fb6fe8500a4101196cc80e02f7137a20720fed20&quot;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h4><p>æŸ¥çœ‹æ—¥å¿—<code>get your Goerli ETH and Goerli BZZ now via the bzzaar at https://bzz.ethswarm.org/?transaction=buy&amp;amount=10&amp;slippage=30&amp;receiver=0xfb6fe8500a4101196cc80e02f7137a20720fed20</code>å»æ—¥å¿—é‡Œé¢çš„åœ°å€å»å…‘æ¢BZZå³å¯ã€‚</p><p><em>é’±åŒ…éœ€è¦è¿æ¥Goerliæµ‹è¯•ç½‘ç»œ</em></p><h3 id="è¿æ¥ä¸ä¸Š">è¿æ¥ä¸ä¸Š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">time=&quot;2021-04-01T16:39:38+08:00&quot; level=warning msg=&quot;peer not reachable when attempting to connect&quot;</span><br><span class="line">time=&quot;2021-04-01T16:39:38+08:00&quot; level=info msg=&quot;attempting to connect to peer 4cf39bf945bd6e9b0c30bc2c71d1fbd37ea62a6914153198013f6a307ac42c5e&quot;</span><br><span class="line">time=&quot;2021-04-01T16:39:38+08:00&quot; level=debug msg=&quot;could not connect to peer 4cf39bf945bd6e9b0c30bc2c71d1fbd37ea62a6914153198013f6a307ac42c5e: breaker closed&quot;</span><br><span class="line">time=&quot;2021-04-01T16:39:38+08:00&quot; level=debug msg=&quot;peer not reachable from kademlia [Underlay: /ip4/185.141.62.127/tcp/1634/p2p/16Uiu2HAm9tLfWdu6UGxcqEsEssZDAug4LL3xDoTtL8C1KgWDoHSv, Overlay 4cf39bf945bd6e9b0c30bc2c71d1fbd37ea62a6914153198013f6a307ac42c5e, Signature 2fd8b012352e6d8bbb987a49c62060d4ec9c900335e9abe02c685ab3c4ec92f721dbeea4ad81943933dc50bd37d773677d27d5ae1ca9d89cd61de15477fbe72f1c]: breaker closed&quot;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ-é‡å¯ï¼›æš‚æ—¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆ">è§£å†³æ–¹æ¡ˆ-é‡å¯ï¼›æš‚æ—¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆ</h4><h2 id="å¸¸ç”¨å‘½ä»¤è®°å½•">å¸¸ç”¨å‘½ä»¤è®°å½•</h2><h3 id="å¯åŠ¨å’Œåœæ­¢">å¯åŠ¨å’Œåœæ­¢</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨</span></span><br><span class="line">brew services start swarm-bee</span><br><span class="line"><span class="meta">#</span><span class="bash"> åœæ­¢</span></span><br><span class="line">brew services stop swarm-bee</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯</span></span><br><span class="line">brew services restart swarm-bee</span><br></pre></td></tr></table></figure><h3 id="ä¸Beeäº¤äº’ï¼šçŠ¶æ€æ£€æŸ¥">ä¸Beeäº¤äº’ï¼šçŠ¶æ€æ£€æŸ¥</h3><h4 id="ä¸»é¡µ">ä¸»é¡µ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1633</span><br></pre></td></tr></table></figure><h4 id="æ£€æŸ¥è¿è¡Œæ˜¯å¦æ­£å¸¸">æ£€æŸ¥è¿è¡Œæ˜¯å¦æ­£å¸¸</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s http://localhost:1635/health</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹å½“å‰beeèŠ‚ç‚¹çš„åœ°å€">æŸ¥çœ‹å½“å‰beeèŠ‚ç‚¹çš„åœ°å€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bee-get-addr</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s localhost:1635/addresses | jq .ethereum</span><br></pre></td></tr></table></figure><h3 id="ä¸Beeäº¤äº’ï¼šæ”¯ç¥¨ä¿¡æ¯">ä¸Beeäº¤äº’ï¼šæ”¯ç¥¨ä¿¡æ¯</h3><h4 id="æŸ¥è¯¢å½“å‰beeèŠ‚ç‚¹çš„ä½™é¢">æŸ¥è¯¢å½“å‰beeèŠ‚ç‚¹çš„ä½™é¢</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/chequebook/balance | jq</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå½“å‰beeèŠ‚ç‚¹è¿æ¥çš„ï¼‰çš„ä½™é¢">æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå½“å‰beeèŠ‚ç‚¹è¿æ¥çš„ï¼‰çš„ä½™é¢</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/balances | jq</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ç»“ç®—ä¿¡æ¯">æŸ¥çœ‹ç»“ç®—ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/settlements | jq</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ”¯ç¥¨ä¿¡æ¯">æŸ¥çœ‹æ”¯ç¥¨ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/chequebook/cheque | jq</span><br></pre></td></tr></table></figure><h4 id="æ”¯ç¥¨å…‘æ¢-åœ°å€æ˜¯ä¸Šä¸€ä¸ªå‘½ä»¤ä¸­æ˜¾ç¤ºçš„åœ°å€">æ”¯ç¥¨å…‘æ¢(åœ°å€æ˜¯ä¸Šä¸€ä¸ªå‘½ä»¤ä¸­æ˜¾ç¤ºçš„åœ°å€)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST http://localhost:1635/chequebook/cashout/d7881307e793e389642ea733451db368c4c9b9e23f188cca659c8674d183a56b</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ”¯ç¥¨çš„å…‘æ¢çŠ¶æ€">æŸ¥çœ‹æ”¯ç¥¨çš„å…‘æ¢çŠ¶æ€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:1635/chequebook/cashout/d7881307e793e389642ea733451db368c4c9b9e23f188cca659c8674d183a56b | jq</span><br></pre></td></tr></table></figure><h4 id="gBZZæç°">gBZZæç°</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST http://localhost:1635/chequebook/withdraw\?amount\=1000 | jq</span><br></pre></td></tr></table></figure><h3 id="ç®¡ç†æ”¯ç¥¨">ç®¡ç†æ”¯ç¥¨</h3><h4 id="ä¸‹è½½å®˜æ–¹çš„è„šæœ¬">ä¸‹è½½å®˜æ–¹çš„è„šæœ¬</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O cashout.sh https://gist.githubusercontent.com/ralph-pichler/3b5ccd7a5c5cd0500e6428752b37e975/raw/7ba05095e0836735f4a648aefe52c584e18e065f/cashout.sh</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ å¯æ‰§è¡Œæƒé™">æ·»åŠ å¯æ‰§è¡Œæƒé™</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x cashout.sh</span><br></pre></td></tr></table></figure><h4 id="åˆ—å‡ºæ‰€æœ‰çš„æ²¡æœ‰å…‘æ¢çš„æ”¯ç¥¨ä¿¡æ¯">åˆ—å‡ºæ‰€æœ‰çš„æ²¡æœ‰å…‘æ¢çš„æ”¯ç¥¨ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./cashout.sh</span><br><span class="line">5fc100feec04e097fcf1469962a20577f3e76f07b193ae5b28156e8c72779865 246000000000</span><br></pre></td></tr></table></figure><h4 id="å½“è¶…è¿‡5BZZæ—¶å…‘æ¢æ‰€æœ‰æ”¯ç¥¨ï¼š">å½“è¶…è¿‡5BZZæ—¶å…‘æ¢æ‰€æœ‰æ”¯ç¥¨ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cashout.sh cashout-all 5</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶è·¯å¾„">æ–‡ä»¶è·¯å¾„</h3><h4 id="æ—¥å¿—æ–‡ä»¶ï¼š">æ—¥å¿—æ–‡ä»¶ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f /usr/local/var/log/swarm-bee/bee.log</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶ï¼š">é…ç½®æ–‡ä»¶ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/etc/swarm-bee/bee.yaml</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å®‰è£…swarm-clef&quot;&gt;å®‰è£…swarm-clef&lt;/h2&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;s</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="ethereum" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/ethereum/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="ethereum" scheme="https://guozhe001.github.io/tags/ethereum/"/>
    
    <category term="swarm" scheme="https://guozhe001.github.io/tags/swarm/"/>
    
  </entry>
  
  <entry>
    <title>ubantuå®‰è£…swarm-bee</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E5%AE%89%E8%A3%85swarm-bee/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E5%AE%89%E8%A3%85swarm-bee/</id>
    <published>2021-04-01T10:26:39.181Z</published>
    <updated>2021-04-01T11:29:54.831Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…swarm-clef">å®‰è£…swarm-clef</h2><h3 id="å®‰è£…">å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/ethersphere/bee-clef/releases/download/v0.4.9/bee-clef_0.4.9_amd64.deb</span><br><span class="line">sudo dpkg -i bee-clef_0.4.9_amd64.deb</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹çŠ¶æ€">æŸ¥çœ‹çŠ¶æ€</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status bee-clef</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ—¥å¿—">æŸ¥çœ‹æ—¥å¿—</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -f -u bee-clef.service</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…swarm-bee">å®‰è£…swarm-bee</h2><h3 id="å®‰è£…-v2">å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/ethersphere/bee/releases/download/v0.5.3/bee_0.5.3_amd64.deb</span><br><span class="line">sudo dpkg -i bee_0.5.3_amd64.deb</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹çŠ¶æ€-v2">æŸ¥çœ‹çŠ¶æ€</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status bee</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ—¥å¿—-v2">æŸ¥çœ‹æ—¥å¿—</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl --lines=100 --follow --unit bee</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜å¤„ç†">é—®é¢˜å¤„ç†</h2><h3 id="var-lib-bee-statestoreç›®å½•æ²¡æœ‰æƒé™">/var/lib/bee/statestoreç›®å½•æ²¡æœ‰æƒé™</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Apr 01 08:54:29 localhost systemd[1]: Started Bee - Ethereum Swarm node.</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]: Welcome to the Swarm.... Bzzz Bzzzz Bzzzz</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:                 \     /</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:             \    o ^ o    /</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:               \ (     ) /</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:    ____________(%%%%%%%)____________</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:   (     /   /  )%%%%%%%(  \   \     )</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:   (___/___/__/           \__\___\___)</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:      (     /  /(%%%%%%%)\  \     )</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:       (__/___/ (%%%%%%%) \___\__)</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:               /(       )\</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:             /   (%%%%%)   \</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:                  (%%%)</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]:                    !</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]: time=&quot;2021-04-01T08:54:29Z&quot; level=info msg=&quot;version: 0.5.3-acbd0e2&quot;</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]: time=&quot;2021-04-01T08:54:29Z&quot; level=info msg=&quot;using swarm network address through clef: 25b2df172cc52d4805503dddcae1be83794e68982c9379dab5f318747ebd566f&quot;</span><br><span class="line">Apr 01 08:54:29 localhost bee[2291]: time=&quot;2021-04-01T08:54:29Z&quot; level=info msg=&quot;swarm public key 0384432c177666fe00f73142a5361b005bff3ebcc68fafe452730a15382ee79e15&quot;</span><br><span class="line">Apr 01 08:54:30 localhost bee[2291]: time=&quot;2021-04-01T08:54:30Z&quot; level=info msg=&quot;pss public key 0281af1ad7e6c9f2062ec25fe2bf889fe38eedb45389b7385298556ae1e5321795&quot;</span><br><span class="line">Apr 01 08:54:30 localhost bee[2291]: time=&quot;2021-04-01T08:54:30Z&quot; level=info msg=&quot;using ethereum address 9f2a5a94269f87af2d5219a0f7554f6d0744e2bb&quot;</span><br><span class="line">Apr 01 08:54:30 localhost bee[2291]: Error: open /var/lib/bee/statestore/LOCK: permission denied</span><br><span class="line">Apr 01 08:54:30 localhost systemd[1]: bee.service: Main process exited, code=exited, status=1/FAILURE</span><br><span class="line">Apr 01 08:54:30 localhost systemd[1]: bee.service: Failed with result &#x27;exit-code&#x27;.</span><br><span class="line">Apr 01 08:54:35 localhost systemd[1]: bee.service: Scheduled restart job, restart counter is at 5.</span><br><span class="line">Apr 01 08:54:35 localhost systemd[1]: Stopped Bee - Ethereum Swarm node.</span><br></pre></td></tr></table></figure><h3 id="æ²¡æœ‰è¶³å¤Ÿçš„ETH">æ²¡æœ‰è¶³å¤Ÿçš„ETH</h3><p>åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶æŠ¥é”™è¯´æ²¡æœ‰è¶³å¤Ÿçš„ETHä½œä¸ºgasè´¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cannot continue until there is sufficient ETH (for Gas) available on 9f2a5a94269f87af2d5219a0f7554f6d0744e2bb</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h4><p>æŸ¥çœ‹æ—¥å¿—<code>get your Goerli ETH and Goerli BZZ now via the bzzaar at https://bzz.ethswarm.org/?transaction=buy&amp;amount=10&amp;slippage=30&amp;receiver=0xfb6fe8500a4101196cc80e02f7137a20720fed20</code></p><p>åœ¨<a href="https://goerli-faucet.slock.it/">Goerliæµ‹è¯•ç½‘ç»œ</a>è·å–ä»¥å¤ªå¸</p><h2 id="å¸¸ç”¨å‘½ä»¤è®°å½•">å¸¸ç”¨å‘½ä»¤è®°å½•</h2><h3 id="å¯åŠ¨å’Œåœæ­¢">å¯åŠ¨å’Œåœæ­¢</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœæ­¢</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯</span></span><br><span class="line">sudo systemctl restart bee</span><br></pre></td></tr></table></figure><h3 id="ä¸Beeäº¤äº’ï¼šçŠ¶æ€æ£€æŸ¥">ä¸Beeäº¤äº’ï¼šçŠ¶æ€æ£€æŸ¥</h3><h4 id="ä¸»é¡µ">ä¸»é¡µ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1633</span><br></pre></td></tr></table></figure><h4 id="æ£€æŸ¥è¿è¡Œæ˜¯å¦æ­£å¸¸">æ£€æŸ¥è¿è¡Œæ˜¯å¦æ­£å¸¸</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s http://localhost:1635/health</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹å½“å‰beeèŠ‚ç‚¹çš„åœ°å€">æŸ¥çœ‹å½“å‰beeèŠ‚ç‚¹çš„åœ°å€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bee-get-addr</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s localhost:1635/addresses | jq .ethereum</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹é“¾æ¥äº†å¤šå°‘ä¸ªpeer">æŸ¥çœ‹é“¾æ¥äº†å¤šå°‘ä¸ªpeer</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s http://localhost:1635/peers | jq &#x27;.peers | length&#x27;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ç½‘ç»œæ‹“æ‰‘">æŸ¥çœ‹ç½‘ç»œæ‹“æ‰‘</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET http://localhost:1635/topology | jq</span><br></pre></td></tr></table></figure><h3 id="ä¸Beeäº¤äº’ï¼šä¸Šä¼ æ–‡ä»¶">ä¸Beeäº¤äº’ï¼šä¸Šä¼ æ–‡ä»¶</h3><h4 id="ä¸Šä¼ æ–‡ä»¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªhashå€¼">ä¸Šä¼ æ–‡ä»¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªhashå€¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> curl -F file=@bee.jpg http://localhost:1633/files</span></span><br><span class="line">&#123;&quot;reference&quot;:&quot;02a03340405f30c1027b885ee39903fb394ba8909e98029dd6c14371437edafc&quot;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --data-binary @bee.jpg  -H &quot;Content-Type: video/jpg&quot; &quot;http://localhost:1633/files?name=bee.jpg&quot;</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½æ–‡ä»¶">ä¸‹è½½æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -OJ http://localhost:1633/files/042d4fe94b946e2cb51196a8c136b8cc335156525bf1ad7e86356c2402291dd4</span><br><span class="line">https://gateway.ethswarm.org/files/042d4fe94b946e2cb51196a8c136b8cc335156525bf1ad7e86356c2402291dd4</span><br></pre></td></tr></table></figure><h4 id="ç‰¹åˆ«æ³¨æ„ï¼šä¸è¦ä¼ ä¸€äº›é‡è¦æ•°æ®åˆ°swarmé™¤éå·²ç»åŠ å¯†ï¼Œå› ä¸ºä¸Šä¼ ä¸Šå»ä¹‹åçš„æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯å…¬å¼€çš„ï¼Œåªè¦çŸ¥é“hashå°±èƒ½ä¸‹è½½ã€‚">ç‰¹åˆ«æ³¨æ„ï¼šä¸è¦ä¼ ä¸€äº›é‡è¦æ•°æ®åˆ°swarmé™¤éå·²ç»åŠ å¯†ï¼Œå› ä¸ºä¸Šä¼ ä¸Šå»ä¹‹åçš„æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯å…¬å¼€çš„ï¼Œåªè¦çŸ¥é“hashå°±èƒ½ä¸‹è½½ã€‚</h4><h3 id="ä¸Beeäº¤äº’ï¼šä¸Šä¼ æ–‡ä»¶å¤¹">ä¸Beeäº¤äº’ï¼šä¸Šä¼ æ–‡ä»¶å¤¹</h3><p>æ¯”å¦‚æœ‰ä¸€ä¸ª<a href="https://github.com/guozhe001/hello-swarm.git">å‰ç«¯vueé¡¹ç›®</a>ï¼Œéœ€è¦ä¸Šä¼ åˆ°swarm</p><ol><li>éœ€è¦æŠŠé¡¹ç›®æ„å»ºä¸€ä¸‹<code>npm run build</code></li><li>æŠŠéœ€è¦ä¸Šä¼ çš„æ–‡ä»¶å¤¹<code>dist</code>æ‰“åŒ…</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl \</span><br><span class="line">    -X POST \</span><br><span class="line">    -H &quot;Content-Type: application/x-tar&quot; \</span><br><span class="line">    -H &quot;Swarm-Index-Document: index.html&quot; \</span><br><span class="line">    --data-binary @hello-swarm.tar http://localhost:1633/dirs</span><br></pre></td></tr></table></figure><h3 id="ä¸Beeäº¤äº’ï¼šæ”¯ç¥¨ä¿¡æ¯">ä¸Beeäº¤äº’ï¼šæ”¯ç¥¨ä¿¡æ¯</h3><h4 id="æŸ¥è¯¢å½“å‰beeèŠ‚ç‚¹çš„ä½™é¢">æŸ¥è¯¢å½“å‰beeèŠ‚ç‚¹çš„ä½™é¢</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/chequebook/balance | jq</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå½“å‰beeèŠ‚ç‚¹è¿æ¥çš„ï¼‰çš„ä½™é¢">æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå½“å‰beeèŠ‚ç‚¹è¿æ¥çš„ï¼‰çš„ä½™é¢</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/balances | jq</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ç»“ç®—ä¿¡æ¯">æŸ¥çœ‹ç»“ç®—ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/settlements | jq</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ”¯ç¥¨ä¿¡æ¯">æŸ¥çœ‹æ”¯ç¥¨ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:1635/chequebook/cheque | jq</span><br></pre></td></tr></table></figure><h4 id="æ”¯ç¥¨å…‘æ¢-åœ°å€æ˜¯ä¸Šä¸€ä¸ªå‘½ä»¤ä¸­æ˜¾ç¤ºçš„åœ°å€">æ”¯ç¥¨å…‘æ¢(åœ°å€æ˜¯ä¸Šä¸€ä¸ªå‘½ä»¤ä¸­æ˜¾ç¤ºçš„åœ°å€)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST http://localhost:1635/chequebook/cashout/d7881307e793e389642ea733451db368c4c9b9e23f188cca659c8674d183a56b</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ”¯ç¥¨çš„å…‘æ¢çŠ¶æ€">æŸ¥çœ‹æ”¯ç¥¨çš„å…‘æ¢çŠ¶æ€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:1635/chequebook/cashout/d7881307e793e389642ea733451db368c4c9b9e23f188cca659c8674d183a56b | jq</span><br></pre></td></tr></table></figure><h4 id="gBZZæç°">gBZZæç°</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST http://localhost:1635/chequebook/withdraw\?amount\=1000 | jq</span><br></pre></td></tr></table></figure><h3 id="ç®¡ç†æ”¯ç¥¨">ç®¡ç†æ”¯ç¥¨</h3><h4 id="ä¸‹è½½å®˜æ–¹çš„è„šæœ¬">ä¸‹è½½å®˜æ–¹çš„è„šæœ¬</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O cashout.sh https://gist.githubusercontent.com/ralph-pichler/3b5ccd7a5c5cd0500e6428752b37e975/raw/7ba05095e0836735f4a648aefe52c584e18e065f/cashout.sh</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ å¯æ‰§è¡Œæƒé™">æ·»åŠ å¯æ‰§è¡Œæƒé™</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x cashout.sh</span><br></pre></td></tr></table></figure><h4 id="åˆ—å‡ºæ‰€æœ‰çš„æ²¡æœ‰å…‘æ¢çš„æ”¯ç¥¨ä¿¡æ¯">åˆ—å‡ºæ‰€æœ‰çš„æ²¡æœ‰å…‘æ¢çš„æ”¯ç¥¨ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cashout.sh</span><br></pre></td></tr></table></figure><h4 id="å½“è¶…è¿‡5BZZæ—¶å…‘æ¢æ‰€æœ‰æ”¯ç¥¨ï¼š">å½“è¶…è¿‡5BZZæ—¶å…‘æ¢æ‰€æœ‰æ”¯ç¥¨ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cashout.sh cashout-all 5</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶è·¯å¾„">æ–‡ä»¶è·¯å¾„</h3><h4 id="Bee-clef">Bee-clef<a href="https://docs.ethswarm.org/docs/installation/quick-start#bee-clef">#</a></h4><p>Configuration files are stored in <code>/etc/bee-clef/</code></p><p>Key material and other data is stored in <code>/var/lib/bee-clef/</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll /var/lib/bee-clef/</span><br></pre></td></tr></table></figure><h4 id="Bee">Bee<a href="https://docs.ethswarm.org/docs/installation/quick-start#bee">#</a></h4><p>Configuration files are stored in <code>/etc/bee/</code></p><p>State, chunks and other data is stored in <code>/var/lib/bee/</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/bee/bee.yaml</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å®‰è£…swarm-clef&quot;&gt;å®‰è£…swarm-clef&lt;/h2&gt;
&lt;h3 id=&quot;å®‰è£…&quot;&gt;å®‰è£…&lt;/h3&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="ethereum" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/ethereum/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="ethereum" scheme="https://guozhe001.github.io/tags/ethereum/"/>
    
    <category term="swarm" scheme="https://guozhe001.github.io/tags/swarm/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85go-ethereum%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85go-ethereum%E5%AE%A2%E6%88%B7%E7%AB%AF/</id>
    <published>2021-04-01T10:18:57.780Z</published>
    <updated>2021-04-01T10:18:57.780Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¦‚ä½•åœ¨ubantuä¸Šå¯åŠ¨go-ethereumå®¢æˆ·ç«¯">å¦‚ä½•åœ¨ubantuä¸Šå¯åŠ¨go-ethereumå®¢æˆ·ç«¯</h1><h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2><ul><li>å®‰è£…git:<code>sudo apt install git</code></li><li>å®‰è£…go:<code>sudo apt install golang-go</code></li></ul><h2 id="go-ethereumï¼ˆGethï¼‰å®¢æˆ·ç«¯ä¸‹è½½å’Œç¼–è¯‘">go-ethereumï¼ˆGethï¼‰å®¢æˆ·ç«¯ä¸‹è½½å’Œç¼–è¯‘</h2><h3 id="cloneæºç ï¼š">cloneæºç ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://gitee.com/guozhe001/go-ethereum.git</span><br></pre></td></tr></table></figure><h3 id="ä»æºç æ„å»ºgeth">ä»æºç æ„å»ºgeth</h3><p><em>éœ€è¦ç§‘å­¦ä¸Šç½‘</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd go-ethereum</span><br><span class="line">make geth</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br></pre></td><td class="code"><pre><span class="line">env GO111MODULE=on go run build/ci.go install ./cmd/geth</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; /usr/lib/go-1.13/bin/go build -ldflags -X main.gitCommit=54c0d573d75ab9baa239db3f071d6cb4d1ec6aad -X main.gitDate=20210325 -trimpath -v -o /home/guozhe/code/go-ethereum/build/bin/geth ./cmd/geth</span></span><br><span class="line">go: downloading github.com/holiman/uint256 v1.1.1</span><br><span class="line">go: downloading github.com/peterh/liner v1.1.1-0.20190123174540-a2c9a5303de7</span><br><span class="line">go: downloading golang.org/x/sys v0.0.0-20210124154548-22da62e12c0c</span><br><span class="line">go: downloading github.com/edsrzf/mmap-go v1.0.0</span><br><span class="line">go: downloading github.com/prometheus/tsdb v0.7.1</span><br><span class="line">go: downloading github.com/hashicorp/golang-lru v0.5.5-0.20210104140557-80c98217689d</span><br><span class="line">go: downloading github.com/golang/protobuf v1.4.3</span><br><span class="line">go: downloading github.com/holiman/bloomfilter/v2 v2.0.3</span><br><span class="line">go: downloading github.com/rs/cors v1.7.0</span><br><span class="line">go: downloading github.com/tyler-smith/go-bip39 v1.0.1-0.20181017060643-dbb3b84ba2ef</span><br><span class="line">go: extracting github.com/rs/cors v1.7.0</span><br><span class="line">go: downloading github.com/olekukonko/tablewriter v0.0.2-0.20190409134802-7e037d187b0c</span><br><span class="line">go: extracting github.com/edsrzf/mmap-go v1.0.0</span><br><span class="line">go: extracting github.com/holiman/uint256 v1.1.1</span><br><span class="line">go: downloading github.com/karalabe/usb v0.0.0-20190919080040-51dc0efba356</span><br><span class="line">go: extracting github.com/golang/protobuf v1.4.3</span><br><span class="line">go: downloading github.com/golang/snappy v0.0.3-0.20201103224600-674baa8c7fc3</span><br><span class="line">go: extracting golang.org/x/sys v0.0.0-20210124154548-22da62e12c0c</span><br><span class="line">go: downloading github.com/status-im/keycard-go v0.0.0-20190316090335-8537d3370df4</span><br><span class="line">go: extracting github.com/prometheus/tsdb v0.7.1</span><br><span class="line">go: downloading github.com/deckarep/golang-set v0.0.0-20180603214616-504e848d77ea</span><br><span class="line">go: extracting github.com/peterh/liner v1.1.1-0.20190123174540-a2c9a5303de7</span><br><span class="line">go: downloading github.com/rjeczalik/notify v0.9.1</span><br><span class="line">go: extracting github.com/tyler-smith/go-bip39 v1.0.1-0.20181017060643-dbb3b84ba2ef</span><br><span class="line">go: downloading golang.org/x/text v0.3.3</span><br><span class="line">go: extracting github.com/hashicorp/golang-lru v0.5.5-0.20210104140557-80c98217689d</span><br><span class="line">go: downloading github.com/naoina/go-stringutil v0.1.0</span><br><span class="line">go: downloading google.golang.org/protobuf v1.23.0</span><br><span class="line">go: extracting github.com/holiman/bloomfilter/v2 v2.0.3</span><br><span class="line">go: downloading github.com/dop251/goja v0.0.0-20200721192441-a695b0cdd498</span><br><span class="line">go: extracting github.com/olekukonko/tablewriter v0.0.2-0.20190409134802-7e037d187b0c</span><br><span class="line">go: downloading github.com/syndtr/goleveldb v1.0.1-0.20210305035536-64b5b1c73954</span><br><span class="line">go: extracting github.com/karalabe/usb v0.0.0-20190919080040-51dc0efba356</span><br><span class="line">go: downloading github.com/pkg/errors v0.8.1</span><br><span class="line">go: extracting github.com/golang/snappy v0.0.3-0.20201103224600-674baa8c7fc3</span><br><span class="line">go: downloading github.com/mattn/go-isatty v0.0.5-0.20180830101745-3fb116b82035</span><br><span class="line">go: extracting github.com/status-im/keycard-go v0.0.0-20190316090335-8537d3370df4</span><br><span class="line">go: downloading github.com/shirou/gopsutil v2.20.5+incompatible</span><br><span class="line">go: extracting github.com/deckarep/golang-set v0.0.0-20180603214616-504e848d77ea</span><br><span class="line">go: extracting github.com/rjeczalik/notify v0.9.1</span><br><span class="line">go: downloading github.com/davecgh/go-spew v1.1.1</span><br><span class="line">go: extracting github.com/naoina/go-stringutil v0.1.0</span><br><span class="line">go: downloading github.com/huin/goupnp v1.0.1-0.20210310174557-0ca763054c88</span><br><span class="line">go: extracting google.golang.org/protobuf v1.23.0</span><br><span class="line">go: downloading github.com/fatih/color v1.7.0</span><br><span class="line">go: extracting github.com/syndtr/goleveldb v1.0.1-0.20210305035536-64b5b1c73954</span><br><span class="line">go: downloading github.com/graph-gophers/graphql-go v0.0.0-20201113091052-beb923fada29</span><br><span class="line">go: extracting github.com/dop251/goja v0.0.0-20200721192441-a695b0cdd498</span><br><span class="line">go: downloading github.com/jackpal/go-nat-pmp v1.0.2-0.20160603034137-1fa385a6f458</span><br><span class="line">go: extracting github.com/pkg/errors v0.8.1</span><br><span class="line">go: extracting github.com/davecgh/go-spew v1.1.1</span><br><span class="line">go: downloading github.com/jedisct1/go-minisign v0.0.0-20190909160543-45766022959e</span><br><span class="line">go: extracting github.com/mattn/go-isatty v0.0.5-0.20180830101745-3fb116b82035</span><br><span class="line">go: extracting github.com/huin/goupnp v1.0.1-0.20210310174557-0ca763054c88</span><br><span class="line">go: downloading github.com/google/uuid v1.1.5</span><br><span class="line">go: downloading github.com/go-sourcemap/sourcemap v2.1.2+incompatible</span><br><span class="line">go: extracting github.com/shirou/gopsutil v2.20.5+incompatible</span><br><span class="line">go: downloading github.com/go-stack/stack v1.8.0</span><br><span class="line">go: extracting github.com/fatih/color v1.7.0</span><br><span class="line">go: downloading golang.org/x/net v0.0.0-20200822124328-c89045814202</span><br><span class="line">go: extracting github.com/graph-gophers/graphql-go v0.0.0-20201113091052-beb923fada29</span><br><span class="line">go: extracting github.com/jackpal/go-nat-pmp v1.0.2-0.20160603034137-1fa385a6f458</span><br><span class="line">go: downloading gopkg.in/olebedev/go-duktape.v3 v3.0.0-20200619000410-60c24ae608a6</span><br><span class="line">go: extracting github.com/jedisct1/go-minisign v0.0.0-20190909160543-45766022959e</span><br><span class="line">go: downloading github.com/mattn/go-runewidth v0.0.4</span><br><span class="line">go: extracting github.com/go-sourcemap/sourcemap v2.1.2+incompatible</span><br><span class="line">go: downloading github.com/opentracing/opentracing-go v1.1.0</span><br><span class="line">go: extracting golang.org/x/text v0.3.3</span><br><span class="line">go: extracting github.com/google/uuid v1.1.5</span><br><span class="line">go: downloading github.com/gorilla/websocket v1.4.2</span><br><span class="line">go: downloading github.com/VictoriaMetrics/fastcache v1.5.7</span><br><span class="line">go: downloading github.com/dlclark/regexp2 v1.2.0</span><br><span class="line">go: downloading github.com/influxdata/influxdb v1.8.3</span><br><span class="line">go: extracting github.com/go-stack/stack v1.8.0</span><br><span class="line">go: extracting golang.org/x/net v0.0.0-20200822124328-c89045814202</span><br><span class="line">go: downloading golang.org/x/sync v0.0.0-20200317015054-43a5402ce75a</span><br><span class="line">go: extracting gopkg.in/olebedev/go-duktape.v3 v3.0.0-20200619000410-60c24ae608a6</span><br><span class="line">go: extracting github.com/VictoriaMetrics/fastcache v1.5.7</span><br><span class="line">go: downloading github.com/cespare/xxhash v1.1.0</span><br><span class="line">go: extracting github.com/opentracing/opentracing-go v1.1.0</span><br><span class="line">go: extracting github.com/gorilla/websocket v1.4.2</span><br><span class="line">go: extracting github.com/dlclark/regexp2 v1.2.0</span><br><span class="line">go: extracting github.com/mattn/go-runewidth v0.0.4</span><br><span class="line">go: extracting golang.org/x/sync v0.0.0-20200317015054-43a5402ce75a</span><br><span class="line">go: extracting github.com/cespare/xxhash v1.1.0</span><br><span class="line">go: downloading github.com/cespare/xxhash/v2 v2.1.1</span><br><span class="line">go: extracting github.com/cespare/xxhash/v2 v2.1.1</span><br><span class="line">go: extracting github.com/influxdata/influxdb v1.8.3</span><br><span class="line">go: finding gopkg.in/urfave/cli.v1 v1.20.0</span><br><span class="line">go: finding github.com/peterh/liner v1.1.1-0.20190123174540-a2c9a5303de7</span><br><span class="line">go: finding github.com/dop251/goja v0.0.0-20200721192441-a695b0cdd498</span><br><span class="line">go: finding github.com/VictoriaMetrics/fastcache v1.5.7</span><br><span class="line">go: finding github.com/davecgh/go-spew v1.1.1</span><br><span class="line">go: finding github.com/deckarep/golang-set v0.0.0-20180603214616-504e848d77ea</span><br><span class="line">go: finding github.com/jedisct1/go-minisign v0.0.0-20190909160543-45766022959e</span><br><span class="line">go: finding github.com/go-stack/stack v1.8.0</span><br><span class="line">go: finding github.com/edsrzf/mmap-go v1.0.0</span><br><span class="line">go: finding github.com/fjl/memsize v0.0.0-20190710130421-bcb5799ab5e5</span><br><span class="line">go: finding github.com/shirou/gopsutil v2.20.5+incompatible</span><br><span class="line">go: finding github.com/naoina/toml v0.1.2-0.20170918210437-9fafd6967416</span><br><span class="line">go: finding github.com/mattn/go-colorable v0.1.0</span><br><span class="line">go: finding github.com/mattn/go-isatty v0.0.5-0.20180830101745-3fb116b82035</span><br><span class="line">go: finding github.com/holiman/bloomfilter/v2 v2.0.3</span><br><span class="line">go: finding github.com/fatih/color v1.7.0</span><br><span class="line">go: finding github.com/golang/protobuf v1.4.3</span><br><span class="line">go: finding github.com/golang/snappy v0.0.3-0.20201103224600-674baa8c7fc3</span><br><span class="line">go: finding github.com/cespare/xxhash/v2 v2.1.1</span><br><span class="line">go: finding github.com/syndtr/goleveldb v1.0.1-0.20210305035536-64b5b1c73954</span><br><span class="line">go: finding github.com/olekukonko/tablewriter v0.0.2-0.20190409134802-7e037d187b0c</span><br><span class="line">go: finding github.com/hashicorp/golang-lru v0.5.5-0.20210104140557-80c98217689d</span><br><span class="line">go: finding github.com/naoina/go-stringutil v0.1.0</span><br><span class="line">go: finding github.com/dlclark/regexp2 v1.2.0</span><br><span class="line">go: finding github.com/prometheus/tsdb v0.7.1</span><br><span class="line">go: finding golang.org/x/sys v0.0.0-20210124154548-22da62e12c0c</span><br><span class="line">go: finding github.com/google/uuid v1.1.5</span><br><span class="line">go: finding github.com/karalabe/usb v0.0.0-20190919080040-51dc0efba356</span><br><span class="line">go: finding github.com/rjeczalik/notify v0.9.1</span><br><span class="line">go: finding github.com/mattn/go-runewidth v0.0.4</span><br><span class="line">go: finding github.com/go-sourcemap/sourcemap v2.1.2+incompatible</span><br><span class="line">go: finding github.com/pkg/errors v0.8.1</span><br><span class="line">go: finding golang.org/x/text v0.3.3</span><br><span class="line">go: finding github.com/holiman/uint256 v1.1.1</span><br><span class="line">go: finding github.com/gballet/go-libpcsclite v0.0.0-20190607065134-2772fd86a8ff</span><br><span class="line">go: finding github.com/gorilla/websocket v1.4.2</span><br><span class="line">go: finding github.com/status-im/keycard-go v0.0.0-20190316090335-8537d3370df4</span><br><span class="line">go: finding github.com/rs/cors v1.7.0</span><br><span class="line">go: finding github.com/tyler-smith/go-bip39 v1.0.1-0.20181017060643-dbb3b84ba2ef</span><br><span class="line">go: finding google.golang.org/protobuf v1.23.0</span><br><span class="line">go: finding github.com/huin/goupnp v1.0.1-0.20210310174557-0ca763054c88</span><br><span class="line">go: finding github.com/jackpal/go-nat-pmp v1.0.2-0.20160603034137-1fa385a6f458</span><br><span class="line">go: finding github.com/influxdata/influxdb v1.8.3</span><br><span class="line">go: finding github.com/graph-gophers/graphql-go v0.0.0-20201113091052-beb923fada29</span><br><span class="line">go: finding golang.org/x/time v0.0.0-20190308202827-9d24e82272b4</span><br><span class="line">go: finding gopkg.in/olebedev/go-duktape.v3 v3.0.0-20200619000410-60c24ae608a6</span><br><span class="line">go: finding golang.org/x/net v0.0.0-20200822124328-c89045814202</span><br><span class="line">go: finding golang.org/x/sync v0.0.0-20200317015054-43a5402ce75a</span><br><span class="line">go: finding github.com/opentracing/opentracing-go v1.1.0</span><br><span class="line">unicode</span><br><span class="line">unicode/utf8</span><br><span class="line">vendor/golang.org/x/crypto/cryptobyte/asn1</span><br><span class="line">crypto/internal/subtle</span><br><span class="line">math/bits</span><br><span class="line">golang.org/x/sys/internal/unsafeheader</span><br><span class="line">container/list</span><br><span class="line">internal/nettrace</span><br><span class="line">vendor/golang.org/x/crypto/internal/subtle</span><br><span class="line">encoding</span><br><span class="line">golang.org/x/net/html/atom</span><br><span class="line">crypto/subtle</span><br><span class="line">runtime/internal/sys</span><br><span class="line">golang.org/x/text/encoding/internal/identifier</span><br><span class="line">golang.org/x/text/internal/utf8internal</span><br><span class="line">runtime/cgo</span><br><span class="line">google.golang.org/protobuf/internal/flags</span><br><span class="line">unicode/utf16</span><br><span class="line">runtime/internal/atomic</span><br><span class="line">container/ring</span><br><span class="line">vendor/golang.org/x/crypto/curve25519</span><br><span class="line">internal/race</span><br><span class="line">internal/cpu</span><br><span class="line">google.golang.org/protobuf/internal/fieldnum</span><br><span class="line">sync/atomic</span><br><span class="line">google.golang.org/protobuf/internal/genname</span><br><span class="line">github.com/ethereum/go-ethereum/internal/web3ext</span><br><span class="line">runtime/internal/math</span><br><span class="line">internal/testlog</span><br><span class="line">google.golang.org/protobuf/internal/set</span><br><span class="line">internal/bytealg</span><br><span class="line">math</span><br><span class="line">runtime</span><br><span class="line">internal/reflectlite</span><br><span class="line">sync</span><br><span class="line">google.golang.org/protobuf/internal/pragma</span><br><span class="line">internal/singleflight</span><br><span class="line">math/rand</span><br><span class="line">errors</span><br><span class="line">sort</span><br><span class="line">internal/oserror</span><br><span class="line">io</span><br><span class="line">github.com/ethereum/go-ethereum/common/bitutil</span><br><span class="line">github.com/hashicorp/golang-lru/simplelru</span><br><span class="line">vendor/golang.org/x/net/dns/dnsmessage</span><br><span class="line">strconv</span><br><span class="line">syscall</span><br><span class="line">container/heap</span><br><span class="line">golang.org/x/text/internal/tag</span><br><span class="line">bytes</span><br><span class="line">hash</span><br><span class="line">github.com/ethereum/go-ethereum/ethdb</span><br><span class="line">crypto/internal/randutil</span><br><span class="line">strings</span><br><span class="line">text/tabwriter</span><br><span class="line">github.com/go-sourcemap/sourcemap/internal/base64vlq</span><br><span class="line">crypto/hmac</span><br><span class="line">hash/fnv</span><br><span class="line">hash/crc32</span><br><span class="line">golang.org/x/crypto/pbkdf2</span><br><span class="line">vendor/golang.org/x/crypto/hkdf</span><br><span class="line">golang.org/x/crypto/hkdf</span><br><span class="line">crypto/rc4</span><br><span class="line">github.com/dop251/goja/token</span><br><span class="line">crypto</span><br><span class="line">reflect</span><br><span class="line">golang.org/x/crypto/ripemd160</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/comparer</span><br><span class="line">golang.org/x/text/transform</span><br><span class="line">vendor/golang.org/x/text/transform</span><br><span class="line">bufio</span><br><span class="line">path</span><br><span class="line">github.com/influxdata/influxdb/pkg/escape</span><br><span class="line">encoding/base32</span><br><span class="line">html</span><br><span class="line">regexp/syntax</span><br><span class="line">golang.org/x/text/runes</span><br><span class="line">golang.org/x/text/encoding</span><br><span class="line">golang.org/x/text/encoding/internal</span><br><span class="line">golang.org/x/text/encoding/unicode</span><br><span class="line">golang.org/x/text/encoding/charmap</span><br><span class="line">golang.org/x/text/encoding/japanese</span><br><span class="line">golang.org/x/text/encoding/traditionalchinese</span><br><span class="line">golang.org/x/text/encoding/korean</span><br><span class="line">golang.org/x/text/encoding/simplifiedchinese</span><br><span class="line">github.com/ethereum/go-ethereum/common/fdlimit</span><br><span class="line">internal/syscall/unix</span><br><span class="line">github.com/mattn/go-isatty</span><br><span class="line">time</span><br><span class="line">regexp</span><br><span class="line">context</span><br><span class="line">github.com/naoina/toml/ast</span><br><span class="line">github.com/ethereum/go-ethereum/common/mclock</span><br><span class="line">internal/poll</span><br><span class="line">github.com/ethereum/go-ethereum/common/prque</span><br><span class="line">golang.org/x/sync/errgroup</span><br><span class="line">os</span><br><span class="line">internal/fmtsort</span><br><span class="line">encoding/binary</span><br><span class="line">crypto/md5</span><br><span class="line">github.com/cespare/xxhash/v2</span><br><span class="line">encoding/base64</span><br><span class="line">crypto/sha1</span><br><span class="line">crypto/sha256</span><br><span class="line">golang.org/x/crypto/sha3</span><br><span class="line">crypto/cipher</span><br><span class="line">vendor/golang.org/x/crypto/poly1305</span><br><span class="line">crypto/sha512</span><br><span class="line">crypto/ed25519/internal/edwards25519</span><br><span class="line">github.com/golang/snappy</span><br><span class="line">vendor/golang.org/x/sys/cpu</span><br><span class="line">golang.org/x/sys/unix</span><br><span class="line">fmt</span><br><span class="line">runtime/debug</span><br><span class="line">path/filepath</span><br><span class="line">github.com/mattn/go-runewidth</span><br><span class="line">os/signal</span><br><span class="line">google.golang.org/protobuf/internal/detrand</span><br><span class="line">github.com/mattn/go-colorable</span><br><span class="line">net</span><br><span class="line">encoding/pem</span><br><span class="line">crypto/aes</span><br><span class="line">crypto/des</span><br><span class="line">vendor/golang.org/x/crypto/internal/chacha20</span><br><span class="line">golang.org/x/crypto/scrypt</span><br><span class="line">io/ioutil</span><br><span class="line">os/exec</span><br><span class="line">vendor/golang.org/x/crypto/chacha20poly1305</span><br><span class="line">golang.org/x/sys/cpu</span><br><span class="line">database/sql/driver</span><br><span class="line">encoding/json</span><br><span class="line">encoding/hex</span><br><span class="line">github.com/ethereum/go-ethereum/event</span><br><span class="line">github.com/go-stack/stack</span><br><span class="line">log</span><br><span class="line">net/url</span><br><span class="line">github.com/VictoriaMetrics/fastcache</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/util</span><br><span class="line">math/big</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/storage</span><br><span class="line">encoding/csv</span><br><span class="line">github.com/pkg/errors</span><br><span class="line">compress/flate</span><br><span class="line">github.com/hashicorp/golang-lru</span><br><span class="line">vendor/golang.org/x/net/http2/hpack</span><br><span class="line">encoding/gob</span><br><span class="line">mime</span><br><span class="line">mime/quotedprintable</span><br><span class="line">flag</span><br><span class="line">vendor/golang.org/x/text/unicode/norm</span><br><span class="line">net/http/internal</span><br><span class="line">github.com/peterh/liner</span><br><span class="line">vendor/golang.org/x/text/unicode/bidi</span><br><span class="line">github.com/olekukonko/tablewriter</span><br><span class="line">github.com/ethereum/go-ethereum/crypto/blake2b</span><br><span class="line">encoding/xml</span><br><span class="line">golang.org/x/net/html</span><br><span class="line">golang.org/x/text/internal/language</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/cache</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/filter</span><br><span class="line">github.com/status-im/keycard-go/derivationpath</span><br><span class="line">golang.org/x/text/unicode/norm</span><br><span class="line">google.golang.org/protobuf/internal/errors</span><br><span class="line">go/token</span><br><span class="line">google.golang.org/protobuf/internal/version</span><br><span class="line">github.com/karalabe/usb</span><br><span class="line">google.golang.org/protobuf/encoding/protowire</span><br><span class="line">github.com/davecgh/go-spew/spew</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/errors</span><br><span class="line">github.com/shirou/gopsutil/internal/common</span><br><span class="line">google.golang.org/protobuf/reflect/protoreflect</span><br><span class="line">github.com/tyler-smith/go-bip39/wordlists</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/iterator</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/journal</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/opt</span><br><span class="line">compress/gzip</span><br><span class="line">github.com/fjl/memsize</span><br><span class="line">vendor/golang.org/x/text/secure/bidirule</span><br><span class="line">text/template/parse</span><br><span class="line">runtime/trace</span><br><span class="line">os/user</span><br><span class="line">github.com/ethereum/go-ethereum/console/prompt</span><br><span class="line">golang.org/x/time/rate</span><br><span class="line">runtime/pprof</span><br><span class="line">github.com/ethereum/go-ethereum/eth/tracers/internal/tracers</span><br><span class="line">golang.org/x/text/internal/language/compact</span><br><span class="line">go/scanner</span><br><span class="line">github.com/graph-gophers/graphql-go/errors</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/memdb</span><br><span class="line">github.com/syndtr/goleveldb/leveldb/table</span><br><span class="line">testing</span><br><span class="line">text/scanner</span><br><span class="line">github.com/graph-gophers/graphql-go/log</span><br><span class="line">github.com/opentracing/opentracing-go/log</span><br><span class="line">github.com/rjeczalik/notify</span><br><span class="line">github.com/prometheus/tsdb/fileutil</span><br><span class="line">github.com/edsrzf/mmap-go</span><br><span class="line">go/ast</span><br><span class="line">google.golang.org/protobuf/reflect/protoregistry</span><br><span class="line">golang.org/x/text/language</span><br><span class="line">google.golang.org/protobuf/internal/strs</span><br><span class="line">google.golang.org/protobuf/internal/mapsort</span><br><span class="line">google.golang.org/protobuf/internal/fieldsort</span><br><span class="line">github.com/huin/goupnp/scpd</span><br><span class="line">vendor/golang.org/x/net/idna</span><br><span class="line">google.golang.org/protobuf/runtime/protoiface</span><br><span class="line">google.golang.org/protobuf/internal/descfmt</span><br><span class="line">github.com/deckarep/golang-set</span><br><span class="line">github.com/shirou/gopsutil/cpu</span><br><span class="line">google.golang.org/protobuf/internal/encoding/text</span><br><span class="line">google.golang.org/protobuf/internal/descopts</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/common</span><br><span class="line">github.com/influxdata/influxdb/models</span><br><span class="line">github.com/dlclark/regexp2/syntax</span><br><span class="line">github.com/syndtr/goleveldb/leveldb</span><br><span class="line">github.com/dop251/goja/file</span><br><span class="line">github.com/go-sourcemap/sourcemap</span><br><span class="line">github.com/fatih/color</span><br><span class="line">github.com/ethereum/go-ethereum/internal/jsre/deps</span><br><span class="line">google.golang.org/protobuf/internal/encoding/messageset</span><br><span class="line">github.com/naoina/go-stringutil</span><br><span class="line">github.com/shirou/gopsutil/mem</span><br><span class="line">text/template</span><br><span class="line">github.com/ethereum/go-ethereum/common/hexutil</span><br><span class="line">crypto/elliptic</span><br><span class="line">encoding/asn1</span><br><span class="line">crypto/rand</span><br><span class="line">github.com/ethereum/go-ethereum/common/math</span><br><span class="line">github.com/ethereum/go-ethereum/rlp</span><br><span class="line">crypto/dsa</span><br><span class="line">github.com/holiman/uint256</span><br><span class="line">google.golang.org/protobuf/proto</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/schema</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/query</span><br><span class="line">golang.org/x/text/encoding/htmlindex</span><br><span class="line">github.com/dop251/goja/ast</span><br><span class="line">golang.org/x/text/internal</span><br><span class="line">go/parser</span><br><span class="line">go/printer</span><br><span class="line">google.golang.org/protobuf/internal/encoding/defval</span><br><span class="line">golang.org/x/text/internal/colltab</span><br><span class="line">github.com/holiman/bloomfilter/v2</span><br><span class="line">crypto/ed25519</span><br><span class="line">crypto/rsa</span><br><span class="line">github.com/ethereum/go-ethereum/crypto/bn256/cloudflare</span><br><span class="line">github.com/tyler-smith/go-bip39</span><br><span class="line">golang.org/x/net/html/charset</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/exec/packer</span><br><span class="line">github.com/graph-gophers/graphql-go/introspection</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/validation</span><br><span class="line">github.com/dop251/goja/parser</span><br><span class="line">golang.org/x/text/cases</span><br><span class="line">golang.org/x/crypto/ed25519</span><br><span class="line">crypto/x509/pkix</span><br><span class="line">github.com/ethereum/go-ethereum/common</span><br><span class="line">vendor/golang.org/x/crypto/cryptobyte</span><br><span class="line">github.com/naoina/toml</span><br><span class="line">gopkg.in/urfave/cli.v1</span><br><span class="line">html/template</span><br><span class="line">crypto/ecdsa</span><br><span class="line">github.com/ethereum/go-ethereum/crypto/secp256k1</span><br><span class="line">github.com/jedisct1/go-minisign</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/exec/resolvable</span><br><span class="line">github.com/dlclark/regexp2</span><br><span class="line">golang.org/x/text/collate</span><br><span class="line">go/format</span><br><span class="line">github.com/ethereum/go-ethereum/les/vflux</span><br><span class="line">google.golang.org/protobuf/encoding/prototext</span><br><span class="line">google.golang.org/protobuf/internal/filedesc</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/exec/selected</span><br><span class="line">github.com/ethereum/go-ethereum/ethdb/memorydb</span><br><span class="line">github.com/ethereum/go-ethereum/crypto/bls12381</span><br><span class="line">github.com/ethereum/go-ethereum/crypto/bn256</span><br><span class="line">google.golang.org/protobuf/internal/encoding/tag</span><br><span class="line">google.golang.org/protobuf/internal/impl</span><br><span class="line">log/syslog</span><br><span class="line">vendor/golang.org/x/net/http/httpproxy</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/enr</span><br><span class="line">github.com/jackpal/go-nat-pmp</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/netutil</span><br><span class="line">net/textproto</span><br><span class="line">github.com/gballet/go-libpcsclite</span><br><span class="line">github.com/google/uuid</span><br><span class="line">crypto/x509</span><br><span class="line">gopkg.in/olebedev/go-duktape.v3</span><br><span class="line">github.com/ethereum/go-ethereum/log</span><br><span class="line">vendor/golang.org/x/net/http/httpguts</span><br><span class="line">mime/multipart</span><br><span class="line">github.com/ethereum/go-ethereum/signer/storage</span><br><span class="line">github.com/ethereum/go-ethereum/les/flowcontrol</span><br><span class="line">github.com/ethereum/go-ethereum/metrics</span><br><span class="line">crypto/tls</span><br><span class="line">github.com/ethereum/go-ethereum/ethdb/leveldb</span><br><span class="line">google.golang.org/protobuf/internal/filetype</span><br><span class="line">github.com/dop251/goja</span><br><span class="line">google.golang.org/protobuf/runtime/protoimpl</span><br><span class="line">github.com/golang/protobuf/proto</span><br><span class="line">google.golang.org/protobuf/types/descriptorpb</span><br><span class="line">net/http/httptrace</span><br><span class="line">net/http</span><br><span class="line">github.com/golang/protobuf/protoc-gen-go/descriptor</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/usbwallet/trezor</span><br><span class="line">github.com/fjl/memsize/memsizeui</span><br><span class="line">github.com/ethereum/go-ethereum/metrics/prometheus</span><br><span class="line">github.com/rs/cors</span><br><span class="line">expvar</span><br><span class="line">github.com/influxdata/influxdb/client</span><br><span class="line">net/http/pprof</span><br><span class="line">github.com/huin/goupnp/soap</span><br><span class="line">github.com/huin/goupnp/httpu</span><br><span class="line">github.com/opentracing/opentracing-go</span><br><span class="line">github.com/gorilla/websocket</span><br><span class="line">github.com/opentracing/opentracing-go/ext</span><br><span class="line">github.com/ethereum/go-ethereum/metrics/exp</span><br><span class="line">github.com/graph-gophers/graphql-go/trace</span><br><span class="line">github.com/huin/goupnp/ssdp</span><br><span class="line">github.com/ethereum/go-ethereum/metrics/influxdb</span><br><span class="line">github.com/graph-gophers/graphql-go/internal/exec</span><br><span class="line">github.com/ethereum/go-ethereum/internal/debug</span><br><span class="line">github.com/huin/goupnp</span><br><span class="line">github.com/graph-gophers/graphql-go</span><br><span class="line">github.com/ethereum/go-ethereum/rpc</span><br><span class="line">github.com/huin/goupnp/dcps/internetgateway1</span><br><span class="line">github.com/huin/goupnp/dcps/internetgateway2</span><br><span class="line">github.com/ethereum/go-ethereum/internal/jsre</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/nat</span><br><span class="line">github.com/ethereum/go-ethereum/crypto</span><br><span class="line">github.com/ethereum/go-ethereum/crypto/ecies</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/enode</span><br><span class="line">github.com/ethereum/go-ethereum/params</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/abi</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/rlpx</span><br><span class="line">github.com/ethereum/go-ethereum/internal/flags</span><br><span class="line">github.com/ethereum/go-ethereum/core/types</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/discover/v4wire</span><br><span class="line">github.com/ethereum/go-ethereum/les/utils</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/dnsdisc</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/nodestate</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/discover/v5wire</span><br><span class="line">github.com/ethereum/go-ethereum/les/vflux/client</span><br><span class="line">github.com/ethereum/go-ethereum/les/vflux/server</span><br><span class="line">github.com/ethereum/go-ethereum</span><br><span class="line">github.com/ethereum/go-ethereum/eth/gasprice</span><br><span class="line">github.com/ethereum/go-ethereum/core/forkid</span><br><span class="line">github.com/ethereum/go-ethereum/core/bloombits</span><br><span class="line">github.com/ethereum/go-ethereum/core/rawdb</span><br><span class="line">github.com/ethereum/go-ethereum/core/vm</span><br><span class="line">github.com/ethereum/go-ethereum/p2p/discover</span><br><span class="line">github.com/ethereum/go-ethereum/accounts</span><br><span class="line">github.com/ethereum/go-ethereum/ethclient</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/scwallet</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/keystore</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/usbwallet</span><br><span class="line">github.com/ethereum/go-ethereum/p2p</span><br><span class="line">github.com/ethereum/go-ethereum/console</span><br><span class="line">github.com/ethereum/go-ethereum/trie</span><br><span class="line">github.com/ethereum/go-ethereum/core/state/snapshot</span><br><span class="line">github.com/ethereum/go-ethereum/core/state</span><br><span class="line">github.com/ethereum/go-ethereum/consensus</span><br><span class="line">github.com/ethereum/go-ethereum/consensus/misc</span><br><span class="line">github.com/ethereum/go-ethereum/core/state/pruner</span><br><span class="line">github.com/ethereum/go-ethereum/consensus/clique</span><br><span class="line">github.com/ethereum/go-ethereum/consensus/ethash</span><br><span class="line">github.com/ethereum/go-ethereum/core</span><br><span class="line">github.com/ethereum/go-ethereum/eth/filters</span><br><span class="line">github.com/ethereum/go-ethereum/eth/protocols/eth</span><br><span class="line">github.com/ethereum/go-ethereum/eth/fetcher</span><br><span class="line">github.com/ethereum/go-ethereum/light</span><br><span class="line">github.com/ethereum/go-ethereum/eth/protocols/snap</span><br><span class="line">github.com/ethereum/go-ethereum/eth/downloader</span><br><span class="line">github.com/ethereum/go-ethereum/miner</span><br><span class="line">github.com/ethereum/go-ethereum/internal/ethapi</span><br><span class="line">github.com/ethereum/go-ethereum/signer/core</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/external</span><br><span class="line">github.com/ethereum/go-ethereum/node</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/abi/bind</span><br><span class="line">github.com/ethereum/go-ethereum/contracts/checkpointoracle/contract</span><br><span class="line">github.com/ethereum/go-ethereum/accounts/abi/bind/backends</span><br><span class="line">github.com/ethereum/go-ethereum/contracts/checkpointoracle</span><br><span class="line">github.com/ethereum/go-ethereum/eth/ethconfig</span><br><span class="line">github.com/ethereum/go-ethereum/graphql</span><br><span class="line">github.com/ethereum/go-ethereum/les/checkpointoracle</span><br><span class="line">github.com/ethereum/go-ethereum/eth</span><br><span class="line">github.com/ethereum/go-ethereum/les</span><br><span class="line">github.com/ethereum/go-ethereum/ethstats</span><br><span class="line">github.com/ethereum/go-ethereum/eth/tracers</span><br><span class="line">github.com/ethereum/go-ethereum/cmd/utils</span><br><span class="line">github.com/ethereum/go-ethereum/cmd/geth</span><br><span class="line">Done building.</span><br><span class="line">Run &quot;./build/bin/geth&quot; to launch geth.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡æŸ¥çœ‹gethç‰ˆæœ¬æ¥ç¡®è®¤gethæ˜¯å¦å·²ç»å®‰è£…æ­£ç¡®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./build/bin/geth version</span></span><br><span class="line">Geth</span><br><span class="line">Version: 1.10.2-unstable</span><br><span class="line">Git Commit: 54c0d573d75ab9baa239db3f071d6cb4d1ec6aad</span><br><span class="line">Git Commit Date: 20210325</span><br><span class="line">Architecture: amd64</span><br><span class="line">Go Version: go1.13.8</span><br><span class="line">Operating System: linux</span><br><span class="line">GOPATH=</span><br><span class="line">GOROOT=go</span><br></pre></td></tr></table></figure><h2 id="é¦–æ¬¡åŒæ­¥ä»¥å¤ªåŠåŒºå—æ•°æ®">é¦–æ¬¡åŒæ­¥ä»¥å¤ªåŠåŒºå—æ•°æ®</h2><p>æŸ¥çœ‹go-ethereumçš„readmeæ–‡æ¡£ï¼Œé»˜è®¤æ˜¯fastæ–¹å¼åŒæ­¥æ•°æ®ï¼Œç›´æ¥è¿è¡Œ<code>geth console</code>å³å¯ï¼Œå› ä¸ºæ•°æ®æ¯”è¾ƒå¤§æˆ‘å•ç‹¬æŒ‚è½½äº†ä¸€ä¸ªç£ç›˜ï¼Œæ‰€ä»¥åˆ¶å®šäº†æ•°æ®å­˜æ”¾çš„ç›®å½•<code>--datadic /data/ethereum/node</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./build/bin/geth console --datadir /data/ethereum/node/</span></span><br><span class="line">INFO [03-27|16:25:39.409] Starting Geth on Ethereum mainnet... </span><br><span class="line">INFO [03-27|16:25:39.409] Bumping default cache on mainnet         provided=1024 updated=4096</span><br><span class="line">INFO [03-27|16:25:39.411] Maximum peer count                       ETH=50 LES=0 total=50</span><br><span class="line">INFO [03-27|16:25:39.411] Smartcard socket not found, disabling    err=&quot;stat /run/pcscd/pcscd.comm: no such file or directory&quot;</span><br><span class="line">INFO [03-27|16:25:39.412] Set global gas cap                       cap=25000000</span><br><span class="line">INFO [03-27|16:25:39.412] Allocated trie memory caches             clean=614.00MiB dirty=1024.00MiB</span><br><span class="line">INFO [03-27|16:25:39.412] Allocated cache and file handles         database=/data/ethereum/node/geth/chaindata cache=2.00GiB handles=524288</span><br><span class="line">INFO [03-27|16:25:39.504] Opened ancient database                  database=/data/ethereum/node/geth/chaindata/ancient readonly=false</span><br><span class="line">INFO [03-27|16:25:39.504] Writing default main-net genesis block </span><br><span class="line">INFO [03-27|16:25:39.645] Persisted trie from memory database      nodes=12356 size=1.78MiB time=48.710818ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B</span><br><span class="line">INFO [03-27|16:25:39.645] Initialised chain configuration          config=&quot;&#123;ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, Berlin: 12244000, YOLO v3: &lt;nil&gt;, Engine: ethash&#125;&quot;</span><br><span class="line">INFO [03-27|16:25:39.645] Disk storage enabled for ethash caches   dir=/data/ethereum/node/geth/ethash count=3</span><br><span class="line">INFO [03-27|16:25:39.645] Disk storage enabled for ethash DAGs     dir=/home/guozhe/.ethash            count=2</span><br><span class="line">INFO [03-27|16:25:39.646] Initialising Ethereum protocol           network=1 dbversion=&lt;nil&gt;</span><br><span class="line">WARN [03-27|16:25:39.646] Upgrade blockchain database version      from=&lt;nil&gt; to=8</span><br><span class="line">INFO [03-27|16:25:39.646] Loaded most recent local header          number=0 hash=&quot;d4e567â€¦cb8fa3&quot; td=17179869184 age=51y11mo3w</span><br><span class="line">INFO [03-27|16:25:39.646] Loaded most recent local full block      number=0 hash=&quot;d4e567â€¦cb8fa3&quot; td=17179869184 age=51y11mo3w</span><br><span class="line">INFO [03-27|16:25:39.646] Loaded most recent local fast block      number=0 hash=&quot;d4e567â€¦cb8fa3&quot; td=17179869184 age=51y11mo3w</span><br><span class="line">WARN [03-27|16:25:39.646] Failed to load snapshot, regenerating    err=&quot;missing or corrupted snapshot&quot;</span><br><span class="line">INFO [03-27|16:25:39.646] Rebuilding state snapshot </span><br><span class="line">INFO [03-27|16:25:39.646] Deleted state snapshot leftovers         kind=accounts wiped=0 elapsed=&quot;47.755Âµs&quot;</span><br><span class="line">INFO [03-27|16:25:39.647] Deleted state snapshot leftovers         kind=storage  wiped=0 elapsed=&quot;17.809Âµs&quot;</span><br><span class="line">INFO [03-27|16:25:39.647] Compacting snapshot account area  </span><br><span class="line">INFO [03-27|16:25:39.647] Regenerated local transaction journal    transactions=0 accounts=0</span><br><span class="line">INFO [03-27|16:25:39.650] Wiper running, state snapshotting paused accounts=0 slots=0 storage=0.00B elapsed=&quot;361.935Âµs&quot;</span><br><span class="line">INFO [03-27|16:25:39.676] Allocated fast sync bloom                size=2.00GiB</span><br><span class="line">WARN [03-27|16:25:39.677] Error reading unclean shutdown markers   error=&quot;leveldb: not found&quot;</span><br><span class="line">INFO [03-27|16:25:39.677] Starting peer-to-peer node               instance=Geth/v1.10.2-unstable-54c0d573-20210325/linux-amd64/go1.13.8</span><br><span class="line">INFO [03-27|16:25:39.741] Initialized state bloom                  items=12356 errorrate=0.000 elapsed=64.036ms</span><br><span class="line">INFO [03-27|16:25:39.817] New local node record                    seq=1 id=0d81eb9b177ba542 ip=127.0.0.1 udp=30303 tcp=30303</span><br><span class="line">INFO [03-27|16:25:39.817] Started P2P networking                   self=enode://dbb9a7d3a1ca59a200c1fa920b2cc467c342182b0f818c491028da1c564391f2cb91f0ce88bb7826264e609aa407dd8544224c0dd3d1a3f6bc449fd063dbdde7@127.0.0.1:30303</span><br><span class="line">INFO [03-27|16:25:39.818] IPC endpoint opened                      url=/data/ethereum/node/geth.ipc</span><br><span class="line">WARN [03-27|16:25:39.858] Served eth_coinbase                      reqid=3 t=&quot;12.338Âµs&quot; err=&quot;etherbase must be explicitly specified&quot;</span><br><span class="line">Welcome to the Geth JavaScript console!</span><br><span class="line"></span><br><span class="line">instance: Geth/v1.10.2-unstable-54c0d573-20210325/linux-amd64/go1.13.8</span><br><span class="line">at block: 0 (Thu Jan 01 1970 08:00:00 GMT+0800 (CST))</span><br><span class="line"> datadir: /data/ethereum/node</span><br><span class="line"> modules: admin:1.0 debug:1.0 eth:1.0 ethash:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0</span><br><span class="line"></span><br><span class="line">To exit, press ctrl-d</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> INFO [03-27|16:25:39.924] Compacting snapshot storage area</span>  </span><br><span class="line">INFO [03-27|16:25:39.924] Compacted snapshot area in database      elapsed=277.624ms</span><br><span class="line">INFO [03-27|16:25:39.924] Resuming state snapshot generation       root=&quot;d7f897â€¦0f0544&quot; accounts=0 slots=0 storage=0.00B elapsed=&quot;9.119Âµs&quot;</span><br><span class="line">INFO [03-27|16:25:39.996] Generated state snapshot                 accounts=8893 slots=0 storage=409.64KiB elapsed=71.524ms</span><br><span class="line">INFO [03-27|16:25:46.015] New local node record                    seq=2 id=0d81eb9b177ba542 ip=115.171.250.78 udp=52360 tcp=30303</span><br><span class="line">INFO [03-27|16:25:50.847] Looking for peers                        peercount=0 tried=8 static=0</span><br><span class="line">INFO [03-27|16:25:56.124] Block synchronisation started </span><br><span class="line">INFO [03-27|16:26:01.068] Looking for peers                        peercount=0 tried=4 static=0</span><br><span class="line">WARN [03-27|16:26:05.414] Dropping unsynced node during sync       id=46e8efbdd811cf2e conn=dyndial addr=207.148.3.150:30303 type=Geth/v1.9.25-stable-...</span><br><span class="line">INFO [03-27|16:26:11.068] Looking for peers                        peercount=2 tried=15 static=0</span><br><span class="line">WARN [03-27|16:26:12.135] Dropping unsynced node during sync       id=53455744030e83cc conn=dyndial addr=108.61.176.254:30303 type=Geth/v1.9.25-stable-...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹-data-ethereum-nodeç›®å½•">æŸ¥çœ‹<code>/data/ethereum/node</code>ç›®å½•</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ll</span></span><br><span class="line">æ€»ç”¨é‡ 1</span><br><span class="line">drwxrwxrwx 1 root root 472 3æœˆ  27 16:28 geth/</span><br><span class="line">srwxrwxrwx 1 root root   1 3æœˆ  27 16:25 geth.ipc=</span><br><span class="line">drwxrwxrwx 1 root root   0 3æœˆ  27 16:25 keystore/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è°ƒç”¨gethçš„json-rpcæ¥å£">è°ƒç”¨gethçš„json-rpcæ¥å£</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -H &quot;Content-Type: application/json&quot; --data &#x27;&#123;&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;web3_clientVersion&quot;,&quot;params&quot;:[],&quot;id&quot;:1&#125;&#x27; http://localhost:8545</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¦‚ä½•åœ¨ubantuä¸Šå¯åŠ¨go-ethereumå®¢æˆ·ç«¯&quot;&gt;å¦‚ä½•åœ¨ubantuä¸Šå¯åŠ¨go-ethereumå®¢æˆ·ç«¯&lt;/h1&gt;
&lt;h2 id=&quot;ç¯å¢ƒå‡†å¤‡&quot;&gt;ç¯å¢ƒå‡†å¤‡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…git:&lt;code&gt;sudo apt install git&lt;/code&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E7%B3%BB%E7%BB%9F%E4%B8%8Bnvidia%E6%98%BE%E5%8D%A1%E8%B6%85%E9%A2%91%E8%AE%BE%E7%BD%AE/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E7%B3%BB%E7%BB%9F%E4%B8%8Bnvidia%E6%98%BE%E5%8D%A1%E8%B6%85%E9%A2%91%E8%AE%BE%E7%BD%AE/</id>
    <published>2021-04-01T10:18:57.779Z</published>
    <updated>2021-04-01T10:18:57.779Z</updated>
    
    <content type="html"><![CDATA[<p>ubantuç³»ç»Ÿä¸‹nvidiaæ˜¾å¡è¶…é¢‘è®¾ç½®</p><p>æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯ï¼š<br><code>nvidia-smi</code></p><p>è®¾ç½®ç¬¬ä¸€ä¸ªæ˜¾å¡çš„åŠŸç‡ä¸º125wï¼š<br><code>sudo nvidia-smi -i 0 -pl 125</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ubantuç³»ç»Ÿä¸‹nvidiaæ˜¾å¡è¶…é¢‘è®¾ç½®&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯ï¼š&lt;br&gt;
&lt;code&gt;nvidia-smi&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ç¬¬ä¸€ä¸ªæ˜¾å¡çš„åŠŸç‡ä¸º125wï¼š&lt;br&gt;
&lt;code&gt;sudo nvidia-smi -i 0 -pl 125&lt;/code&gt;&lt;/p</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E5%A6%82%E4%BD%95%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/eth/ubantu%E5%A6%82%E4%BD%95%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/</id>
    <published>2021-04-01T10:18:57.778Z</published>
    <updated>2021-04-01T10:18:57.779Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ubantuå¦‚ä½•æŒ‚è½½ç¡¬ç›˜ï¼š">ubantuå¦‚ä½•æŒ‚è½½ç¡¬ç›˜ï¼š</h1><h2 id="æŸ¥çœ‹å·²ç»æŒ‚è½½äº†å“ªäº›">æŸ¥çœ‹å·²ç»æŒ‚è½½äº†å“ªäº›</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> df -l</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ           1K-å—     å·²ç”¨      å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">udev            16362980        0  16362980    0% /dev</span><br><span class="line">tmpfs            3285100     2364   3282736    1% /run</span><br><span class="line">/dev/nvme0n1p7 200537360 18016188 172264740   10% /</span><br><span class="line">tmpfs           16425488   408624  16016864    3% /dev/shm</span><br><span class="line">tmpfs               5120        4      5116    1% /run/lock</span><br><span class="line">tmpfs           16425488        0  16425488    0% /sys/fs/cgroup</span><br><span class="line">/dev/loop0         56832    56832         0  100% /snap/core18/1988</span><br><span class="line">/dev/loop1         66432    66432         0  100% /snap/gtk-common-themes/1514</span><br><span class="line">/dev/loop2         33152    33152         0  100% /snap/snapd/11402</span><br><span class="line">/dev/loop3         52352    52352         0  100% /snap/snap-store/518</span><br><span class="line">/dev/loop4         31872    31872         0  100% /snap/snapd/11036</span><br><span class="line">/dev/loop5        224256   224256         0  100% /snap/gnome-3-34-1804/66</span><br><span class="line">/dev/nvme0n1p1     98304    33555     64749   35% /boot/efi</span><br><span class="line">tmpfs            3285096       20   3285076    1% /run/user/125</span><br><span class="line">tmpfs            3285096       92   3285004    1% /run/user/1000</span><br><span class="line">/dev/loop6        101632   101632         0  100% /snap/core/10908</span><br><span class="line">/dev/loop7        435968   435968         0  100% /snap/pycharm-community/233</span><br><span class="line">/dev/loop8        680192   680192         0  100% /snap/intellij-idea-community/289</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æœ‰å“ªäº›">æŸ¥çœ‹æœ‰å“ªäº›</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo fdisk -l</span></span><br><span class="line">Disk /dev/loop0ï¼š55.48 MiBï¼Œ58159104 å­—èŠ‚ï¼Œ113592 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop1ï¼š64.79 MiBï¼Œ67915776 å­—èŠ‚ï¼Œ132648 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop2ï¼š32.28 MiBï¼Œ33841152 å­—èŠ‚ï¼Œ66096 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop3ï¼š51.4 MiBï¼Œ53522432 å­—èŠ‚ï¼Œ104536 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop4ï¼š31.9 MiBï¼Œ32595968 å­—èŠ‚ï¼Œ63664 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop5ï¼š218.102 MiBï¼Œ229629952 å­—èŠ‚ï¼Œ448496 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop6ï¼š99.22 MiBï¼Œ104030208 å­—èŠ‚ï¼Œ203184 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop7ï¼š425.67 MiBï¼Œ446328832 å­—èŠ‚ï¼Œ871736 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/nvme0n1ï¼š931.53 GiBï¼Œ1000204886016 å­—èŠ‚ï¼Œ1953525168 ä¸ªæ‰‡åŒº</span><br><span class="line">Disk model: WDC WDS100T2B0C-00PXH0                  </span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šgpt</span><br><span class="line">ç£ç›˜æ ‡è¯†ç¬¦ï¼šC12B6754-9D12-4F54-92FA-086CE249C548</span><br><span class="line"></span><br><span class="line">è®¾å¤‡                 èµ·ç‚¹       æœ«å°¾      æ‰‡åŒº   å¤§å° ç±»å‹</span><br><span class="line">/dev/nvme0n1p1       2048     206847    204800   100M EFI ç³»ç»Ÿ</span><br><span class="line">/dev/nvme0n1p2     206848     239615     32768    16M Microsoft ä¿ç•™</span><br><span class="line">/dev/nvme0n1p3     239616  408449302 408209687 194.7G Microsoft åŸºæœ¬æ•°æ®</span><br><span class="line">/dev/nvme0n1p4  408451072  409597951   1146880   560M Windows æ¢å¤ç¯å¢ƒ</span><br><span class="line">/dev/nvme0n1p5  409597952 1134321663 724723712 345.6G Microsoft åŸºæœ¬æ•°æ®</span><br><span class="line">/dev/nvme0n1p6 1134321664 1543921663 409600000 195.3G Microsoft åŸºæœ¬æ•°æ®</span><br><span class="line">/dev/nvme0n1p7 1543921664 1953523711 409602048 195.3G Linux æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdaï¼š7.28 TiBï¼Œ8001563222016 å­—èŠ‚ï¼Œ15628053168 ä¸ªæ‰‡åŒº</span><br><span class="line">Disk model: HGST HUS728T8TAL</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 4096 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š4096 å­—èŠ‚ / 4096 å­—èŠ‚</span><br><span class="line">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šgpt</span><br><span class="line">ç£ç›˜æ ‡è¯†ç¬¦ï¼šF654D976-A27E-49D1-B0FD-5DCB3914D51D</span><br><span class="line"></span><br><span class="line">è®¾å¤‡             èµ·ç‚¹        æœ«å°¾       æ‰‡åŒº  å¤§å° ç±»å‹</span><br><span class="line">/dev/sda1          34       32767      32734   16M Microsoft ä¿ç•™</span><br><span class="line">/dev/sda2       32768  4096032767 4096000000  1.9T Microsoft åŸºæœ¬æ•°æ®</span><br><span class="line">/dev/sda3  4096032768  8192032767 4096000000  1.9T Microsoft åŸºæœ¬æ•°æ®</span><br><span class="line">/dev/sda4  8192032768 15628050431 7436017664  3.5T Microsoft åŸºæœ¬æ•°æ®</span><br><span class="line"></span><br><span class="line">åˆ†åŒº 1 æœªèµ·å§‹äºç‰©ç†æ‰‡åŒºè¾¹ç•Œã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/loop8ï¼š664.17 MiBï¼Œ696426496 å­—èŠ‚ï¼Œ1360208 ä¸ªæ‰‡åŒº</span><br><span class="line">å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æƒ³è¦æŒ‚è½½çš„ç¡¬ç›˜çš„uuid">æŸ¥çœ‹æƒ³è¦æŒ‚è½½çš„ç¡¬ç›˜çš„uuid</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> lsblk -f</span></span><br><span class="line">NAME        FSTYPE   LABEL    UUID                                 FSAVAIL FSUSE% MOUNTPOINT</span><br><span class="line">loop0       squashfs                                                     0   100% /snap/core18/1988</span><br><span class="line">loop1       squashfs                                                     0   100% /snap/gtk-common-themes/1514</span><br><span class="line">loop2       squashfs                                                     0   100% /snap/snapd/11402</span><br><span class="line">loop3       squashfs                                                     0   100% /snap/snap-store/518</span><br><span class="line">loop4       squashfs                                                     0   100% /snap/snapd/11036</span><br><span class="line">loop5       squashfs                                                     0   100% /snap/gnome-3-34-1804/66</span><br><span class="line">loop6       squashfs                                                     0   100% /snap/core/10908</span><br><span class="line">loop7       squashfs                                                     0   100% /snap/pycharm-community/233</span><br><span class="line">loop8       squashfs                                                     0   100% /snap/intellij-idea-community/289</span><br><span class="line">sda                                                                               </span><br><span class="line">â”œâ”€sda1                                                                            </span><br><span class="line">â”œâ”€sda2      ntfs     æ•°æ®     38C09128C090ECFE                                    </span><br><span class="line">â”œâ”€sda3      ntfs     æ–°åŠ å·   2A9E99709E993573                                    </span><br><span class="line">â””â”€sda4      ntfs     æ–°åŠ å·   C25E9EB25E9E9F2B                                    </span><br><span class="line">nvme0n1                                                                           </span><br><span class="line">â”œâ”€nvme0n1p1 vfat              2E15-C03F                              63.2M    34% /boot/efi</span><br><span class="line">â”œâ”€nvme0n1p2                                                                       </span><br><span class="line">â”œâ”€nvme0n1p3 ntfs              A4AA2056AA2026F0                                    </span><br><span class="line">â”œâ”€nvme0n1p4 ntfs              FE347AD2347A8D81                                    </span><br><span class="line">â”œâ”€nvme0n1p5 ntfs     å¨±ä¹     E848526348523114                                    </span><br><span class="line">â”œâ”€nvme0n1p6 ntfs     å­¦ä¹ å·¥ä½œ EA1E592A1E58F155                                    </span><br><span class="line">â””â”€nvme0n1p7 ext4              12354a11-9bf9-4882-a202-3e3e675b3158  164.3G     9% /</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚æˆ‘æƒ³è¦æŒ‚è½½<code>/dev/sda4</code>çš„uuidä¸º<code>C25E9EB25E9E9F2B</code></p><h2 id="ä¿®æ”¹-etc-fstabè¿›è¡ŒæŒ‚è½½">ä¿®æ”¹<code>/etc/fstab</code>è¿›è¡ŒæŒ‚è½½</h2><p>å‚è€ƒï¼š<a href="https://blog.51cto.com/13570193/2070157">https://blog.51cto.com/13570193/2070157</a></p><p>æ¯”å¦‚æˆ‘çš„æ·»åŠ äº†ä¸€è¡Œï¼š<code>UUID=C25E9EB25E9E9F2B /data ntfs defaults 0 0</code></p><h2 id="é‡å¯">é‡å¯</h2><h2 id="éªŒè¯">éªŒè¯</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> df -h</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ        å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">udev             16G     0   16G    0% /dev</span><br><span class="line">tmpfs           3.2G  2.3M  3.2G    1% /run</span><br><span class="line">/dev/nvme0n1p7  192G   18G  165G   10% /</span><br><span class="line">tmpfs            16G     0   16G    0% /dev/shm</span><br><span class="line">tmpfs           5.0M  4.0K  5.0M    1% /run/lock</span><br><span class="line">tmpfs            16G     0   16G    0% /sys/fs/cgroup</span><br><span class="line">/dev/loop0       56M   56M     0  100% /snap/core18/1988</span><br><span class="line">/dev/loop1      100M  100M     0  100% /snap/core/10908</span><br><span class="line">/dev/loop2       33M   33M     0  100% /snap/snapd/11402</span><br><span class="line">/dev/loop4       52M   52M     0  100% /snap/snap-store/518</span><br><span class="line">/dev/loop3      426M  426M     0  100% /snap/pycharm-community/233</span><br><span class="line">/dev/loop5       32M   32M     0  100% /snap/snapd/11036</span><br><span class="line">/dev/loop6       65M   65M     0  100% /snap/gtk-common-themes/1514</span><br><span class="line">/dev/loop7      219M  219M     0  100% /snap/gnome-3-34-1804/66</span><br><span class="line">/dev/loop8      665M  665M     0  100% /snap/intellij-idea-community/289</span><br><span class="line">/dev/nvme0n1p1   96M   33M   64M   35% /boot/efi</span><br><span class="line">/dev/sda4       3.5T  211M  3.5T    1% /data</span><br><span class="line">tmpfs           3.2G   16K  3.2G    1% /run/user/125</span><br><span class="line">tmpfs           3.2G   24K  3.2G    1% /run/user/1000</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ubantuå¦‚ä½•æŒ‚è½½ç¡¬ç›˜ï¼š&quot;&gt;ubantuå¦‚ä½•æŒ‚è½½ç¡¬ç›˜ï¼š&lt;/h1&gt;
&lt;h2 id=&quot;æŸ¥çœ‹å·²ç»æŒ‚è½½äº†å“ªäº›&quot;&gt;æŸ¥çœ‹å·²ç»æŒ‚è½½äº†å“ªäº›&lt;/h2&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°-ã€Šä½ çš„ç¬¬ä¸€æœ¬ä¿é™©æŒ‡å—ã€‹</title>
    <link href="https://guozhe001.github.io/2021/04/01/others/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E6%9C%AC%E4%BF%9D%E9%99%A9%E6%8C%87%E5%8D%97%E3%80%8B/"/>
    <id>https://guozhe001.github.io/2021/04/01/others/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E6%9C%AC%E4%BF%9D%E9%99%A9%E6%8C%87%E5%8D%97%E3%80%8B/</id>
    <published>2021-04-01T10:18:21.507Z</published>
    <updated>2021-04-01T10:18:21.508Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1ã€ç ´é™¤è¯¯ä¼šï¼Œæˆ‘ä»¬çœŸçš„äº†è§£ä¿é™©å—">1ã€ç ´é™¤è¯¯ä¼šï¼Œæˆ‘ä»¬çœŸçš„äº†è§£ä¿é™©å—</h1><h2 id="æˆ‘ä»¬å¯¹ä¿é™©çš„è®¤è¯†ï¼šç†èµ”ä¼¼ä¹ç‰¹åˆ«éš¾">æˆ‘ä»¬å¯¹ä¿é™©çš„è®¤è¯†ï¼šç†èµ”ä¼¼ä¹ç‰¹åˆ«éš¾</h2><ul><li>å‘ç”Ÿçš„äº‹æ•…ä¸åœ¨ä¿é™©èŒƒå›´ï¼Œä¸èƒ½èµ”ä»˜</li><li>å®¢æˆ·æœªå¦‚å®å‘ŠçŸ¥è‡ªèº«æƒ…å†µï¼Œä¸èƒ½èµ”ä»˜</li><li>æ¡æ¬¾è¿‡äºä¸¥è‹›ï¼Œä¸èƒ½èµ”ä»˜</li></ul><h2 id="ä»€ä¹ˆæ˜¯æ ¸ä¿å¸ˆä¸å¥åº·å‘ŠçŸ¥">ä»€ä¹ˆæ˜¯æ ¸ä¿å¸ˆä¸å¥åº·å‘ŠçŸ¥</h2><h3 id="å¥åº·å‘ŠçŸ¥">å¥åº·å‘ŠçŸ¥</h3><h4 id="å¥åº·å‘ŠçŸ¥é—®è¯¢">å¥åº·å‘ŠçŸ¥é—®è¯¢</h4><ul><li>å¥åº·é—®è¯¢ï¼šæ˜¯å¦æœ‰ç–¾ç—…æˆ–ä½é™¢è®°å½•ç­‰</li><li>èŒä¸šé—®è¯¢ï¼šæ˜¯å¦ä»äº‹é«˜å±è¡Œä¸š</li><li>ç”Ÿæ´»é—®è¯¢ï¼šæ˜¯å¦å¸çƒŸã€é…—é…’ï¼ˆé…’ç²¾ä¾èµ–ï¼‰ï¼Œæ˜¯å¦æœ‰æé™è¿åŠ¨ç­‰å±é™©æ€§é«˜çš„ä¸šä½™çˆ±å¥½ç­‰</li></ul><h4 id="æ ¸ä¿ç»“è®º">æ ¸ä¿ç»“è®º</h4><ul><li>ç»“è®ºä¸€ï¼šæ ‡å‡†ä½“ã€‚æ­å–œï¼Œä½ å®Œç¾åœ°ç¬¦åˆå¥åº·å‘ŠçŸ¥ä¸­çš„æ‰€æœ‰è¦æ±‚ï¼Œå¯ä»¥ç›´æ¥æŠ•ä¿ï¼Œæ— é¡»åšè¡¥å……å‘ŠçŸ¥</li><li>ç»“è®ºäºŒï¼šæ¬¡æ ‡å‡†ä½“ã€‚å¯èƒ½æœ‰å°‘æ•°å‡ æ¡ä¸ç¬¦åˆå¥åº·å‘ŠçŸ¥ï¼Œä½†è€ƒè™‘åˆ°åŸºæœ¬åœ¨å¯æ¥å—èŒƒå›´å†…ï¼Œä¿é™©å…¬å¸å°±â€œå‹‰ä¸ºå…¶éš¾â€åœ°å…è®¸ä½ æŠ•ä¿äº†<ul><li>æ¥å—é™¤å¤–è´£ä»»ï¼šä¿é™©å…¬å¸è€ƒè™‘åˆ°æŠ•ä¿äººå½“å‰çš„å¥åº·çŠ¶å†µï¼Œå°†ç‰¹å®šç–¾ç—…æ’é™¤åœ¨è´£ä»»èŒƒå›´ä¹‹å¤–</li><li>å¢åŠ ä¿è´¹</li></ul></li><li>ç»“è®ºä¸‰ï¼šå»¶æœŸã€‚ä¿é™©å…¬å¸è€ƒè™‘åˆ°ä½ çš„æŸä¸ªå¥åº·é—®é¢˜ï¼Œæš‚ä¸æ¥å—ä½ çš„æœ¬æ¬¡æŠ•ä¿ç”³è¯·ï¼Œå»ºè®®è¿‡ä¸€æ®µæ—¶é—´å†æ¥è¯•è¯•</li><li>ç»“è®ºå››ï¼šæ‹’ä¿</li></ul><h4 id="åˆ°åº•æ€ä¹ˆå¥åº·å‘ŠçŸ¥ï¼Ÿ">åˆ°åº•æ€ä¹ˆå¥åº·å‘ŠçŸ¥ï¼Ÿ</h4><p>è¯´å®è¯ï¼Œå½“ä¿é™©å…¬å¸æŠŠé‡ç–¾é™©ã€åŒ»ç–—é™©è¿™ç±»ä¿éšœå‹äº§å“æ”¾åˆ°ç½‘ä¸Šé”€å”®çš„æ—¶å€™ï¼Œå…¶å®åªæ˜¯æƒ³å–ç»™æ ‡å‡†ä½“å®¢æˆ·ã€‚</p><p>è‡³äºæ¬¡æ ‡å‡†ä½“å’Œéæ ‡å‡†ä½“å®¢æˆ·ï¼Œå¯¹ä¸èµ·ï¼Œè¿™ç±»äº§å“ä¸æ˜¯ä¸ºä»–ä»¬å‡†å¤‡çš„ã€‚</p><h2 id="ä¹°ä¿é™©ä¸€å®šè¦è¿”æœ¬å—ï¼Ÿ">ä¹°ä¿é™©ä¸€å®šè¦è¿”æœ¬å—ï¼Ÿ</h2><h3 id="å½“ä½ æƒ³è¦è¿”è¿˜çš„æ—¶å€™ï¼Œä½ åˆ°åº•æƒ³è¦ä»€ä¹ˆ">å½“ä½ æƒ³è¦è¿”è¿˜çš„æ—¶å€™ï¼Œä½ åˆ°åº•æƒ³è¦ä»€ä¹ˆ</h3><ul><li>ç¬¬ä¸€ï¼Œæ‹¿å›ä¿è´¹ã€‚å¦‚æœæ²¡æœ‰å‘ç”Ÿä¿é™©äº‹æ•…ï¼Œè¯·æŠŠæˆ‘äº¤çš„ä¿è´¹è¿˜ç»™æˆ‘</li><li>ç¬¬äºŒï¼Œè·å¾—èµ”å¿ã€‚æ—¢ç„¶æˆ‘è´­ä¹°äº†ä¿é™©ï¼Œæ€»å½’æ˜¯å¸Œæœ›èƒ½æ´¾ä¸Šç”¨åœºã€‚</li></ul><h3 id="è¿½æ±‚ä¿è´¹è¿”è¿˜ï¼Œåˆ‡è«å› å°å¤±å¤§">è¿½æ±‚ä¿è´¹è¿”è¿˜ï¼Œåˆ‡è«å› å°å¤±å¤§</h3><ul><li>åæœ¬ä¿é™©ä¸€èˆ¬ä¼šæ¯”ä¸åæœ¬ï¼ˆæ¶ˆè´¹å‹ï¼‰ä¿é™©æ›´è´µ</li><li>åœ¨è¿½æ±‚ä¿è´¹è¿”è¿˜æ—¶ï¼Œæƒ³ä¸€ä¸‹è‡ªå·±è´­ä¹°ä¿é™©çš„åˆå¿ƒï¼šå½“åˆä½ è¯´è¦ä¹°ä¿é™©çš„æ—¶å€™ï¼Œåˆ°åº•æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿä¿è´¹å’Œä¿é¢ï¼Œå“ªä¸ªæ‰æ˜¯ä½ çš„åˆå¿ƒï¼Ÿ</li></ul><h3 id="éè¦æ‹¿åˆ°ä¿è´¹ï¼Œä¸å¦¨è¿™æ ·é€‰æ‹©">éè¦æ‹¿åˆ°ä¿è´¹ï¼Œä¸å¦¨è¿™æ ·é€‰æ‹©</h3><ul><li>æå‰ç»™ä»˜å‹é‡ç–¾é™©ï¼šèº«æ‚£é‡ç–¾æˆ–ä¸å¹¸èº«æ•…ï¼Œå“ªä¸ªæå‰å‘ç”Ÿï¼Œéƒ½å¯ç»™ä»˜èµ”å¿ï¼Œä½†æ˜¯ä»£ä»·ä¾ç„¶æ˜¯æ”¯ä»˜æ›´å¤šä¿è´¹</li><li>ä¿éšœç»ˆèº«åªæ˜¯ä¿é™©äº§å“çš„ä¸€ä¸ªåŠŸèƒ½è®¾ç½®ï¼Œè€Œä¸åº”è¢«è§†ä¸ºä¸€ä¸ªä¼˜ç‚¹ï¼Œå› ä¸ºä½ ä¸ºæ­¤æ”¯ä»˜äº†æ›´å¤šçš„ä¿è´¹</li></ul><h2 id="ä¿é™©å…¬å¸ä¼šä¸ä¼šç ´äº§">ä¿é™©å…¬å¸ä¼šä¸ä¼šç ´äº§</h2><h3 id="ä¿é™©å…¬å¸ä¼šç ´äº§ï¼Œå´ä¸ä¼šå®Œè›‹">ä¿é™©å…¬å¸ä¼šç ´äº§ï¼Œå´ä¸ä¼šå®Œè›‹</h3><ul><li>ä¿é™©å…¬å¸ç ´äº§æ—¶ï¼Œäººå¯¿ä¿é™©åˆåŒåŠè´£ä»»å‡†å¤‡é‡‘ï¼Œå¿…é¡»è½¬è®©ç»™å…¶ä»–ç»è¥æœ‰äººå¯¿ä¿é™©ä¸šåŠ¡çš„ä¿é™©å…¬å¸</li><li>ä¿é™©ä¿éšœåŸºé‡‘ï¼šæ¥æºæ˜¯81å®¶è´¢é™©å…¬å¸å’Œ88å®¶å¯¿é™©å…¬å¸ï¼Œä¿é™©å…¬å¸æ¯å¹´éœ€å‘å…¶ç¼´çº³ä¸€å®šæ•°é¢çš„èµ„é‡‘ï¼Œè¿™ä¹Ÿæ˜¯è¢«å†™è¿›ã€Šä¿é™©æ³•ã€‹çš„å¼ºåˆ¶æ€§è¦æ±‚ã€‚</li></ul><h3 id="æ”¿åºœåœ¨åšçš„ï¼Œæ˜¯æ‹¼å‘½é¢„é˜²ä¿é™©å…¬å¸ç ´äº§">æ”¿åºœåœ¨åšçš„ï¼Œæ˜¯æ‹¼å‘½é¢„é˜²ä¿é™©å…¬å¸ç ´äº§</h3><p>ä¸€å®¶ä¿é™©å…¬å¸ä»è®¡åˆ’æˆç«‹ä¹‹åˆï¼Œå°±ä¸å¾—ä¸æ¥å—ä¸€ç³»åˆ—ç›‘ç®¡ã€‚è¿™äº›ç›‘ç®¡æªæ–½å’Œè§„å®šå°±åƒä¸€é“é“é˜²ç«å¢™ï¼Œç¡®ä¿å…¬å¸åœ¨æ­£ç¡®è½¨é“ä¸Šè¿è½¬ã€‚</p><ul><li>ç¬¬ä¸€é“é˜²ç«å¢™æ˜¯æé«˜çš„å…¬å¸è®¾ç«‹æ ‡å‡†</li><li>ç¬¬äºŒé“é˜²ç«å¢™æ˜¯å…¨é¢ç§‘å­¦çš„å¿ä»˜èƒ½åŠ›ç›‘ç®¡<ul><li>æ‰€è°“å¿ä»˜èƒ½åŠ›ï¼ŒæŒ‡çš„æ˜¯å½“ä¿é™©å…¬å¸é­é‡æç«¯æƒ…å†µæ—¶ï¼Œæ˜¯å¦ä»æœ‰èƒ½åŠ›å±¥è¡Œèµ”ä»˜è´£ä»»ã€‚æ¯ä¸ªå¹´åº¦å’Œå­£åº¦ï¼Œä¿é™©å…¬å¸çš„ç²¾ç®—ã€è´¢åŠ¡ç­‰ä¸“ä¸šäººå£«éƒ½ä¼šç¼–åˆ¶å…¬å¸å¿ä»˜èƒ½åŠ›æŠ¥å‘Šï¼Œæ¶‰åŠä¸€ç³»åˆ—æ•°å­¦æ¨¡å‹å’Œå‹åŠ›æµ‹è¯•</li><li>æ ¹æ®å¿ä»˜èƒ½åŠ›æƒ…å†µï¼Œä¿é™©å…¬å¸ä¼šå¾—åˆ°ä»ä¼˜åˆ°å·®çš„è¯„çº§ï¼ŒåŒ…æ‹¬Aã€Bã€Cã€D4ä¸ªç­‰çº§ã€‚è¯„çº§å¯ä»¥åœ¨ä¿é™©å…¬å¸å®˜ç½‘çš„â€œå…¬å¼€ä¿¡æ¯æŸ¥è¯¢â€æ ç›®æŸ¥åˆ°ï¼Œæˆ‘ä»¬å°†å®ƒè§†ä¸ºåˆ¤æ–­ä¿é™©å…¬å¸æ˜¯å¦â€œé è°±â€çš„ä¸€ä¸ªé‡è¦æ ‡å¿—ã€‚é•¿æœŸæ¥çœ‹ï¼Œåªè¦è¯„çº§ç¨³å®šåœ¨Aå’ŒBçš„å…¬å¸ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æ”¾å¿ƒè´­ä¹°å…¶äº§å“</li></ul></li><li>ç¬¬ä¸‰é“é˜²ç«å¢™æ˜¯é¢‘ç‡é«˜ã€å¼ºåº¦å¤§çš„ç°åœºæ£€æŸ¥<ul><li>ç›‘ç®¡éƒ¨é—¨ä¼šéšæ—¶è¿›é©»ä¿é™©å…¬å¸æ€»å…¬å¸å’Œåˆ†å…¬å¸ï¼Œé€šè¿‡è°ƒå–æ¡£æ¡ˆã€æŸ¥è¯¢ç³»ç»Ÿç­‰æ–¹å¼å®æ–½ç°åœºæ£€æŸ¥</li></ul></li><li>å½“ç„¶ï¼Œä¸Šè¿°çš„é˜²ç«å¢™è™½å¥½ï¼Œå¦‚æœå› ä¸ºè´ªæ±¡è…è´¥è€Œè®©ä¿é™©å…¬å¸è’™æ··è¿‡å…³ï¼Œè¿™æ˜¯æˆ‘ä»¬æ— æ³•æ”¹å˜çš„äº‹æƒ…ï¼Œæš‚æ—¶åªèƒ½æ¥å—</li></ul><h3 id="å¦‚ä½•é€‰æ‹©ä¸€å®¶ä¿é™©å…¬å¸ï¼Ÿ">å¦‚ä½•é€‰æ‹©ä¸€å®¶ä¿é™©å…¬å¸ï¼Ÿ</h3><ul><li>å¯¹æ¯”ä¸åŒä¿é™©å…¬å¸çš„æŠ•è¯‰æƒ…å†µ</li><li>ç›‘ç®¡éƒ¨é—¨æ¯å¹´éƒ½ä¼šå¯¹å„å®¶ä¿é™©å…¬å¸çš„æŠ•è¯‰æƒ…å†µè¿›è¡Œé€šæŠ¥ã€è¯„åˆ†ï¼Œå¹¶å‘å¸ƒåœ¨å®˜ç½‘ä¸Šï¼ˆæ¯”å¦‚ä¿ç›‘ä¼šå®˜ç½‘ï¼‰</li><li>é”€å”®äººå‘˜å£ç¢‘å¦‚ä½•ï¼Œä¿¡æ¯æŠ€æœ¯å®åŠ›å¦‚ä½•ï¼ˆæ¯”å¦‚å®˜ç½‘å’Œæ‰‹æœºè½¯ä»¶çš„ä½¿ç”¨ä½“éªŒï¼‰ï¼Œå®¢æœç”µè¯èƒ½å¦å¿«é€Ÿæ¥é€šï¼Œè¯¸å¦‚æ­¤ç±»</li><li>æœ€é‡è¦çš„æ˜¯ä¿é™©äº§å“çš„æ€§ä»·æ¯”</li></ul><h1 id="2ã€è´­å‰æŒ‡å—ï¼šä¹°ä¿é™©çš„æ­£ç¡®æ–¹æ³•">2ã€è´­å‰æŒ‡å—ï¼šä¹°ä¿é™©çš„æ­£ç¡®æ–¹æ³•</h1><ul><li><p>ä¹°ä¿é™©å’Œåƒéº¦å½“åŠ³æ˜¯ä¸€æ ·çš„ï¼Œä¿é™©äº§å“ä¸€èˆ¬éƒ½æ˜¯å¾ˆå¤šä¿é™©ç»„æˆçš„ã€‚</p></li><li><p>ä¸€ä»½ä¿é™©è®¡åˆ’é€šå¸¸ç”±ä¸€æ¬¾ä¸»é™©å’Œè‹¥å¹²æ¬¾é™„åŠ é™©æ„æˆï¼Œä¸»é™©å°±åƒä¸€ä½å¤§å“¥ï¼Œå¸¦ç€ä¸€å¸®ä½œä¸ºé™„åŠ é™©çš„å°å¼Ÿã€‚</p><ul><li>è¿™ç§å……åˆ†åˆ©ç”¨å’Œå®¢æˆ·æ¥è§¦çš„æœºä¼šæ¨é”€å°½å¯èƒ½å¤šçš„äº§å“ï¼Œæ˜¯ä¸€ç§æ™®éçš„ä¿é™©é”€å”®æ¨¡å¼</li></ul></li><li><p>ä½†æ˜¯æœ‰æ—¶å€™ï¼Œå•ç‚¹æ¯”å¥—é¤æ›´å¥½ï¼Œæ¯•ç«Ÿä¿é™©å…¬å¸å®šçš„äº§å“å¹¶éæ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚å®šï¼Œé™„åŠ é™©å¯èƒ½å¹¶éæˆ‘ä»¬éœ€è¦çš„ã€‚</p></li></ul><h2 id="è´£ä»»çš„å¤šå°‘ã€ä¿é¢çš„é«˜ä½ã€æœŸé™çš„é•¿çŸ­ï¼Œè¿™ä¸‰å¤§å› ç´ ç›´æ¥å†³å®šäº†ä¿é™©äº§å“çš„ä»·æ ¼ã€‚">è´£ä»»çš„å¤šå°‘ã€ä¿é¢çš„é«˜ä½ã€æœŸé™çš„é•¿çŸ­ï¼Œè¿™ä¸‰å¤§å› ç´ ç›´æ¥å†³å®šäº†ä¿é™©äº§å“çš„ä»·æ ¼ã€‚</h2><h3 id="ä¿é¢ï¼šçœŸåˆ°ç”¨æ—¶æ–¹æ¨å°‘">ä¿é¢ï¼šçœŸåˆ°ç”¨æ—¶æ–¹æ¨å°‘</h3><h3 id="æœŸé™ï¼šä»ä¸€å¤©åˆ°ä¸€è¾ˆå­">æœŸé™ï¼šä»ä¸€å¤©åˆ°ä¸€è¾ˆå­</h3><h4 id="çŸ­æœŸäº§å“">çŸ­æœŸäº§å“</h4><ul><li>ä¿é™©æœŸé™ä¸è¶…è¿‡ä¸€å¹´</li><li>ä»¥ä¸€å¹´ä¸ºä¸€æœŸè®¡ï¼Œäº§å“çš„å®šä»·å°±è¦å‚è€ƒå½“ä¸‹è¢«ä¿é™©äººçš„å¹´é¾„æ¥è®¡ç®—äº†ã€‚30å²æ—¶è´­ä¹°ï¼Œä»·æ ¼å¯èƒ½æ˜¯100å…ƒï¼›5å¹´åï¼Œä»·æ ¼å¯èƒ½å°±ä¼šæ¶¨åˆ°400å…ƒã€‚è¿™ç§éšå¹´é¾„å¢åŠ è€Œä¸Šæ¶¨çš„å®šä»·ç­–ç•¥ï¼Œå«ä½œè‡ªç„¶è´¹ç‡ã€‚å®¢æˆ·æ¯å¹´äº¤çš„é’±ï¼Œåªè´Ÿè´£æ‰¿æ‹…å½“å¹´çš„é£é™©ã€‚</li></ul><h4 id="é•¿æœŸäº§å“">é•¿æœŸäº§å“</h4><ul><li>10å¹´ã€20å¹´ç”šè‡³ç»ˆèº«</li><li>å®šä»·æ–¹æ³•éµå¾ªä¸¤ä¸ªåŸåˆ™ï¼šä¸€æ˜¯å‡è¡¡è´¹ç‡åŸåˆ™ï¼ŒäºŒæ˜¯ä¿è¯è´¹ç‡åŸåˆ™</li><li>å‡è¡¡è´¹ç‡ï¼ŒæŒ‡çš„æ˜¯ä¿é™©å…¬å¸å°†è¢«ä¿é™©äººæœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„é£é™©ï¼Œå½’å¹¶åˆ°ä¸€èµ·è¿›è¡Œå®šä»·ï¼Œè€Œä¸åªæ˜¯ä¸€å¹´çš„é£é™©<ul><li>æ¯”å¦‚ï¼Œä¿åˆ°70å²æˆ–ä¿ç»ˆèº«ï¼ŒæŠ•ä¿äººæœªæ¥å‡ åå¹´çš„ç–¾ç—…å‘ç”Ÿç‡æˆ–è€…æ­»äº¡ç‡è¢«ç´¯è®¡åç®—å‡ºä¿è´¹ï¼Œå†æŒ‰ç…§20å¹´æˆ–30å¹´äº¤è´¹çš„æ–¹å¼è¿›è¡Œå‡æ‘Šï¼Œä»·æ ¼å°±ç¡®å®šäº†</li><li>åœ¨è¿™æ ·ä¸€ç§æ¨¡å¼ä¸‹ï¼Œé•¿æœŸäº§å“çš„åœå”®åªæ„å‘³ç€ä¸æ¥å—æ–°å®¢æˆ·çš„è´­ä¹°ï¼Œä½†å¹¶ä¸å½±å“å·²ç»æŠ•ä¿çš„å®¢æˆ·</li></ul></li><li>ä¿è¯è´¹ç‡ï¼šæŒ‡çš„æ˜¯åœ¨ä½ æŠ•ä¿çš„ä¸€ç¬é—´ï¼Œä»·æ ¼ä¾¿å·²ç¡®å®šï¼ŒåæœŸä¸ä¼šå¢åŠ ã€‚å¯¹äºé•¿æœŸé‡ç–¾é™©æ¥è¯´ï¼Œå³ä½¿æŠ•ä¿äººæœªæ¥çš„å‘ç—…ç‡ä¸Šå‡ï¼Œä¿é™©å…¬å¸ä¹Ÿä¸ä¼šæ¶¨ä»·</li></ul><h4 id="é•¿æœŸäº§å“å’ŒçŸ­æœŸäº§å“è´¹ç”¨æ¯”è¾ƒ">é•¿æœŸäº§å“å’ŒçŸ­æœŸäº§å“è´¹ç”¨æ¯”è¾ƒ</h4><ul><li>æ•´ä½“æ¥çœ‹ï¼Œè´­ä¹°çŸ­æœŸé™©è´¹ç”¨è¦æ¯”é•¿æœŸé™©è´¹ç”¨é«˜</li><li>äººåˆ°ä¸­å¹´ï¼Œå°±æœ‰å¯èƒ½æ— æ³•è´­ä¹°çŸ­æœŸé™©</li><li>äººåˆ°è€å¹´ï¼Œåˆ™æ ¹æœ¬ä¸èƒ½è´­ä¹°çŸ­æœŸé™©</li><li>å¯¹äºå·²ç»æœ‰é•¿æœŸé™©åº‡æŠ¤çš„äººæ¥è¯´ï¼Œé¢å¤–è´­ä¹°ä¸€ä»½ä¸€å¹´æœŸäº§å“ï¼Œå¯ä»¥åœ¨ä¸€å®šæ—¶é—´å†…å¢åŠ ä¿é¢</li><li>çŸ­æœŸé™©åœ¨å¹´è½»æ—¶æ¯”è¾ƒä¾¿å®œ</li></ul><h3 id="ä¿é™©äº§å“çš„ä»·æ ¼ç”±è°å†³å®š">ä¿é™©äº§å“çš„ä»·æ ¼ç”±è°å†³å®š</h3><h4 id="æˆ‘ä»¬æœ‰å“ªäº›éœ€æ±‚éœ€è¦ä¿é™©è§£å†³ï¼Ÿ">æˆ‘ä»¬æœ‰å“ªäº›éœ€æ±‚éœ€è¦ä¿é™©è§£å†³ï¼Ÿ</h4><ol><li>å¾—äº†é‡ç–¾ï¼Œæœ‰é’±æ²»ç—…</li><li>å¾—äº†é‡ç–¾ï¼Œå¼¥è¡¥æ²»ç–—æœŸé—´çš„æ”¶å…¥</li><li>ä¸å¹¸èº«æ•…ï¼Œç»™çˆ¸å¦ˆç•™ä¸€ç¬”å…»è€è´¹</li><li>æ„å¤–å—ä¼¤ï¼Œè§£å†³åŒ»ä¿ä¸åŒ…å«çš„è´¹ç”¨</li></ol><h4 id="ä¿é™©è¿™ç§äº§å“ä¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå®ƒæ˜¯é™ªä¼´ä½ åº¦è¿‡æ¼«é•¿äººç”Ÿçš„ä¸€ç§é£é™©è§„åˆ’">ä¿é™©è¿™ç§äº§å“ä¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå®ƒæ˜¯é™ªä¼´ä½ åº¦è¿‡æ¼«é•¿äººç”Ÿçš„ä¸€ç§é£é™©è§„åˆ’</h4><h2 id="å¦‚ä½•ä¸ä¿é™©ä¸šåŠ¡å‘˜æ‰“äº¤é“">å¦‚ä½•ä¸ä¿é™©ä¸šåŠ¡å‘˜æ‰“äº¤é“</h2><p>ä¿é™©å…¬å¸ä¼šä¸é—ä½™åŠ›åœ°å¢åŠ äº§å“çš„â€œäººæƒ…å‘³â€ï¼Œæ¯”å¦‚å°†ä¿é™©å¡‘é€ æˆçˆ±ä¸è´£ä»»çš„è±¡å¾ï¼Œè®©ä½ æŠŠå¯¹å­å¥³ã€çˆ¶æ¯çš„çˆ±å¯„æ‰˜äºä¿é™©äº§å“ä¹‹ä¸Šï¼Œè®©è´­ä¹°è¡Œä¸ºæ›´åŠ é¡ºç†æˆç« </p><h3 id="ä¿é™©é”€å”®äººå‘˜åˆ°åº•æŒ‡çš„æ˜¯è°">ä¿é™©é”€å”®äººå‘˜åˆ°åº•æŒ‡çš„æ˜¯è°</h3><ul><li>ç¬¬ä¸€ï¼Œä¿é™©ä»£ç†äººã€‚å…¨å›½çº¦800ä¸‡ï¼Œä»–ä»¬ä»£è¡¨å„è‡ªæ‰€åœ¨çš„ä¿é™©å…¬å¸ï¼Œåªé”€å”®æŸä¸€å®¶ä¿é™©å…¬å¸çš„äº§å“ã€‚</li><li>ç¬¬äºŒï¼Œä¿é™©ç»çºªäººã€‚å’Œä»£ç†äººæœ€å¤§çš„ä¸åŒæ˜¯ï¼Œç»çºªäººä»£è¡¨çš„ä¸æ˜¯æŸä¸€å®¶ä¿é™©å…¬å¸ï¼Œè€Œæ˜¯ä¿é™©ä¸­ä»‹å…¬å¸ï¼Œä»–ä»¬å¯ä»¥é”€å”®å¤šå®¶ä¿é™©å…¬å¸äº§å“</li><li>ç¬¬ä¸‰ï¼Œé“¶è¡Œç†è´¢ç»ç†</li><li>ç¬¬å››ï¼Œäº’è”ç½‘ç¬¬ä¸‰æ–¹å¹³å°</li></ul><h3 id="å’Œä¸šåŠ¡å‘˜æ‰“äº¤é“ï¼Œè¦éµå¾ªä¸¤ä¸ªåŸåˆ™">å’Œä¸šåŠ¡å‘˜æ‰“äº¤é“ï¼Œè¦éµå¾ªä¸¤ä¸ªåŸåˆ™</h3><h4 id="æƒ³ä¸€ä¸‹æˆ‘ä»¬æœ‰æ—¶å€™ä¼šä¸ä¼šå› ä¸ºä¸‹é¢çš„æƒ…å†µè€Œä¹°ä¿é™©">æƒ³ä¸€ä¸‹æˆ‘ä»¬æœ‰æ—¶å€™ä¼šä¸ä¼šå› ä¸ºä¸‹é¢çš„æƒ…å†µè€Œä¹°ä¿é™©</h4><ul><li>ç¬¬ä¸€ï¼Œå–ä¿é™©çš„äººæ˜¯äº²æˆšï¼ŒæŠ¹ä¸å¼€é¢å­ï¼Œä¹°å§ã€‚</li><li>ç¬¬äºŒï¼Œé‚»å±…éƒ½ç»™å­©å­ä¹°çš„è¿™ä¸ªï¼Œæˆ‘ä¹Ÿä¹°ä¸€ä¸ªå§</li><li>ç¬¬ä¸‰ï¼Œä»–ç­”åº”æˆ‘æŠŠä½£é‡‘è¿”è¿˜ç»™æˆ‘ï¼Œçœäº†ä¸å°‘é’±ï¼Œä¹°å§ã€‚</li><li>ç¬¬å››ï¼Œå°ä¼™å­å£æ‰å¥½ï¼Œäººä¹Ÿå¸…ï¼Œå–çš„ä¿é™©ä¸ä¼šå·®ã€‚</li><li>ç¬¬äº”ï¼Œå°±ç®—è¢«éª—ä¸€å¹´æ‰æŸå¤±1000å¤šå—é’±ï¼Œä¹°å§</li></ul><p>å¥½é¢å­ã€ä»ä¼—å¿ƒç†ã€è´ªå›¾å°ä¾¿å®œã€å¿½ç•¥äº§å“çš„æœ¬è´¨ï¼Œè¿™ç±»é—®é¢˜ç»å¸¸å‘ç”Ÿï¼Œä¹Ÿé—´æ¥å‚¬ç”Ÿäº†ä¸€æ‰¹ä¸é è°±çš„ä¿é™©ä¸šåŠ¡å‘˜</p><h4 id="ç¬¬ä¸€ä¸ªåŸåˆ™ï¼šäº’ç›¸å°Šé‡ï¼Œå­¦ä¼šæé—®ã€‚">ç¬¬ä¸€ä¸ªåŸåˆ™ï¼šäº’ç›¸å°Šé‡ï¼Œå­¦ä¼šæé—®ã€‚</h4><ul><li>æ¡æ¬¾èƒ½ç»™æˆ‘çœ‹ä¸€ä¸‹å—ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆæˆ‘éœ€è¦è¿™æ¬¾äº§å“ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆè¿™ç±»äº§å“ä½ ä»¬å®¶çš„æœ€å¥½ï¼Ÿ</li><li>èƒ½æ¯”è¾ƒä¸€ä¸‹ä¸åŒäº§å“å—ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆè¦ä¿ç»ˆèº«ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆè¿™ä¸ªé™„åŠ é™©å€¼å¾—è´­ä¹°ï¼Ÿ</li><li>å¦‚æœä½ å‘ç°è¿™ä½ä¿é™©ä¸šåŠ¡å‘˜é¢å¯¹ä½ æå‡ºçš„ä¸€ä¸ªä¸ªé—®é¢˜ï¼Œè¦ä¹ˆç­”ä¸å‡ºæ¥ï¼Œè¦ä¹ˆé€»è¾‘æ··ä¹±ï¼Œè¦ä¹ˆä¸åˆ†é’çº¢çš‚ç™½åœ°æ•Œè§†åŠè´¬æŸå…¶ä»–ä¿é™©å…¬å¸ï¼Œæœ€å¥½ç«‹å³æ›´æ¢ä¸šåŠ¡å‘˜</li></ul><h4 id="ç¬¬äºŒä¸ªåŸåˆ™ï¼šå……åˆ†ä¿¡ä»»ï¼Œè¦æœ‰ä¸»è§">ç¬¬äºŒä¸ªåŸåˆ™ï¼šå……åˆ†ä¿¡ä»»ï¼Œè¦æœ‰ä¸»è§</h4><h3 id="å–ä¿é™©ç®€å•å—">å–ä¿é™©ç®€å•å—</h3><ul><li><p>äº§å“è´µä¸è´µï¼ˆåŒç±»äº§å“çš„å®šä»·å’Œè´¹ç‡å¯¹æ¯”ï¼‰ï¼Ÿ</p></li><li><p>åˆ°åº•æœ‰å“ªäº›ä¿éšœï¼ˆä¿é™©è´£ä»»çš„è§£è¯»ï¼‰ï¼Ÿ</p></li><li><p>é€€ä¿èƒ½æ‹¿åˆ°å¤šå°‘ä¿è´¹ï¼ˆä¿å•ç°é‡‘ä»·å€¼çš„è§£è¯»ï¼‰ï¼Ÿ</p></li><li><p>ä¹°å®Œåå“ªäº›ä¿¡æ¯å¯ä»¥ä¿®æ”¹ï¼ˆå¯¹ä¿å•ä¿å…¨åŠŸèƒ½çš„è®²è§£ï¼‰ï¼Ÿ</p></li><li><p>è¿™ä¸ªäº§å“èƒ½å®ç°å¤šé«˜æ”¶ç›Šï¼ˆå¦‚ä½•è®¡ç®—åˆ†çº¢é™©ã€ä¸‡èƒ½é™©ã€å¹´é‡‘ç­‰äº§å“çš„æŠ•èµ„æ”¶ç›Šï¼‰ï¼Ÿ</p></li><li><p>ç¼´è´¹æœŸé™æ€ä¹ˆé€‰æ‹©ï¼ˆç°é‡‘æµè´´ç°åŸç†ï¼‰ï¼Ÿ</p></li><li><p>ä¿é™©æ¡æ¬¾é‡Œæœ‰æ²¡æœ‰æ‰€è°“çš„å‘ï¼ˆé™¤å¤–è´£ä»»åšé‡ç‚¹è¯´æ˜ï¼‰ï¼Ÿ</p></li><li><p>é‡åˆ°çº çº·çš„æ—¶å€™å¦‚ä½•å¤„ç†ï¼Ÿ</p></li></ul><p>å¦‚æœä»–çœŸçš„åšäº†äº§å“å¯¹æ¯”ï¼Œä½†å¦‚æœä»–æ¨é”€çš„äº§å“ä»·æ ¼æ²¡æœ‰ç«äº‰åŠ›ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä»–çœŸçš„ç®—æ¸…æ¥šäº†äº§å“æ”¶ç›Šï¼Œä½†å®¢æˆ·è§‰å¾—æ”¶ç›Šç‡ä¸å¦‚æƒ³è±¡çš„é‚£ä¹ˆé«˜ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä»–çœŸçš„ä¸€æ¡ä¸€æ¡åœ°è§£é‡Šæ¸…æ¥šé™¤å¤–è´£ä»»ï¼Œå®¢æˆ·å´äº§ç”Ÿâ€œä¿é™©å…¬å¸æ¨å¸è´£ä»»â€çš„æƒ…ç»ªåŒ–è¯¯è§£ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä»–å› ä¸ºå®¢æˆ·çš„å¥åº·é—®é¢˜è€Œæ‹’ç»å…¶æŠ•ä¿ï¼Œä¹‹å‰çš„å·¥ä½œä¸å°±ç™½å¿™æ´»äº†å—ï¼Ÿ<br>è¿™äº›å‡è®¾ä¼¼ä¹æš—ç¤ºäº†ä¿é™©é”€å”®äººå‘˜â€œèƒ½åŠ›è¶Šå¼ºè¶Šå–ä¸å‡ºå»äº§å“â€çš„è§‚ç‚¹ï¼Œä½†æˆ‘æƒ³è¡¨è¾¾çš„ç»ä¸æ˜¯â€œçŸ¥è¯†æ— ç”¨è®ºâ€ï¼Œå®ƒä»¬åªæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šåæ˜ äº†å½“å‰ä¿é™©é”€å”®é¢†åŸŸå­˜åœ¨çš„å¼Šç—…ã€‚è€Œè¿™äº›æç«¯çš„ä¾‹å­æ°æ°å‡¸æ˜¾äº†â€œä½ â€çš„é‡è¦æ€§ã€‚</p><h3 id="ä½ çš„å…¬å¸ç»™ä½ ä¹°ä¿é™©äº†å—">ä½ çš„å…¬å¸ç»™ä½ ä¹°ä¿é™©äº†å—</h3><h4 id="ä¼ä¸šå›¢ä½“ä¿é™©">ä¼ä¸šå›¢ä½“ä¿é™©</h4><p>å›¢é™©é€šå¸¸ç”±4ä¸ªä¿é™©äº§å“ç»„æˆï¼š</p><ul><li>å®šæœŸå¯¿é™©</li><li>é‡å¤§ç–¾ç—…é™©</li><li>æ„å¤–é™©</li><li>åŒ»ç–—é™©</li></ul><p>å›¢é™©è®¡åˆ’å¯ä»¥æ¶µç›–ä»¥ä¸‹è´£ä»»ï¼š</p><ol><li>ç½¹æ‚£é‡å¤§ç–¾ç—…ï¼šä¿é¢50ä¸‡å…ƒï¼ˆé‡å¤§ç–¾ç—…é™©çš„é‡ç–¾è´£ä»»50ä¸‡å…ƒï¼‰ã€‚</li><li>ç–¾ç—…å¯¼è‡´èº«æ•…ï¼šä¿é¢50ä¸‡å…ƒï¼ˆå®šæœŸå¯¿é™©èº«æ•…è´£ä»»50ä¸‡å…ƒï¼‰ã€‚</li><li>æ„å¤–å¯¼è‡´èº«æ•…ï¼šä¿é¢150ä¸‡å…ƒï¼ˆå®šæœŸå¯¿é™©èº«æ•…è´£ä»»50ä¸‡å…ƒ+æ„å¤–é™©èº«æ•…è´£ä»»100ä¸‡å…ƒï¼‰ã€‚</li><li>é—¨è¯Šè´£ä»»ï¼šä¿é¢2ä¸‡å…ƒï¼ˆåŒ»ç–—é™©åŒ…å«çš„é—¨æ€¥è¯ŠåŒ»ç–—è´£ä»»2ä¸‡å…ƒï¼‰ã€‚</li><li>ä½é™¢è´£ä»»ï¼šä¿é¢30ä¸‡å…ƒï¼ˆåŒ»ç–—é™©åŒ…å«çš„ä½é™¢åŒ»ç–—è´£ä»»30ä¸‡å…ƒï¼‰ã€‚</li></ol><p>å›¢é™©ä»·æ ¼ä¹‹æ‰€ä»¥â€œäº²æ°‘â€ï¼Œä¸»è¦åŸå› å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€ï¼Œå›¢é™©å¯ä»¥ç®€å•ç±»æ¯”ä¸ºå›¢è´­ï¼Œä¹°çš„äººæ•°å¤šï¼ŒèŠ‚çœäº†ä¸€éƒ¨åˆ†ç®¡ç†æˆæœ¬ï¼Œè‡ªç„¶å°±èƒ½è·å¾—ä¸€å®šçš„ä¼˜æƒ </li><li>ç¬¬äºŒï¼Œå›¢é™©çš„ä¸»è¦é”€å”®å¯¹è±¡æ˜¯ä¼ä¸šäººåŠ›èµ„æºéƒ¨ï¼Œåªè¦è´Ÿè´£äººæ‹æ¿ï¼Œ100ä¸ªå‘˜å·¥å°±ç›´æ¥è´­ä¹°äº†ï¼Œä¸ç”¨ä¸€ä¸ªä¸€ä¸ªåœ°å®£ä¼ ã€ä»‹ç»ï¼Œé—´æ¥é™ä½äº†äº§å“çš„é”€å”®è´¹ç”¨ï¼Œæœ€ç»ˆçš„å®æƒ è½åœ¨äº†æ¯ä¸€ä½å‚ä¿å‘˜å·¥èº«ä¸Š</li><li>ç¬¬ä¸‰ï¼Œä»¥ä¼ä¸šåä¹‰æŠ•ä¿ï¼Œå‚ä¿äººå‘˜çš„å·¥ä½œç¯å¢ƒå’Œæ€§è´¨ç›¸å¯¹ä¸€è‡´ï¼Œå¤–éƒ¨é£é™©å¯æ§ï¼Œä½•å†µä¸å°‘ä¼ä¸šè¿˜æœ‰å…¥èŒä½“æ£€ï¼Œå¯ä»¥å¾ˆå¥½è§£å†³å®¢æˆ·çš„é€†é€‰æ‹©å’Œå¥åº·é—®é¢˜</li></ul><h4 id="å›¢é™©å¸¦æ¥çš„â€œä¿é™©å¹»è§‰â€">å›¢é™©å¸¦æ¥çš„â€œä¿é™©å¹»è§‰â€</h4><p>ä¸€èˆ¬å…¬å¸å›¢é™©çš„ä¿é™©äº§å“çš„ä¿éšœæœŸé™éƒ½æ˜¯ä¸€å¹´ï¼Œå¦‚æœå®Œå…¨ä¾èµ–å…¬å¸ä¿é™©ï¼Œæˆ‘ä»¬ä¸€æ—¦ç¦»èŒå°±ä¼šé¢ä¸´ä¿é™©â€œè£¸å¥”â€çš„æƒ…å†µ<br>æ‰€ä»¥ï¼Œå»ºè®®å¤§å®¶ç”¨å®¢è§‚çš„æ€åº¦çœ‹å¾…å…¬å¸ä¸ºå‘˜å·¥è´­ä¹°çš„å›¢é™©ã€‚å®ƒæ˜¯ä¸€ç§æå¥½çš„å‘˜å·¥ç¦åˆ©ï¼Œå®ƒåº”è¯¥æ˜¯å‘˜å·¥è‡ªèº«å·²è´­ä¿é™©çš„æœ‰åŠ›è¡¥å……ï¼Œå´ä¸èƒ½è¢«å½“ä½œå…¨éƒ¨ã€‚</p><h4 id="äº†è§£å…¬å¸çš„å›¢é™©æ”¿ç­–">äº†è§£å…¬å¸çš„å›¢é™©æ”¿ç­–</h4><ul><li>è¿™ä»½å›¢é™©è®¡åˆ’é‡Œæœ‰æ¶µç›–èº«æ•…è´£ä»»çš„äº§å“å—ï¼Ÿ</li><li>å¦‚æœæœ‰ï¼Œä¿é¢æ˜¯å¤šå°‘ï¼Ÿ</li><li>å¦‚æœå‘˜å·¥è·å¾—æ™‹å‡ï¼Œä¿é¢ä¼šéšä¹‹æé«˜å—ï¼Ÿ</li></ul><h1 id="03-é‡ç‚¹å…³æ³¨ï¼šä¸­äº§å¿…å¤‡çš„â€œå››å¤§ä¿é™©é‡‘åˆšâ€">03 é‡ç‚¹å…³æ³¨ï¼šä¸­äº§å¿…å¤‡çš„â€œå››å¤§ä¿é™©é‡‘åˆšâ€</h1><h2 id="é‡å¤§ç–¾ç—…é™©ï¼šä¸ºäº†ä¸è¢«æ”¹å˜çš„äººç”Ÿ">é‡å¤§ç–¾ç—…é™©ï¼šä¸ºäº†ä¸è¢«æ”¹å˜çš„äººç”Ÿ</h2><p>é‡ç–¾é™©çš„è¯ç”Ÿï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£å†³æ”¶å…¥ä¸­æ–­çš„é£é™©ï¼Œç«™åœ¨æ‚£è€…åŠå…¶å®¶äººçš„è§’åº¦ï¼Œä¸ºå·²åœ¨é‡ç—…æ·±æ¸Šçš„å®¶åº­æä¾›é›ªä¸­é€ç‚­èˆ¬çš„ç»æµè¡¥å¿</p><h3 id="é‡ç–¾é™©ç©¶ç«Ÿä¿ä»€ä¹ˆ">é‡ç–¾é™©ç©¶ç«Ÿä¿ä»€ä¹ˆ</h3><h4 id="ä»€ä¹ˆå«â€œé‡å¤§ç–¾ç—…â€ï¼Ÿ">ä»€ä¹ˆå«â€œé‡å¤§ç–¾ç—…â€ï¼Ÿ</h4><p>ä¿ç›‘ä¼šå®‰æ’ä¸­å›½ä¿é™©è¡Œä¸šåä¼šå’Œä¸­å›½åŒ»å¸ˆåä¼šï¼Œåœ¨2007å¹´æ‹¿å‡ºäº†ä¸€ç‰ˆ25ç§é‡ç–¾æ ‡å‡†ï¼Œå›Šæ‹¬æ‰€æœ‰é«˜å‘é‡ç–¾ç±»å‹ï¼ˆå…¶å®ï¼Œåªè¦æ˜¯é‡ç–¾é™©å°±éƒ½åŒ…æ‹¬è¿™25ç§ï¼‰</p><p>ä¿ç›‘ä¼šè®¾å®šçš„è¿™25ç§é‡å¤§ç–¾ç—…ï¼Œå…¶å‘ç”Ÿæ¦‚ç‡è¶…è¿‡95%çš„ç–¾ç—…ç§ç±»ã€‚</p><p>æ‰€ä»¥å¦‚æœä¸€ä¸ªä¿é™©è¯´ä»–åŒ…å«æ›´å¤šçš„é‡ç–¾ï¼Œç„¶åè®©æˆ‘ä»¬å¤šèŠ±é’±ä¹°å®ƒï¼Œå…¶å®æ²¡æœ‰å¤ªå¿…è¦ã€‚</p><h4 id="ä»€ä¹ˆå«â€œç½¹æ‚£â€ï¼Ÿ">ä»€ä¹ˆå«â€œç½¹æ‚£â€ï¼Ÿ</h4><ul><li>ç¬¬ä¸€ï¼Œç—…æƒ…è¾¾åˆ°æŸä¸ªæ ‡å‡†ï¼Œç›¸å½“äºç¡®è¯Šå³èµ”ï¼Œæ¯”å¦‚æ¶æ€§è‚¿ç˜¤</li><li>ç¬¬äºŒï¼ŒæŠ•ä¿äººä¸ºæ²»ç–—æŸç§ç–¾ç—…è€Œæ¥å—äº†æŸç§æ²»ç–—æ–¹æ³•ã€‚æ¯”å¦‚å¿ƒè„ç“£è†œæ‰‹æœ¯</li><li>ç¬¬ä¸‰ï¼ŒæŸç§çŠ¶æ€æŒç»­äº†ä¸€æ®µæ—¶é—´ã€‚æ¯”å¦‚è„‘ä¸­é£åé—ç—‡</li></ul><h3 id="é™¤äº†é‡å¤§ç–¾ç—…ï¼Œé‡ç–¾é™©è¿˜ä¿è¿™äº›">é™¤äº†é‡å¤§ç–¾ç—…ï¼Œé‡ç–¾é™©è¿˜ä¿è¿™äº›</h3><p>å½“é‡ç–¾é™©çš„è´£ä»»åªæœ‰é‡å¤§ç–¾ç—…æ—¶ï¼Œæ¶ˆè´¹è€…ç†æ‰€å½“ç„¶åœ°æå‡ºäº†ä¸€ä¸ªæŒ¯è‹å‘è©çš„é—®é¢˜ï¼šå¦‚æœæˆ‘ä¸€è¾ˆå­æ²¡å¾—é‡ç–¾ï¼Œè¿™ä¿è´¹å²‚ä¸æ˜¯ç™½äº¤äº†ï¼Ÿ</p><p>å¥½ï¼Œä¸ºäº†ä¸è®©ä½ ç™½äº¤ï¼Œä¿é™©å…¬å¸ç´¢æ€§å¢åŠ äº†å¾ˆå¤šå…¶ä»–è´£ä»»ï¼Œ<strong>â€œé¡ºä¾¿â€æå‡äº†ä¿è´¹</strong>ã€‚ä¹°å–åŒæ–¹éƒ½é«˜å…´ï¼Œè¿™ç§å•†ä¸šæ¨¡å¼å ªç§°å®Œç¾ã€‚</p><ul><li>åœ¨æ–°å¢çš„è´£ä»»é‡Œï¼Œç¬¬ä¸€ç±»æ˜¯â€œèº«æ•…è´£ä»»â€ã€‚è¿™ç§åŒ…å«èº«æ•…è´£ä»»çš„é‡ç–¾é™©ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥â€œæå‰ç»™ä»˜â€ã€‚<ul><li>è¿™é‡Œçš„æå‰æŒ‡çš„æ˜¯é‡ç–¾ã€èº«æ•…äºŒè€…ä¸­å“ªä¸ªå…ˆå‘ç”Ÿï¼Œå°±ç»™ä»˜å“ªä¸ªã€‚</li><li>æå‰ç»™ä»˜ä¸è¿‡æ˜¯ä¸€ç§äº§å“è®¾è®¡ç½¢äº†ï¼Œåƒä¸‡åˆ«è§‰å¾—å®ƒæ˜¯ä¸€é¡¹ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚</li></ul></li><li>ç¬¬äºŒç±»æ–°å¢è´£ä»»æ˜¯è½»ç—‡å’Œä¸­ç—‡è´£ä»»</li><li>ç¬¬ä¸‰ç±»æ–°å¢è´£ä»»æ˜¯é’ˆå¯¹é‡å¤§ç–¾ç—…çš„èŠ±æ ·èµ”ä»˜æ–¹å¼ã€‚æ¯”å¦‚é‡ç–¾å’Œè½»ç—‡å¯ä»¥èµ”ä»˜å¤šæ¬¡ï¼Œåˆæ¯”å¦‚æŒ‘å‡ºæŸå‡ ä¸ªç—…ç§é¢å¤–èµ”ä»˜50%çš„ä¿é¢ï¼Œå†æ¯”å¦‚æŠ•ä¿åå‰10å¹´äº«å—ä¿é¢é¢å¤–å¢åŠ 50%ã€‚</li></ul><p>ä¸Šé¢è¯´çš„è¿™äº›éƒ½æ˜¯åœ¨<strong>å¢åŠ ä¿è´¹çš„åŸºç¡€ä¸Š</strong>å¢åŠ äº†æ›´å¤šçš„è´£ä»»ï¼Œæ‰€ä»¥å½“ä¿é™©å…¬å¸è¯´æˆ‘ä»¬ä¿çš„å¤šçš„æ—¶å€™é™¤éå’Œåˆ«äººä»·æ ¼ä¸€æ ·ï¼Œå¦åˆ™åªæ˜¯åœ¨éª—æˆ‘ä»¬èŠ±æ›´å¤šé’±è€Œå·²ã€‚</p><h3 id="é‡ç–¾é™©çš„ä¿é¢åŠå…¶ä»–">é‡ç–¾é™©çš„ä¿é¢åŠå…¶ä»–</h3><h4 id="å¦‚ä½•ç¡®å®šä¿é¢">å¦‚ä½•ç¡®å®šä¿é¢</h4><ul><li>æ‚£é‡ç–¾åï¼Œæ‚£è€…æ™®éé¢ä¸´çš„æ˜¯3~5å¹´çš„æ²»ç–—åº·å¤æœŸ</li><li>ä¸æ­¤åŒæ—¶ï¼Œé‡ç–¾å¯¼è‡´æ”¶å…¥ä¸­æ–­å°†ä¸ºå®¶åº­å¸¦æ¥æ›´å¤§çš„å‹åŠ›</li><li>å› æ­¤ï¼Œé‡ç–¾é™©çš„<strong>ä¿é¢åº”è‡³å°‘è¦†ç›–æŠ•ä¿äºº3~5å¹´çš„æ”¶å…¥</strong></li><li>å¦‚å¹´æ”¶å…¥20ä¸‡å…ƒçš„ä¿é¢åº”è¯¥åœ¨60ä¸‡ä»¥ä¸Š</li><li>è€Œä¸”åªè¦ç¡®ä¿è¿™æ¬¾é‡ç–¾é™©èƒ½æä¾›60ä¸‡å…ƒçš„é‡ç–¾ä¿é¢ï¼Œæœ‰æ²¡æœ‰èº«æ•…è´£ä»»ã€å¤šæ¬¡èµ”ä»˜ã€æŠ•ä¿äººè±å…ï¼Œéƒ½æ— å…³ç´§è¦</li></ul><h4 id="é‡ç–¾é™©åº”è¯¥ä¿éšœå¤šä¹…å’Œäº¤å¤šå°‘å¹´ä¿è´¹ã€‚">é‡ç–¾é™©åº”è¯¥ä¿éšœå¤šä¹…å’Œäº¤å¤šå°‘å¹´ä¿è´¹ã€‚</h4><p>è®¨è®ºè¿™ä¸ªé—®é¢˜æœ‰ä¸€ä¸ªå‰æï¼šæˆ‘ä»¬é€‰æ‹©çš„æ˜¯é•¿æœŸäº§å“ã€‚</p><p>å¯¹äºé‡ç–¾é™©ã€å®šæœŸå¯¿é™©ï¼Œå¯ä»¥ä¿ç»ˆèº«æˆ–è€…ä¿åˆ°70å²å·¦å³çš„é•¿æœŸäº§å“ï¼Œæ˜¯æˆ‘ä»¬çš„é¦–é€‰â€”â€”ä¸ä»…ä»·æ ¼æ›´åˆ’ç®—ï¼Œä¹Ÿä¸ä¼šå‡ºç°ä¿é™©ä¸­æ–­çš„æƒ…å†µã€‚</p><p>é•¿æœŸé‡ç–¾é™©çš„<strong>ç¼´è´¹æœŸ</strong>å¾€å¾€æœ‰å¤šç§é€‰æ‹©ï¼š</p><ul><li>è¶¸äº¤ï¼ˆä¸€æ¬¡æ€§äº¤å®Œï¼‰</li><li>10å¹´äº¤</li><li>20å¹´äº¤</li><li>å°‘æ•°äº§å“ç”šè‡³è¿˜è®¾è®¡äº†30å¹´äº¤</li></ul><p><strong>ä¿éšœæœŸé™</strong>ï¼š</p><p>ä¿éšœæœŸé™çš„å»¶é•¿ï¼Œä¼šå¸¦æ¥ä¿è´¹çš„å‡é«˜ï¼›æ²¡åŠæ³•ï¼Œä¸€ä¸ªäººå¹´é¾„è¶Šå¤§ï¼Œç½¹æ‚£é‡ç–¾çš„æ¦‚ç‡å°±è¶Šé«˜ã€‚å¦‚æœé¢„ç®—å……è¶³ï¼Œä¿ç»ˆèº«å½“ç„¶æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><p>åœ¨ç¡®ä¿ä¿é¢å……è¶³çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¿é¢æ‹†æˆä¸¤ä¸ªäº§å“æ¥å®ç°ï¼Œä¸€ä¸ªä¿åˆ°é€€ä¼‘ï¼Œå¦ä¸€ä¸ªä¿ç»ˆèº«</p><p>å¦‚ï¼šå¯¹äºéœ€è¦60ä¸‡å…ƒé‡ç–¾é™©ä¿é¢çš„å°ç‹æ¥è¯´ï¼Œå¯ä»¥é€‰æ‹©ä¹°<strong>ä¸€ä»½ä¿ç»ˆèº«çš„30ä¸‡å…ƒä¿é¢</strong>çš„é‡ç–¾é™©ï¼Œå†ä¹°<strong>ä¸€ä»½ä¿åˆ°70å²çš„30ä¸‡å…ƒä¿é¢</strong>çš„é‡ç–¾é™©ã€‚è¿™æ¯”ç›´æ¥è´­ä¹°ä¸€ä»½ä¿ç»ˆèº«çš„60ä¸‡å…ƒä¿é¢çš„é‡ç–¾é™©ï¼ŒèŠ±è´¹æ›´å°‘</p><h2 id="å®šæœŸå¯¿é™©ï¼šè§£å†³äººç”Ÿä¸­æœ€å¤§çš„é£é™©">å®šæœŸå¯¿é™©ï¼šè§£å†³äººç”Ÿä¸­æœ€å¤§çš„é£é™©</h2><h3 id="è°é€‚åˆä¹°å¯¿é™©">è°é€‚åˆä¹°å¯¿é™©</h3><p>å¦‚æœè¯´é‡ç–¾é™©çš„èµŒæ³¨æ˜¯ç—…ï¼Œå¯¿é™©çš„èµŒæ³¨å°±æ˜¯å‘½ã€‚å®šæœŸå¯¿é™©èµŒçš„åˆ™æ˜¯ä¸€æ®µæ—¶é—´çš„å‘½ã€‚æ¯”å¦‚æŠ•ä¿äººäº30å¹´å†…èº«æ•…ï¼Œå—ç›Šäººå³å¯è·å¾—ç†èµ”æ¬¾ã€‚</p><p>ä¸€èˆ¬çš„å®šæœŸå¯¿é™©ï¼Œé™¤äº†ä¿éšœèº«æ•…ï¼Œè¿˜ä¼šæŠŠå…¨æ®‹ä¹Ÿè§†ä½œä¸èº«æ•…ç­‰åŒçš„è´£ä»»ã€‚</p><ul><li>å•èº«çš„äººç†åº”å…³å¿ƒçˆ¶æ¯çš„å…»è€é—®é¢˜</li><li>æ–°å©šçš„äººä¼šå¢åŠ å¯¹å¦ä¸€åŠçš„è€ƒè™‘</li><li>æœ‰äº†å­©å­åï¼Œè´£ä»»æ›´é‡</li></ul><h4 id="æ„å¤–é™©å’Œå¯¿é™©å¯¹æ¯”">æ„å¤–é™©å’Œå¯¿é™©å¯¹æ¯”</h4><p>è¿™é‡Œéœ€è¦é¢å¤–å¼ºè°ƒä¸€ç‚¹ã€‚è°ˆåˆ°èº«æ•…é£é™©ï¼Œå¾ˆå¤šäººä¼šè”æƒ³åˆ°æ„å¤–é™©ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¹Ÿæœ‰èº«æ•…ä¿éšœå—ï¼Ÿ</p><p>â€œç–¾ç—…â€å’Œâ€œæ„å¤–â€ä¸ºå æ¯”æœ€å¤§çš„ä¸¤ç±»æ­»äº¡åŸå› ï¼Œåˆ†åˆ«ä¸º79.3%å’Œ18.9%ã€‚</p><p>æ‰€ä»¥ï¼Œå•çº¯è´­ä¹°æ„å¤–é™©ï¼Œæ˜¯æ— æ³•è§£å†³èº«æ•…çš„é£é™©çš„ã€‚</p><h3 id="å¦‚ä½•é€‰è´­å®šæœŸå¯¿é™©ï¼Ÿ">å¦‚ä½•é€‰è´­å®šæœŸå¯¿é™©ï¼Ÿ</h3><h4 id="ç¡®å®šä¿é¢æ˜¯å…³é”®æ€§çš„ç¬¬ä¸€æ­¥">ç¡®å®šä¿é¢æ˜¯å…³é”®æ€§çš„ç¬¬ä¸€æ­¥</h4><p>ä¿é¢çš„é«˜ä½ï¼Œå†³å®šäº†æŠ•ä¿äººèº«æ•…åä»–çš„å¦»å­ã€çˆ¶æ¯æˆ–è€…å­©å­èƒ½æ‹¿åˆ°å¤šå°‘è¡¥å¿ã€‚å®šæœŸå¯¿é™©çš„ä¿é¢ï¼Œä¸»è¦å–å†³äºä¸‰ä¸ªå› ç´ ã€‚</p><ul><li>ä¸€æ˜¯ä¸ªäººå’Œå®¶åº­çš„å€ºåŠ¡é¢åº¦ï¼Œæ¯”å¦‚æˆ¿è´·ã€è½¦è´·ç­‰ï¼Œç¡®ä¿ä¸€æ–¹èº«æ•…åï¼Œå€ºåŠ¡ä¸è½¬å«åˆ°å¦ä¸€æ–¹æˆ–çˆ¶æ¯èº«ä¸Š</li><li>äºŒæ˜¯å®¶åº­æˆå‘˜çš„åŸºæœ¬ç”Ÿæ´»æˆæœ¬ã€‚å¦‚æœå®¶åº­æ¯å¹´çš„å¼€é”€ä¸º20ä¸‡å…ƒï¼Œé‚£ä¹ˆèº«æ•…ç†èµ”é‡‘è‡³å°‘åº”ä¸º100ä¸‡å…ƒï¼Œä»¥è´Ÿæ‹…å®¶åº­æœªæ¥5â€”10å¹´çš„åŸºæœ¬ç”Ÿæ´»å¼€é”€ã€‚</li><li>ä¸‰æ˜¯çˆ¶æ¯çš„å…»è€æ”¯å‡ºï¼Œè¿™ç¬”è´¹ç”¨çš„è®¡ç®—é€»è¾‘å’Œä¸Šä¸€ä¸ªç±»ä¼¼ã€‚</li></ul><h4 id="å®šæœŸå¯¿é™©è¿˜è¦è€ƒè™‘çš„é—®é¢˜æ˜¯ä¿éšœæœŸé™">å®šæœŸå¯¿é™©è¿˜è¦è€ƒè™‘çš„é—®é¢˜æ˜¯ä¿éšœæœŸé™</h4><p>åˆ°åº•è¦ä¿åˆ°å¤šå¤§å¹´é¾„å‘¢ï¼Ÿæˆ‘ä¸ªäººå»ºè®®ï¼Œä»¥é€€ä¼‘å¹´é¾„ä¸ºæ ‡å‡†ï¼Œ60å²æˆ–70å²çš†å¯ã€‚</p><p>è‡³äºç¼´è´¹å¹´é™çš„é€‰æ‹©ï¼Œæˆ‘å»ºè®®å°½å¯èƒ½æ‹‰é•¿ï¼Œ20å¹´äº¤æˆ–30å¹´äº¤çš†å¯ã€‚ç¼´è´¹å¹´é™è¶Šé•¿ï¼Œå¹´å‡ä¿è´¹è¶Šä½ï¼Œä»è€Œåšåˆ°ç”¨å°½å¯èƒ½å°‘çš„é’±å»æ’¬åŠ¨å°½å¯èƒ½é«˜çš„ä¿é¢ã€‚</p><h4 id="ä¿é¢ã€ä¿éšœæœŸé™å’Œç¼´è´¹å¹´é™éƒ½ç¡®å®šåï¼Œæˆ‘ä»¬åœ¨é€‰è´­å…·ä½“äº§å“æ—¶ï¼Œè¿˜è¦æ ¼å¤–å…³æ³¨ä¸‰ä¸ªæ–¹é¢ï¼š">ä¿é¢ã€ä¿éšœæœŸé™å’Œç¼´è´¹å¹´é™éƒ½ç¡®å®šåï¼Œæˆ‘ä»¬åœ¨é€‰è´­å…·ä½“äº§å“æ—¶ï¼Œè¿˜è¦æ ¼å¤–å…³æ³¨ä¸‰ä¸ªæ–¹é¢ï¼š</h4><ul><li>ç¬¬ä¸€ï¼Œæ ¸ä¿æ˜¯å¦å®½æ¾ã€‚è¿™æ˜¯æœ€é‡è¦çš„ï¼Œå› ä¸ºå¦‚æœå¥åº·å‘ŠçŸ¥éå¸¸ä¸¥æ ¼ï¼Œæƒ³ä¹°ä¹Ÿä¹°ä¸äº†ï¼Œä½•è°ˆå…¶ä»–ï¼Ÿæ¯”å¦‚ï¼Œæœ‰çš„å®šæœŸå¯¿é™©ä¸æ¥å—ä¹™è‚å°ä¸‰é˜³æ‚£è€…ï¼Œæœ‰çš„ä¸æ¥å—é«˜å±èŒä¸šä»ä¸šè€…ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€å®šè¦å¼„æ¸…æ¥šæŠ•ä¿è¦æ±‚å†ä¹°ï¼Œå°½é‡é¿å…ç†èµ”æ—¶çš„æ½œåœ¨çº çº·ï¼Œæ‰èƒ½çœŸæ­£åšåˆ°å®‰å¿ƒã€‚</li><li>ç¬¬äºŒï¼Œé™¤å¤–è´£ä»»å¤šä¸å¤šã€‚å‰æ–‡åœ¨åˆ†æå¦‚ä½•é˜…è¯»ä¿é™©æ¡æ¬¾çš„æ—¶å€™ï¼Œä¸“é—¨å¼ºè°ƒè¦å…³æ³¨é™¤å¤–è´£ä»»ã€‚æ¯”å¦‚ï¼Œæœ‰çš„å®šæœŸå¯¿é™©æ˜ç¡®æŒ‡å‡ºï¼Œå› ä¸ºæˆ˜äº‰ã€å†›äº‹æš´ä¹±å¯¼è‡´çš„æ­»äº¡ï¼Œå®ƒä»¬æ¦‚ä¸è´Ÿè´£ã€‚é‚£ä¹ˆï¼Œå¯¹äºå»ä¸­ä¸œã€éæ´²ç­‰åœ°åŒºæ—…æ¸¸æˆ–å·¥ä½œçš„ä¸­å›½äººæ¥è¯´ï¼Œè¿™ç§å®šæœŸå¯¿é™©å°±å¾—æ…é‡è€ƒè™‘è´­ä¹°äº†ã€‚</li><li>ç¬¬ä¸‰ï¼Œä»·æ ¼ä½ä¸ä½ã€‚å¦‚æœä¸Šé¢å‡ æ¡æ ‡å‡†æ¯”è¾ƒèµ·æ¥éƒ½å·®ä¸å¤šï¼Œé—®é¢˜å°±å˜ç®€å•äº†ï¼šå“ªä¸ªäº§å“ä¾¿å®œå°±é€‰æ‹©å“ªä¸ªã€‚</li></ul><h2 id="å•†ä¸šåŒ»ç–—é™©ï¼šè®©é«˜é¢åŒ»ç–—å¼€æ”¯ä¸å†å¯æ€•">å•†ä¸šåŒ»ç–—é™©ï¼šè®©é«˜é¢åŒ»ç–—å¼€æ”¯ä¸å†å¯æ€•</h2><h3 id="ç¤¾ä¼šåŒ»ç–—ä¿é™©">ç¤¾ä¼šåŒ»ç–—ä¿é™©</h3><p>åœ¨ç”¨åŒ»ä¿å¡çœ‹ç—…çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éƒ½æ¥è§¦è¿‡ä¸€äº›é™Œç”Ÿçš„åè¯ï¼Œæ¯”å¦‚èµ·ä»˜çº¿ã€è¯å“ç›®å½•ã€è‡ªè´¹è¯ã€æŠ¥é”€é¢åº¦ç­‰ã€‚</p><ul><li>èµ·ä»˜çº¿ï¼šçš„æ„æ€æ˜¯ï¼Œæ¯å¹´åªæœ‰èŠ±åˆ°ä¸€å®šé‡‘é¢ï¼Œæ‰èƒ½å¼€å§‹æŠ¥é”€ï¼Œå¦åˆ™å°±éƒ½æ˜¯è‡ªè´¹</li><li>è¯å“ç›®å½•ï¼šæŒ‡çš„æ˜¯åœ¨åŒ»ä¿ç³»ç»Ÿä¸­ï¼Œå¯¹äºåŒ»ç–—æœºæ„å¼€å…·çš„è¯å“åšäº†ä¸åŒåˆ†ç±»ï¼Œä¸åŒç±»å‹çš„è¯å“æŠ¥é”€é¢åº¦ä¹Ÿä¸ä¸€æ ·ï¼Œæœ‰çš„å¯å…¨éƒ¨æŠ¥é”€ï¼Œæœ‰çš„åˆ™åªå¯æŠ¥é”€ä¸€éƒ¨åˆ†ï¼Œè¿˜æœ‰çš„è¯å…¨éƒ¨è¦è‡ªè´¹è´­ä¹°</li><li>é”€é¢åº¦å¾ˆå¥½ç†è§£ï¼Œå³ä½¿è¯å“ã€æ²»ç–—ç­‰éƒ½åœ¨æŠ¥é”€èŒƒå›´å†…ï¼ŒåŒ»ä¿ä¹Ÿä¸æ˜¯æ— é™åˆ¶çš„æŠ¥é”€ï¼Œæ•´ä½“æ¥çœ‹ï¼Œæ¯å¹´çš„æŠ¥é”€é¢åº¦èŒƒå›´ä¸º20ä¸‡~30ä¸‡å…ƒï¼›å¯¹äºç½¹æ‚£é‡å¤§ç–¾ç—…çš„æ‚£è€…æ¥è¯´ï¼Œè¿™ä¸€é¢åº¦æ ¹æœ¬æ— æ³•æ»¡è¶³ä»–ä»¬é•¿æœŸã€æ˜‚è´µçš„æ²»ç–—éœ€æ±‚ã€‚</li></ul><h3 id="åŒ»ä¿ä¸ç®¡çš„ï¼Œè®©å•†ä¸šåŒ»ç–—ä¿é™©æ¥ç®¡">åŒ»ä¿ä¸ç®¡çš„ï¼Œè®©å•†ä¸šåŒ»ç–—ä¿é™©æ¥ç®¡</h3><p>åŒ»ç–—é™©å…¶å®åªåŒ…æ‹¬ä¸¤ç§äº§å“</p><h4 id="ç¬¬ä¸€ç§æ˜¯åŒ…å«é—¨è¯Šè´£ä»»çš„å•†ä¸šåŒ»ç–—ä¿é™©ï¼Œå¯æš‚ä¸”ç§°ä¹‹ä¸ºé—¨è¯ŠåŒ»ç–—ä¿é™©">ç¬¬ä¸€ç§æ˜¯åŒ…å«é—¨è¯Šè´£ä»»çš„å•†ä¸šåŒ»ç–—ä¿é™©ï¼Œå¯æš‚ä¸”ç§°ä¹‹ä¸ºé—¨è¯ŠåŒ»ç–—ä¿é™©</h4><p>è¿™ç§äº§å“ä¿é¢ä¸é«˜ï¼Œä¸€èˆ¬æ˜¯å‡ åƒå…ƒã€‚æœ‰çš„é—¨è¯ŠåŒ»ç–—ä¿é™©ä¼šè®¾ç½®ä¸€ä¸ªå…èµ”é¢ï¼Œæ¯”å¦‚å•æ¬¡100å…ƒæˆ–è€…ç´¯è®¡500å…ƒã€‚å…èµ”é¢å’Œæ”¿åºœåŒ»ä¿èµ·ä»˜çº¿æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼Œéƒ½æ˜¯ä¸ºäº†å‡å°‘ç†èµ”æ”¯å‡ºï¼Œå®é™…ä¸Šä¹Ÿèµ·åˆ°äº†é™ä½ä¿è´¹çš„ä½œç”¨ã€‚</p><h4 id="ç¬¬äºŒç§æ˜¯åŒ…å«ä½é™¢è´£ä»»çš„å•†ä¸šåŒ»ç–—ä¿é™©ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä½é™¢åŒ»ç–—ä¿é™©ã€‚">ç¬¬äºŒç§æ˜¯åŒ…å«ä½é™¢è´£ä»»çš„å•†ä¸šåŒ»ç–—ä¿é™©ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä½é™¢åŒ»ç–—ä¿é™©ã€‚</h4><p>è¿™ç±»äº§å“çš„ä¿é¢å°±é«˜å¤šäº†ï¼Œå‡ åä¸‡å…ƒç”šè‡³ä¸Šç™¾ä¸‡å…ƒéƒ½å¾ˆå¸¸è§ã€‚å’Œé—¨è¯ŠåŒ»ç–—ä¿é™©ç›¸æ¯”ï¼Œä½é™¢åŒ»ç–—ä¿é™©æ˜¯ä¸‹æ–‡è¦é‡ç‚¹ä»‹ç»çš„äº§å“ã€‚</p><p>èƒ½è¢«ç§°ä½œé£é™©çš„ï¼Œå¿…ç„¶æ„å‘³ç€è´¢åŠ¡ä¸Šçš„å·¨å¤§å½±å“ã€‚æ‰€ä»¥å’Œå‡ åä¸‡ç”šè‡³ä¸Šç™¾ä¸‡å…ƒçš„åŒ»ç–—æ”¯å‡ºç›¸æ¯”ï¼Œå‡ åƒå…ƒçš„é—¨è¯Šã€ä½é™¢è´¹ç”¨ï¼ŒçœŸçš„ç§°ä¸ä¸Šé£é™©ã€‚</p><h3 id="ä¹°äº†é‡ç–¾é™©ï¼Œè¿˜è¦ä¹°åŒ»ç–—é™©å—">ä¹°äº†é‡ç–¾é™©ï¼Œè¿˜è¦ä¹°åŒ»ç–—é™©å—</h3><h4 id="é‡ç–¾é™©å’Œå•†ä¸šåŒ»ç–—æœ€é‡è¦çš„åŒºåˆ«ï¼Œæ˜¯ä¿é™©å…¬å¸çš„ç†èµ”æ–¹å¼ä¸ä¸€æ ·">é‡ç–¾é™©å’Œå•†ä¸šåŒ»ç–—æœ€é‡è¦çš„åŒºåˆ«ï¼Œæ˜¯ä¿é™©å…¬å¸çš„ç†èµ”æ–¹å¼ä¸ä¸€æ ·</h4><ul><li><p>é‡ç–¾é™©æœ‰ç‚¹å„¿åƒä¸€é”¤å­ä¹°å–ï¼Œåªè¦ç¬¦åˆæ¡æ¬¾è§„å®šï¼Œä¿é™©å…¬å¸å°±ä¼šæŠŠç†èµ”æ¬¾ä¸€æ¬¡æ€§æ‰“ç»™ä½ ï¼Œæ— è®ºæ˜¯å‡ ä¸‡å…ƒè¿˜æ˜¯å‡ åä¸‡å…ƒã€‚</p></li><li><p>å•†ä¸šåŒ»ä¿å°±ä¸ä¸€æ ·äº†ï¼ŒèŠ±å¤šå°‘æ‰èƒ½èµ”å¤šå°‘ï¼Œä¿é¢ä»…ä»£è¡¨å¯æŠ¥é”€é¢åº¦çš„ä¸Šé™ï¼Œè€Œä½ ä¸ä¸€å®šèƒ½èŠ±æ‰è¿™ä¹ˆå¤šé’±</p></li></ul><p>å¦‚æœä¸€ä¸ªäººç½¹æ‚£å½±å“æ­£å¸¸ç”Ÿæ´»çš„é‡å¤§ç–¾ç—…ï¼Œé‚£ä»–ä¸»è¦é¢ä¸´çš„é—®é¢˜æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯æ²»ç–—è´¹ç”¨å¤ªé«˜ï¼Œæç©ºå®¶åº•ï¼›äºŒæ˜¯æ— æ³•ç»§ç»­å·¥ä½œï¼Œå¤±å»æ”¶å…¥ã€‚å‰è€…å¯ä»¥é å•†ä¸šåŒ»ç–—ä¿é™©è§£å†³ï¼Œåè€…åˆ™åªèƒ½é é‡ç–¾é™©è§£å†³ï¼Œä¸¤ç±»ä¿é™©çš„åŠŸèƒ½ä¸ä¸€æ ·ã€‚</p><h4 id="é‡ç–¾é™©å’Œå•†ä¸šåŒ»ç–—ä¿é™©åœ¨å®šä»·æ–¹é¢çš„åŒºåˆ«">é‡ç–¾é™©å’Œå•†ä¸šåŒ»ç–—ä¿é™©åœ¨å®šä»·æ–¹é¢çš„åŒºåˆ«</h4><p>é•¿æœŸé‡ç–¾é™©æ¯å¹´çš„ä¿è´¹æ˜¯æ’å®šçš„ï¼Œå•†ä¸šåŒ»ç–—ä¿é™©çš„ä¿è´¹åˆ™ä¼šéšç€è¢«ä¿é™©äººå¹´é¾„çš„å¢åŠ è€Œä¸Šè°ƒ</p><h4 id="é‡ç–¾é™©å’Œå•†ä¸šåŒ»ç–—ä¿é™©åœ¨ç»­ä¿æ–¹é¢çš„åŒºåˆ«">é‡ç–¾é™©å’Œå•†ä¸šåŒ»ç–—ä¿é™©åœ¨ç»­ä¿æ–¹é¢çš„åŒºåˆ«</h4><p>ç›®å‰å¸‚åœºä¸Šå¤§å¤šæ•°åŒ»ç–—é™©éƒ½æ˜¯ä¸€å¹´æœŸäº§å“ï¼Œå¦‚æœç¬¬äºŒå¹´ä½ æƒ³ç»§ç»­æŠ•ä¿ï¼Œå¾—å…ˆçœ‹çœ‹ä¿é™©æ¡æ¬¾æ˜¯æ€ä¹ˆè§„å®šçš„ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li>ç¬¬ä¸€ç§æ˜¯ï¼Œå–ä¸å–ç»™ä½ ï¼Œæˆ‘è¯´äº†ç®—ã€‚æŠ•ä¿äººçš„ç»­ä¿ç”³è¯·é¡»ç»ä¿é™©äººå®¡æ ¸åŒæ„ï¼ŒæŠ•ä¿äººç”³è¯·ç»­ä¿æ—¶ï¼Œä¿é™©äººæœ‰æƒå¯¹è´¹ç‡è¿›è¡Œè°ƒæ•´ã€‚</li><li>ç¬¬äºŒç§è§„å®šæ˜¯ï¼Œåªè¦è¿™ä¸ªäº§å“è¿˜åœ¨é”€å”®ï¼Œä¿é™©å…¬å¸å°±è‚¯å®šä¼šå–ç»™ä½ ã€‚è¿ç»­æŠ•ä¿æ—¶ï¼Œä¿é™©äººä¸ä¼šå› ä¸ºæŸä¸€è¢«ä¿é™©äººçš„å¥åº·çŠ¶å†µå˜åŒ–æˆ–å†å²ç†èµ”æƒ…å†µè€Œå•ç‹¬è°ƒæ•´è¯¥è¢«ä¿é™©äººçš„è¿ç»­æŠ•ä¿è´¹ç‡ã€‚</li></ul><h2 id="æ„å¤–é™©ï¼šä¸å®¹å¿½è§†çš„â€œå°â€ä¿é™©">æ„å¤–é™©ï¼šä¸å®¹å¿½è§†çš„â€œå°â€ä¿é™©</h2><h3 id="æ„å¤–é™©ä¿ä»€ä¹ˆã€ä¸ä¿ä»€ä¹ˆ">æ„å¤–é™©ä¿ä»€ä¹ˆã€ä¸ä¿ä»€ä¹ˆ</h3><p>é­å—å¤–æ¥çš„ã€çªå‘çš„ã€éæœ¬æ„çš„ã€éç–¾ç—…çš„ä½¿èº«ä½“å—åˆ°ä¼¤å®³çš„å®¢è§‚äº‹ä»¶ã€‚è‡ªç„¶æ­»äº¡ã€ç–¾ç—…èº«æ•…ã€çŒæ­»ã€è‡ªæ€åŠè‡ªä¼¤å‡ä¸å±äºæ„å¤–ä¼¤å®³ã€‚</p><p>åœ¨æ¯ä»½æ„å¤–é™©çš„ä¿é™©æ¡æ¬¾é‡Œï¼Œä½ éƒ½èƒ½çœ‹åˆ°è¿™æ ·çš„æè¿°ã€‚è¿™æ®µè¯è¡¨è¾¾äº†ä¸¤å±‚æ„æ€ï¼š</p><ul><li><p>ç¬¬ä¸€ï¼Œå¤–æ¥çš„ã€çªå‘çš„ã€éæœ¬æ„çš„ã€éç–¾ç—…çš„ä½¿èº«ä½“å—åˆ°ä¼¤å®³çš„å®¢è§‚äº‹ä»¶ï¼Œå±äºæ„å¤–ï¼›</p></li><li><p>ç¬¬äºŒï¼Œè‡ªç„¶æ­»äº¡ã€ç–¾ç—…èº«æ•…ã€çŒæ­»ã€è‡ªæ€åŠè‡ªä¼¤ï¼Œä¸å±äºæ„å¤–ã€‚</p></li></ul><p>é™¤äº†çŒæ­»ï¼Œæ„å¤–é™©è¿˜æœ‰ä¸€äº›â€œä¸ä¿â€ï¼š</p><ul><li>æ„å¤–é™©é€šå¸¸ä¸ä¿é«˜å±èŒä¸šä»ä¸šè€…</li><li>é™¤äº†ç‰¹å®šäººç¾¤â€œä¸ä¿â€ï¼Œè¿˜æœ‰æŸç±»åœ°åŒºâ€œä¸ä¿â€ã€‚å…³äºæ„å¤–åŒ»ç–—è´£ä»»ï¼Œä¿é™©æ¡æ¬¾ä¸­å¾€å¾€ä¼šæœ‰ä¸€ä¸ªè¡¥å……æè¿°ï¼šåªæ‰¿æ‹…ä¸­åäººæ°‘å…±å’Œå›½å›½å¢ƒå†…ï¼ˆä¸åŒ…æ‹¬æ¸¯æ¾³å°åœ°åŒºï¼‰åŒ»é™¢äº§ç”Ÿçš„åŒ»ç–—è´¹ç”¨å’Œæ”¯å‡ºã€‚</li><li>æœ€åä¸€ä¸ªâ€œä¸ä¿â€ï¼Œæ˜¯æŸäº›è¡Œä¸ºä¸ä¿ã€‚è¢«ä¿é™©äººä»äº‹æ½œæ°´ã€è·³ä¼ã€æ”€å²©è¿åŠ¨ã€æ¢é™©æ´»åŠ¨ã€æ­¦æœ¯æ¯”èµ›ã€æ‘”è·¤æ¯”èµ›ã€ç‰¹æŠ€è¡¨æ¼”ã€èµ›é©¬ã€èµ›è½¦ç­‰é«˜é£é™©æ´»åŠ¨æœŸé—´å‘ç”Ÿçš„æ„å¤–ï¼Œä¸åœ¨æ„å¤–é™©çš„è´£ä»»èŒƒå›´å†…</li></ul><h3 id="é…ç½®æ„å¤–é™©çš„å‡ æ¡åŸåˆ™">é…ç½®æ„å¤–é™©çš„å‡ æ¡åŸåˆ™</h3><h4 id="åŸåˆ™ä¸€ï¼šå¿…é¡»æ¶µç›–æ„å¤–åŒ»ç–—è´£ä»»ã€‚">åŸåˆ™ä¸€ï¼šå¿…é¡»æ¶µç›–æ„å¤–åŒ»ç–—è´£ä»»ã€‚</h4><p>æ„å¤–å¯¼è‡´çš„ç»“æœæ— éä¸¤ç§ï¼šä¼¤æ®‹å’Œæ­»äº¡ã€‚å› æ­¤ï¼Œæ„å¤–é™©ä¿éšœçš„è´£ä»»æœ‰ä¸‰ä¸ªå¿…é€‰é¡¹ï¼šèº«æ•…ã€ä¼¤æ®‹ã€åŒ»ç–—ã€‚</p><p>æ„å¤–å—ä¼¤åï¼Œæˆ‘ä»¬æœ€å¤§çš„éœ€æ±‚å°±æ˜¯åŒ»ç–—è´¹ç”¨è¡¥å¿ã€‚è€ƒè™‘åˆ°å¾ˆå¤šæ„å¤–äº§ç”Ÿçš„åŒ»ç–—è´¹ç”¨åŒ»ä¿éƒ½æ— æ³•æŠ¥é”€ï¼Œæ„å¤–é™©çš„åŒ»ç–—è´£ä»»å°±æ›´é‡è¦äº†ã€‚</p><p>è‡³äºæ„å¤–åŒ»ç–—çš„ä¿é¢ï¼Œä¸€ä¸¤ä¸‡å°±è¶³å¤Ÿäº†ã€‚å¦‚æœæ˜¯ä¸€ä¸¤ä¸‡å…ƒéƒ½æ²»ä¸å¥½çš„æ„å¤–å—ä¼¤ï¼Œä¸€å®šå·²ç»ä¸¥é‡åˆ°éœ€è¦åšæ‰‹æœ¯æˆ–è€…é•¿æœŸä½é™¢æ²»ç–—äº†ï¼Œè¿™æ—¶ç†èµ”çš„è´£ä»»å°±å¯ä»¥äº¤ç»™ä¸Šæ–‡æåˆ°çš„ä½é™¢åŒ»ç–—ä¿é™©äº†ã€‚</p><p>å¦å¤–ï¼Œä½ å¯èƒ½å¬è¯´è¿‡ä½é™¢æ´¥è´´æˆ–ä½é™¢ä¿é™©é‡‘ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼ŒæŠ•ä¿äººæ¯ä½ä¸€å¤©é™¢ï¼Œä¿é™©å…¬å¸å°±ä¼šæ”¯ä»˜ç»™ä»–å‡ ç™¾å…ƒé’±ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¼¥è¡¥ä½é™¢æœŸé—´çš„æ”¶å…¥æŸå¤±ï¼Œé¢‡ä¸ºè´´å¿ƒï¼Œæœ¬è´¨ä¸Šä¹Ÿå±äºæ„å¤–åŒ»ç–—çš„è´£ä»»èŒƒå›´ã€‚ä½é™¢æ´¥è´´å±äºé”¦ä¸Šæ·»èŠ±å‹ä¿é™©ï¼Œè€Œä¸”è¦èŠ±é’±è´­ä¹°ï¼Œæ‰€ä»¥æœ‰æ²¡æœ‰éƒ½æ— æ‰€è°“ã€‚</p><h4 id="åŸåˆ™äºŒï¼šä¸€èˆ¬æ„å¤–èº«æ•…çš„ä¿é¢åº”è¶³å¤Ÿé«˜ã€‚">åŸåˆ™äºŒï¼šä¸€èˆ¬æ„å¤–èº«æ•…çš„ä¿é¢åº”è¶³å¤Ÿé«˜ã€‚</h4><p>åœ¨è¿™é‡Œæˆ‘è¦æé†’å¤§å®¶æ³¨æ„æŸäº›ä¿é™©å…¬å¸çš„â€œå¥—è·¯â€ã€‚å½“ä½ çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼äºâ€œç™¾ä¸‡èº«ä»·æ„å¤–é™©â€çš„æ‰“æŠ˜äº§å“æ—¶ï¼Œè¯·ä¸€å®šå¼„æ¸…æ¥šå®ƒæ‰€è¯´çš„ç™¾ä¸‡èº«ä»·åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸ªäº§å“é¡µé¢æ˜¯è¿™ä¹ˆæè¿°è¯¥äº§å“çš„ï¼š</p><ul><li><p>ä¸€èˆ¬æ„å¤–èº«æ•…ï¼š10ä¸‡å…ƒ</p></li><li><p>èˆªç©ºæ„å¤–èº«æ•…ï¼š100ä¸‡å…ƒ</p></li></ul><p>æˆ‘æ›´å–œæ¬¢ä»¥ä¸‹è¿™ç±»ä¿é™©ï¼š</p><ul><li><p>ä¸€èˆ¬æ„å¤–èº«æ•…ï¼š100ä¸‡å…ƒ</p></li><li><p>èˆªç©ºæ„å¤–èº«æ•…ï¼š200ä¸‡å…ƒ</p></li></ul><h4 id="åŸåˆ™ä¸‰ï¼šä¸åŒäººç¾¤çš„æ„å¤–é™©ï¼Œä¾§é‡ç‚¹ä¸ä¸€æ ·ã€‚">åŸåˆ™ä¸‰ï¼šä¸åŒäººç¾¤çš„æ„å¤–é™©ï¼Œä¾§é‡ç‚¹ä¸ä¸€æ ·ã€‚</h4><ul><li><p>å¯¹äºèŒåœºç™½é¢†æ¥è¯´ï¼Œæ„å¤–é™©æ—¢è¦æœ‰è¶³å¤Ÿçš„èº«æ•…è¡¥å¿ï¼ˆç”¨äºå¼¥è¡¥å®¶åº­ç»æµæŸå¤±ï¼‰ï¼Œä¹Ÿè¦ä¿è¯å—ä¼¤åæœ‰é’±æ²»ç–—ï¼›</p></li><li><p>ä½†å¯¹äºå­©å­å’Œè€äººæ¥è¯´ï¼Œèº«æ•…è¡¥å¿å°±æ²¡æœ‰åŒ»ç–—è´¹ç”¨è¡¥å¿é‡è¦ï¼Œæ¯•ç«Ÿä»–ä»¬ä¸æ˜¯å®¶é‡Œçš„é¡¶æ¢æŸ±ã€‚</p></li><li><p>å› æ­¤ï¼Œå­©å­å’Œè€äººçš„æ„å¤–é™©ï¼Œåº”ä¾§é‡äºè€ƒè™‘æå‡æ„å¤–åŒ»ç–—çš„ä¿é¢ï¼Œè€Œæ²¡æœ‰å¿…è¦è¿½æ±‚æ„å¤–èº«æ•…çš„é«˜ä¿é¢ã€‚</p></li></ul><h4 id="åŸåˆ™å››ï¼šä¿éšœæ—¶é—´ä¸€å¹´å°±å¤Ÿäº†ã€‚">åŸåˆ™å››ï¼šä¿éšœæ—¶é—´ä¸€å¹´å°±å¤Ÿäº†ã€‚</h4><p>ä¹‹å‰åœ¨ä»‹ç»ä¸€å¹´æœŸäº§å“ç‰¹å¾çš„æ—¶å€™æˆ‘æè¿‡ï¼Œæ„å¤–é™©å’ŒåŒ»ç–—é™©å¤§å¤šä¼šè®¾è®¡æˆçŸ­æœŸé™©ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥éšæ—¶æŒ‰ç…§æ„å¤–å‘ç”Ÿç‡å’ŒåŒ»ç–—æˆæœ¬çš„æ³¢åŠ¨è¿›è¡Œä»·æ ¼è°ƒæ•´ã€‚å› æ­¤ï¼Œæ¯å¹´å„å®¶å…¬å¸çš„æ„å¤–é™©å±‚å‡ºä¸ç©·ï¼Œå¯èƒ½å»å¹´ä¹°çš„äº§å“ï¼Œåˆ°äº†æ˜å¹´å°±æ²¡ä»€ä¹ˆç«äº‰åŠ›äº†ï¼Œè¿™æ—¶ç›´æ¥æ¢ä¸€å®¶å…¬å¸è´­ä¹°å°±å¥½ã€‚ç”±äºæ„å¤–é™©çš„å‡ ä¸ªåŸºæœ¬è´£ä»»éƒ½æ²¡æœ‰ç­‰å¾…æœŸè¿™ä¸€è¯´ï¼Œæ‰€ä»¥å¯ä»¥åšåˆ°æ— ç¼è¡”æ¥ã€‚</p><h1 id="04-ä¼˜åŒ–é…ç½®ï¼šç»™ä¿é™©å‡ä¸ªçº§">04ã€€ä¼˜åŒ–é…ç½®ï¼šç»™ä¿é™©å‡ä¸ªçº§</h1><h2 id="åƒæœ‰é’±äººä¸€æ ·çœ‹ç—…">åƒæœ‰é’±äººä¸€æ ·çœ‹ç—…</h2><h3 id="é«˜ç«¯åŒ»ç–—ï¼Œé«˜ç«¯åœ¨å“ªé‡Œï¼Ÿ">é«˜ç«¯åŒ»ç–—ï¼Œé«˜ç«¯åœ¨å“ªé‡Œï¼Ÿ</h3><ul><li>ç¬¬ä¸€ï¼Œä¿é¢æ›´é«˜ã€‚å‡ åä¸‡å…ƒç”šè‡³å‡ ç™¾ä¸‡å…ƒçš„ä¿é¢éƒ½æ˜¯å°èœä¸€ç¢Ÿï¼Œä»å‡ åƒä¸‡å…ƒåˆ°ä¸è®¾é™ï¼Œé«˜ç«¯åŒ»ç–—çš„ä¿é¢å®Œå…¨è¶…ä¹ä½ çš„æƒ³è±¡ã€‚</li><li>ç¬¬äºŒï¼ŒåŒ»é™¢æ›´å¤šã€æ›´é«˜ç«¯ã€‚ä»ä¸‰ç”²åŒ»é™¢çš„ç‰¹éœ€éƒ¨ã€å›½é™…éƒ¨ï¼Œåˆ°ç§ç«‹åŒ»é™¢ã€å›½é™…åŒ»é™¢ï¼Œè€Œä¸”ä¸é™ä¸­å›½åœ°åŒºï¼Œä»äºšå¤ªåœ°åŒºåˆ°å…¨çƒï¼ŒåŸºæœ¬è¦†ç›–æ‰€æœ‰ç±»å‹çš„åŒ»ç–—æœºæ„ã€‚</li><li>ç¬¬ä¸‰ï¼Œä¿éšœæ›´å…¨é¢ã€‚é™¤äº†ä¼ ç»Ÿçš„é—¨è¯Šã€ä½é™¢ä¸¤å¤§å—ä¹‹å¤–ï¼Œé«˜ç«¯åŒ»ç–—é™©è¿˜åŒ…å«åˆ†å¨©ã€ç‰™ç§‘ã€çœ¼ç§‘ã€ä½“æ£€ç­‰è´£ä»»ï¼Œè¦çŸ¥é“ï¼Œè¿™äº›æ²»ç–—é€šå¸¸éƒ½åœ¨å¸¸è§„åŒ»ç–—é™©çš„é™¤å¤–é¡¹ç›®é‡Œï¼Œä¸€èˆ¬åŒ»ç–—é™©éƒ½ä¸ç®¡ã€‚</li><li>ç¬¬å››ï¼Œå¢å€¼æœåŠ¡æ›´å¤šã€‚</li><li>ç¬¬äº”ï¼Œç†èµ”ä½“éªŒæ›´å¥½ã€‚</li></ul><h2 id="ä¿é™©èƒ½ä¸ºæˆ‘çš„å…»è€åšä»€ä¹ˆï¼Ÿ">ä¿é™©èƒ½ä¸ºæˆ‘çš„å…»è€åšä»€ä¹ˆï¼Ÿ</h2><h3 id="è¯¥ä¸è¯¥ä¹°å…»è€ä¿é™©ï¼Ÿ">è¯¥ä¸è¯¥ä¹°å…»è€ä¿é™©ï¼Ÿ</h3><h3 id="å¯ä¸å¯ä»¥æŠŠä¿é™©å½“ä½œæŠ•èµ„æ–¹å¼">å¯ä¸å¯ä»¥æŠŠä¿é™©å½“ä½œæŠ•èµ„æ–¹å¼</h3><p>è¦å›ç­”ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨excelä¸­çš„IRRå…¬å¼è®¡ç®—å†…éƒ¨æ”¶ç›Šç‡ï¼Œå¦‚æœå†…éƒ¨æ”¶ç›Šç‡èƒ½å¤Ÿè¾¾åˆ°é¢„æœŸå¹¶ä¸”ç°åœ¨æ‰‹å¤´æœ‰é’±å°±å¯ä»¥ä¹°ã€‚</p><p>æ¯”å¦‚å¹´å¤åˆ©6%ä»¥ä¸Šå°±èƒ½è¾¾åˆ°é¢„æœŸï¼Œå¦åˆ™ä¸å¦‚ä¹°å€ºåˆ¸åŸºé‡‘æˆ–è€…æŒ‡æ•°å‹åŸºé‡‘ã€‚</p><h2 id="è¯¥å»é¦™æ¸¯ä¹°ä¿é™©å—ï¼Ÿ">è¯¥å»é¦™æ¸¯ä¹°ä¿é™©å—ï¼Ÿ</h2><p>ç•¥</p><h1 id="05-ä¸ªæ€§åŒ–å®šåˆ¶ï¼šä¿é™©æ–¹æ¡ˆï¼Œä½ è‡ªå·±è¯´äº†ç®—">05 ä¸ªæ€§åŒ–å®šåˆ¶ï¼šä¿é™©æ–¹æ¡ˆï¼Œä½ è‡ªå·±è¯´äº†ç®—</h1><h2 id="å¦‚ä½•ç»™å­©å­ä¹°ä¿é™©">å¦‚ä½•ç»™å­©å­ä¹°ä¿é™©</h2><h3 id="å…ˆåˆ«ç€æ€¥ä¹°å•†ä¸šä¿é™©">å…ˆåˆ«ç€æ€¥ä¹°å•†ä¸šä¿é™©</h3><p>å’Œå¤§äººä¸€æ ·ï¼Œå­©å­ä¹Ÿæ˜¯å¯ä»¥å‚åŠ æ”¿åºœåŒ»ä¿çš„ã€‚åœ¨é…ç½®å•†ä¸šä¿é™©ä¹‹å‰ï¼Œçˆ¶æ¯ä¸€å®šè¦å‚è€ƒå½“åœ°çš„åŒ»ä¿æ”¿ç­–ä¸ºå­©å­åŠç†å°‘å„¿åŒ»ä¿ã€‚</p><p>å°‘å„¿åŒ»ä¿æœ¬è´¨ä¸Šæ˜¯é’ˆå¯¹å„¿ç«¥ç½¹æ‚£é‡å¤§ç–¾ç—…æä¾›çš„é£é™©ä¿éšœã€‚</p><p>æœ‰æ²¡æœ‰åŒ»ä¿ä¹Ÿä¼šå½±å“å­©å­æŠ•ä¿å•†ä¸šä¿é™©çš„ä»·æ ¼ã€‚å°¤å…¶æ˜¯åŒ»ç–—é™©ï¼Œè¢«ä¿é™©äººæœ‰åŒ»ä¿çš„åŒ»ç–—é™©ä»·æ ¼æ›´ä½ã€‚</p><h3 id="å­©å­ä¼šé¢ä¸´å“ªäº›é£é™©">å­©å­ä¼šé¢ä¸´å“ªäº›é£é™©</h3><ul><li>é£é™©ä¸€ï¼šèº«æ‚£å±é‡ç–¾ç—…<ul><li>å­©å­ä¸€æ—¦æ‚£å±é‡ç–¾ç—…ï¼Œé™¤äº†éœ€è¦é•¿æœŸæŠ•å…¥é«˜é¢æ²»ç–—è´¹ç”¨ï¼Œçˆ¶æ¯ä¹Ÿå¯èƒ½ä¸ºäº†ç…§é¡¾å­©å­è€Œè¾æ‰å·¥ä½œã€‚</li><li>å› æ­¤ï¼Œé‡ç–¾é™©å’Œé«˜ä¿é¢ä½é™¢åŒ»ç–—é™©æ˜¯åº”è¯¥é¦–å…ˆä¸ºå­©å­é…ç½®çš„ä¿é™©ã€‚</li><li>é‡ç–¾é™©çš„ä»·å€¼åœ¨äºï¼Œç½¹æ‚£é‡ç–¾åä¸€æ¬¡æ€§è·å¾—å®šé¢èµ”å¿ï¼Œå¯ä½œä¸ºè‡ªè´¹æ²»ç–—è´¹ç”¨å’Œå®¶åº­æ”¶å…¥ä¸­æ–­çš„è¡¥å¿ã€‚</li><li>é«˜é¢ä½é™¢åŒ»ç–—é™©çš„ä»·å€¼åœ¨äºåº”å¯¹é«˜é¢çš„åŒ»ç–—è´¹ç”¨ï¼Œå°¤å…¶æ˜¯è®¸å¤šåŒ»ä¿èŒƒå›´å¤–çš„è‡ªè´¹é¡¹ç›®</li></ul></li><li>é£é™©äºŒï¼šå‘ç”Ÿæ„å¤–å—ä¼¤</li><li>é£é™©ä¸‰ï¼šèº«æ‚£ä¸€èˆ¬ç–¾ç—…</li></ul><h3 id="é…ç½®å„¿ç«¥å•†ä¸šä¿é™©">é…ç½®å„¿ç«¥å•†ä¸šä¿é™©</h3><h4 id="å­©å­ä¸è¯¥ä¹°å“ªäº›ä¿é™©">å­©å­ä¸è¯¥ä¹°å“ªäº›ä¿é™©</h4><ul><li>åŒ…å«èº«æ•…è´£ä»»çš„æ„å¤–é™©ä¸åœ¨æˆ‘ä»¬çš„è®¨è®ºèŒƒå›´å†…</li><li>å®šæœŸå¯¿é™©ã€ç»ˆèº«å¯¿é™©ä¹Ÿæ— éœ€è´­ä¹°</li><li>é™¤æ„ä¹‰ä¸å¤§çš„èº«æ•…è´£ä»»å¤–ï¼Œä¸ºå­©å­è´­ä¹°æ•™è‚²é‡‘ã€å…»è€é‡‘ï¼Œä¼˜å…ˆçº§ä¹Ÿä¸é«˜</li></ul><p><strong>å­©å­çœŸæ­£éœ€è¦çš„å•†ä¸šä¿é™©å…¶å®åªæœ‰ä¸‰æ¬¾ï¼šé‡å¤§ç–¾ç—…é™©ã€æ„å¤–é™©ã€é«˜é¢ä½é™¢åŒ»ç–—é™©ã€‚</strong></p><h4 id="å…³äºå­©å­çš„é‡ç–¾é™©">å…³äºå­©å­çš„é‡ç–¾é™©</h4><p>è¯·è®°ä½ä¸€ä¸ªäº‹å®ï¼šå°‘å„¿ç½¹æ‚£é‡å¤§ç–¾ç—…çš„æ¦‚ç‡éå¸¸ä½ã€‚è¿™ç›´æ¥å†³å®šäº†å„¿ç«¥é‡ç–¾é™©çš„ä»·æ ¼ååˆ†ä¾¿å®œã€‚å› æ­¤ï¼Œä¸ºå­©å­é…ç½®é‡ç–¾é™©ï¼Œä¸€å®šè¦æŠ“ä½ä»·æ ¼ä¼˜åŠ¿ï¼Œå°½å¯èƒ½æé«˜ä¿é¢ï¼Œæ‹‰é•¿æœŸé™ã€‚éƒ½æ˜¯100ä¸‡å…ƒçš„ç»ˆèº«é‡ç–¾é™©ä¿é¢ï¼Œ30å¤šå²ç”·æ€§çš„è´­ä¹°ä»·æ ¼ï¼Œå¯ä»¥è¾¾åˆ°å°å­©å­çš„ä¸¤å€å¤šã€‚</p><p>å­©å­çš„é‡ç–¾é™©åº”è¯¥ä¹°ä¿ç»ˆèº«æˆ–è€…70å²çš„ï¼Œä¸è¦ä¹°ä¿éšœ30å¹´ï¼Œä¸‰åå¹´ä¹‹åå­©å­æ‰ä¸‰ã€å››åå²ï¼Œé‚£æ—¶æ–­ä¿å†æ–°ä¹°ä¿é™©ä¼šæ›´è´µã€‚</p><h4 id="å­©å­æœ€å¥½çš„ä¿é™©æ˜¯çˆ¶æ¯">å­©å­æœ€å¥½çš„ä¿é™©æ˜¯çˆ¶æ¯</h4><p>çˆ¶æ¯è‡ªèº«çš„å¥åº·ä»¥åŠç¨³å®šã€æŒç»­çš„èµšé’±èƒ½åŠ›ï¼Œæ˜¯å­©å­æœ€é‡è¦çš„ä¿é™©ã€‚</p><p><strong>æ€»ç»“ä¸€ä¸‹ä¸ºå­©å­é…ç½®ä¿é™©çš„å‡ ä¸ªå…³é”®ç‚¹ã€‚</strong></p><ol><li><p><strong>ä½œä¸ºçˆ¶æ¯ï¼Œå…ˆæŠŠè‡ªå·±çš„ä¿é™©é…ç½®å¥½ï¼Œå› ä¸ºä½ æ‰æ˜¯å­©å­æœ€å¤§çš„â€œä¿é™©â€ï¼›</strong></p></li><li><p><strong>åœ¨è´­ä¹°ä»»ä½•å•†ä¸šä¿é™©ä¹‹å‰ï¼Œå…ˆä¸ºå­©å­åŠç†å¥½å½“åœ°çš„å°‘å„¿åŒ»ä¿ï¼Œè¿™æ˜¯æ”¿åºœç»™äºˆçš„ç¦åˆ©ï¼Œä¸€å®šè¦å……åˆ†åˆ©ç”¨ï¼›</strong></p></li><li><p><strong>ç»“åˆè‡ªèº«é¢„ç®—ï¼Œé¦–å…ˆé…ç½®é«˜ä¿é¢çš„é‡å¤§ç–¾ç—…é™©å’Œä½é™¢åŒ»ç–—é™©ï¼Œå…¶ä»–çš„ä¿é™©åˆ™é‡åŠ›è´­ä¹°ã€‚</strong></p></li></ol><h2 id="å¦‚ä½•ç»™çˆ¶æ¯ä¹°ä¿é™©">å¦‚ä½•ç»™çˆ¶æ¯ä¹°ä¿é™©</h2><h3 id="ä¸€ä¸ªä¸æ–­å¦¥åé€€è®©çš„è¿‡ç¨‹">ä¸€ä¸ªä¸æ–­å¦¥åé€€è®©çš„è¿‡ç¨‹</h3><p>å…¶å®çˆ¶æ¯é¢ä¸´çš„é£é™©éå¸¸ç®€å•ï¼Œå°±æ˜¯ç–¾ç—…å¼•å‘çš„è´¢åŠ¡é£é™©ã€‚</p><p>è¿™æ ·çœ‹æ¥ï¼Œç»™çˆ¶æ¯é…ç½®ä¿é™©ï¼Œä¸»è¦è€ƒè™‘çš„åº”è¯¥æ˜¯é‡ç–¾é™©ã€åŒ»ç–—é™©å’Œæ„å¤–é™©ã€‚</p><p>å¹´é¾„è¶…è¿‡60å²çš„äººæƒ³è¦æŠ•ä¿é‡ç–¾é™©å’ŒåŒ»ç–—é™©ä¼šæœ‰å¾ˆå¤šé™åˆ¶ï¼š</p><ul><li>ç¬¬ä¸€ï¼Œå¹´é¾„é™åˆ¶ã€‚<ul><li>å‡ ä¹æ‰€æœ‰é‡ç–¾é™©å’ŒåŒ»ç–—é™©çš„æŠ•ä¿å¹´é¾„éƒ½åœ¨0~60å²ã€‚å¯¹é‡ç–¾é™©è€Œè¨€ï¼Œ55å²çš„æŠ•ä¿å¹´é¾„ä¸Šé™æ˜¯æ™®éè§„åˆ™ã€‚</li></ul></li><li>ç¬¬äºŒï¼Œä¿é¢é™åˆ¶ã€‚<ul><li>åŒæ ·ä¸€ä»½ä¿é™©ï¼Œ30å²çš„äººå’Œ50å²çš„äººå¯äº«å—çš„ä¿é¢ä¸Šé™æ˜¯ä¸ä¸€æ ·çš„ã€‚</li><li>ä»¥é‡ç–¾é™©ä¸ºä¾‹ï¼Œå¦‚æœåœ¨ç½‘ä¸Šç›´æ¥æŠ•ä¿ï¼Œ30å²çš„è¢«ä¿é™©äººçš„ä¿é¢ä¸Šé™åŸºæœ¬ä¸º50ä¸‡~60ä¸‡å…ƒï¼Œè€Œ50å²çš„è¢«ä¿é™©äººçš„ä¿é¢ä¸Šé™åªæœ‰10ä¸‡å…ƒã€‚</li></ul></li><li>ç¬¬ä¸‰ï¼Œä¿è´¹å€’æŒ‚ã€‚<ul><li>ä¸€ä½55å²çš„ç”·æ€§è´­ä¹°ä¿é¢ä¸º10ä¸‡å…ƒçš„é‡ç–¾é™©ï¼Œæ¯å¹´éœ€è¦äº¤3500å…ƒå·¦å³ï¼Œäº¤20å¹´ï¼Œæ€»è®¡7ä¸‡å…ƒçš„æ”¯å‡ºå’Œ10ä¸‡å…ƒçš„ä¿é¢ç›¸æ¯”ï¼Œå·®åˆ«ä¸å¤§ã€‚</li></ul></li><li>ç¬¬å››ï¼Œå¥åº·å‘ŠçŸ¥ä¸ç¬¦ã€‚<ul><li>æ‚£æœ‰é«˜è¡€å‹ã€å¿ƒè„ç—…ã€ç³–å°¿ç—…çš„è€å¹´äººï¼Œå¯ä»¥ç›´æ¥å’Œé‡å¤§ç–¾ç—…é™©ã€ä½é™¢åŒ»ç–—é™©è¯´å†è§äº†</li><li>ä¿é™©å…¬å¸ä¹Ÿæ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯æƒ³äº†ä¸€ä¸ªåŠæ³•ï¼šåŒæ–¹å„é€€ä¸€æ­¥ã€‚ä¿é™©å…¬å¸æŠŠä¿éšœèŒƒå›´ç¼©å°ï¼Œé™åˆ¶ä¹Ÿéšä¹‹å‡å°‘ã€‚ä½†è¿™ä¸ªä¿éšœèŒƒå›´ä¸èƒ½å¤ªå°ï¼Œå¾—æœ‰å­˜åœ¨çš„æ„ä¹‰ã€‚</li><li>äºæ˜¯ï¼Œé˜²ç™Œç±»ä¿é™©åº”è¿è€Œç”Ÿã€‚é‡ç–¾é™©æ¶µç›–çš„å‡ åç§ç–¾ç—…ï¼Œåªä¿ç•™ç¬¬ä¸€é¡¹ï¼Œå³æ¶æ€§è‚¿ç˜¤ï¼›ä½é™¢åŒ»ç–—é™©æ¶µç›–çš„æ‰€æœ‰ç–¾ç—…çš„ä½é™¢è´£ä»»ï¼Œä¹Ÿåªä¿ç•™ä¸€é¡¹ï¼Œå³ç™Œç—‡ä½é™¢è´£ä»»ã€‚</li><li>è¿™ç§åšæ³•æœ€å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å¥åº·å‘ŠçŸ¥çš„å†…å®¹å¤§å¹…å‡å°‘ã€‚åªè¦ä¸æ˜¯æ˜“å¼•å‘ç™Œç—‡çš„ç—‡çŠ¶ï¼ˆè‚éƒ¨ç–¾ç—…ã€å™¨å®˜æˆ–ç»„ç»‡çš„ç»“èŠ‚ç­‰ï¼‰ï¼Œä¿é™©å…¬å¸éƒ½ä¸ä»‹æ„ï¼Œé«˜è¡€å‹ã€ç³–å°¿ç—…æ‚£è€…ä¹Ÿå¯ä»¥æŠ•ä¿ã€‚æ¯•ç«Ÿï¼Œé«˜è¡€å‹å¯¼è‡´çš„æ€¥æ€§å¿ƒæ¢—å’Œç³–å°¿ç—…å¯¼è‡´çš„ç»ˆæœ«æœŸè‚¾ç—…æˆ–æˆªè‚¢ï¼Œéƒ½ä¸åœ¨é˜²ç™Œç±»ä¿é™©çš„è´£ä»»èŒƒå›´å†…ã€‚</li></ul></li></ul><h3 id="å…­åˆ†é è§„åˆ’ï¼Œå››åˆ†é å¿ƒæ€">å…­åˆ†é è§„åˆ’ï¼Œå››åˆ†é å¿ƒæ€</h3><p>å“ªæ€•æœ‰é‚£ä¹ˆå¤šçš„é™åˆ¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥è´­ä¹°æ„å¤–é™©ã€é˜²ç™Œé™©ã€é˜²ç™ŒåŒ»ç–—é™©å’Œç³–å°¿ç—…ç‰¹å®šç–¾ç—…é‡ç–¾é™©ã€‚</p><h4 id="å¦‚æœä½ æƒ³ç®€æ˜æ‰¼è¦åœ°æŒæ¡ç»™çˆ¶æ¯ä¹°ä¿é™©çš„æŠ€å·§ï¼Œè¯·è®°ä½ä»¥ä¸‹å‡ ç‚¹ã€‚">å¦‚æœä½ æƒ³ç®€æ˜æ‰¼è¦åœ°æŒæ¡ç»™çˆ¶æ¯ä¹°ä¿é™©çš„æŠ€å·§ï¼Œè¯·è®°ä½ä»¥ä¸‹å‡ ç‚¹ã€‚</h4><ul><li><p>ç¬¬ä¸€ï¼Œç¡®ä¿çˆ¶æ¯åŒæ–¹éƒ½æœ‰ç¤¾ä¼šåŒ»ç–—ä¿é™©ã€‚ä¸ç®¡æ˜¯åŸå¸‚çš„å±…æ°‘åŒ»ä¿ï¼Œè¿˜æ˜¯å†œæ‘çš„â€œæ–°å†œåˆâ€ï¼Œæ²¡æœ‰çš„è¯ï¼Œèµ¶ç´§å…ˆæŠŠç¤¾ä¼šåŒ»ä¿åŠå¥½ã€‚</p></li><li><p>ç¬¬äºŒï¼Œé‡åˆ°ç–‘éš¾æ‚ç—‡ï¼Œä¸å°‘äººä¼šé€‰æ‹©å¸¦çˆ¶æ¯æ¥åŒ—ä¸Šå¹¿ç­‰å¤§åŸå¸‚å°±è¯Šã€‚æ‰€ä»¥ï¼Œè¯·æå‰ç ”ç©¶å¥½åŒ»ä¿çš„å¼‚åœ°ç»“ç®—æµç¨‹ï¼Œç¡®ä¿ä¸è®©åŒ»ä¿â€œç™½äº¤â€ï¼Œè¿™ä¸€ç‚¹éå¸¸æœ‰å¿…è¦ã€‚</p></li><li><p>ç¬¬ä¸‰ï¼Œè¯¦ç»†äº†è§£çˆ¸å¦ˆçš„èº«ä½“å¥åº·æƒ…å†µï¼Œå¯¹ç—‡ä¸‹è¯ä¹°ä¿é™©ã€‚</p></li></ul><h2 id="å¦‚ä½•ç»™è‡ªå·±ä¹°ä¿é™©">å¦‚ä½•ç»™è‡ªå·±ä¹°ä¿é™©</h2><h3 id="18å²ä¿é™©æ¸…å•">18å²ä¿é™©æ¸…å•</h3><ul><li>å­¦ç”Ÿå›¢ä½“ä¿é™©ï¼šåŒ…å«æ„å¤–èº«æ•…/ä¼¤æ®‹è´£ä»»ï¼Œæ„å¤–åŒ»ç–—è´£ä»»ï¼Œä½é™¢åŒ»ç–—è´£ä»»ï¼›é¢„ç®—ä¸º200å…ƒã€‚</li><li>æˆ–è‡ªå·±æŠ•ä¿ï¼š<ul><li>æ„å¤–é™©ï¼šåŒ…å«æ„å¤–èº«æ•…/ä¼¤æ®‹è´£ä»»ï¼Œæ„å¤–åŒ»ç–—è´£ä»»ï¼›é¢„ç®—ä¸º200å…ƒï¼ˆä¿é¢ä¸º50ä¸‡å…ƒï¼‰ã€‚</li><li>åŒ»ç–—é™©ï¼šåŒ…å«ç–¾ç—…å¯¼è‡´çš„ä½é™¢åŒ»ç–—è´£ä»»ï¼Œé¢„ç®—ä¸º200å…ƒã€‚</li></ul></li></ul><h4 id="18å²ä¿éšœé€Ÿè§ˆ">18å²ä¿éšœé€Ÿè§ˆ</h4><ul><li><p>èº«æ•…è¡¥å¿ï¼ˆä»…é™æ„å¤–åŸå› ï¼‰ï¼š50ä¸‡å…ƒã€‚</p></li><li><p>æ„å¤–åŒ»ç–—è¡¥å¿ï¼š1ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li><li><p>ä½é™¢åŒ»ç–—è¡¥å¿ï¼š100ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li></ul><h3 id="22å²æ–°å¢ä¿é™©æƒ…å†µ">22å²æ–°å¢ä¿é™©æƒ…å†µ</h3><p>å®šæœŸå¯¿é™©Aï¼šå—ç›Šäººä¸ºçˆ¶æ¯ï¼Œä¿é¢å¤§çº¦ç›¸å½“äºçˆ¶æ¯5å¹´çš„é€€ä¼‘é‡‘ï¼›é¢„ç®—ä¸ºæ¯å¹´500å…ƒï¼ˆä¿é¢50ä¸‡å…ƒï¼Œä¿éšœæœŸ30å¹´ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚</p><h4 id="ä¿éšœé€Ÿè§ˆ">ä¿éšœé€Ÿè§ˆ</h4><ul><li><p>èº«æ•…è¡¥å¿ï¼ˆä¸é™æ­»äº¡åŸå› ï¼‰ï¼š50ä¸‡å…ƒã€‚</p></li><li><p>é¢å¤–èº«æ•…è¡¥å¿ï¼ˆä»…é™æ„å¤–åŸå› ï¼‰ï¼š50ä¸‡å…ƒã€‚</p></li><li><p>æ„å¤–åŒ»ç–—è¡¥å¿ï¼š1ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li><li><p>ä½é™¢åŒ»ç–—è¡¥å¿ï¼š100ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li></ul><h3 id="28å²æ–°å¢ä¿é™©æƒ…å†µ"><strong>28å²</strong>æ–°å¢ä¿é™©æƒ…å†µ</h3><ul><li><p>å®šæœŸå¯¿é™©Bï¼šå—ç›Šäººä¸ºæ³•å®šå—ç›Šäººï¼Œä¿é¢çº¦ç­‰äº5å€å¹´è–ªï¼›</p></li><li><p>é¢„ç®—ä¸ºæ¯å¹´1000å…ƒï¼ˆä¿é¢80ä¸‡å…ƒï¼Œä¿åˆ°60å²ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚</p></li><li><p>é‡å¤§ç–¾ç—…é™©Aï¼šä¿é¢çº¦ç­‰äºè´­ä¹°æ—¶çš„3å€å¹´è–ªï¼›é¢„ç®—ä¸ºæ¯å¹´5000å…ƒï¼ˆä¿é¢50ä¸‡å…ƒï¼Œä¿åˆ°70å²ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚</p></li></ul><h4 id="28å²ä¿éšœé€Ÿè§ˆ">28å²ä¿éšœé€Ÿè§ˆ</h4><ul><li><p>èº«æ•…è¡¥å¿ï¼ˆä¸é™æ­»äº¡åŸå› ï¼‰ï¼š130ä¸‡å…ƒã€‚</p></li><li><p>é¢å¤–èº«æ•…è¡¥å¿ï¼ˆä»…é™æ„å¤–åŸå› ï¼‰ï¼š50ä¸‡å…ƒã€‚</p></li><li><p>æ„å¤–åŒ»ç–—è¡¥å¿ï¼š1ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li><li><p>ä½é™¢åŒ»ç–—è¡¥å¿ï¼š100ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li><li><p>é‡å¤§ç–¾ç—…è¡¥å¿ï¼š50ä¸‡å…ƒã€‚</p></li></ul><h3 id="32å²æ–°å¢ä¿é™©æƒ…å†µ"><strong>32å²</strong>æ–°å¢ä¿é™©æƒ…å†µ</h3><ul><li><p>æ„å¤–é™©ï¼šåŒ…å«æ„å¤–èº«æ•…/ä¼¤æ®‹è´£ä»»ï¼›é¢„ç®—ä¸ºæ¯å¹´400å…ƒï¼ˆä¿é¢100ä¸‡å…ƒï¼‰ã€‚</p></li><li><p>å‡é¢å®šæœŸå¯¿é™©Cï¼šå—ç›Šäººä¸ºæ³•å®šå—ç›Šäººï¼Œä¿é¢ç­‰äºæˆ¿è´·æ€»é¢ï¼›é¢„ç®—ä¸ºæ¯å¹´2000å…ƒï¼ˆä¿é¢150ä¸‡å…ƒï¼Œä¿éšœæœŸ30å¹´ï¼Œç¼´è´¹æœŸ20å¹´ï¼‰ã€‚ï¼ˆæœ‰æˆ¿è´·æ‰ä¹°ï¼‰</p></li><li><p>é‡å¤§ç–¾ç—…é™©Bï¼šæå‡é‡ç–¾ä¿é¢ï¼›é¢„ç®—ä¸ºæ¯å¹´5000å…ƒï¼ˆä¿é¢30ä¸‡å…ƒï¼Œä¿ç»ˆèº«ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚</p></li></ul><h4 id="32å²ä¿éšœé€Ÿè§ˆ"><strong>32å²</strong>ä¿éšœé€Ÿè§ˆ</h4><ul><li><p>èº«æ•…è¡¥å¿ï¼ˆä¸é™æ­»äº¡åŸå› ï¼‰ï¼š130ä¸‡å…ƒã€‚</p></li><li><p>é¢å¤–èº«æ•…è¡¥å¿ï¼ˆä»…é™æ„å¤–åŸå› ï¼‰ï¼š150ä¸‡å…ƒã€‚</p></li><li><p>æ„å¤–åŒ»ç–—è¡¥å¿ï¼š1ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li><li><p>ä½é™¢åŒ»ç–—è¡¥å¿ï¼š100ä¸‡å…ƒï¼ˆä¸Šé™ï¼‰ã€‚</p></li><li><p>é‡å¤§ç–¾ç—…è¡¥å¿ï¼š80ä¸‡å…ƒã€‚</p></li></ul><h3 id="34å²"><strong>34å²</strong></h3><ul><li><p>æ„å¤–é™©ï¼šåŒ…å«æ„å¤–èº«æ•…/ä¼¤æ®‹è´£ä»»ï¼Œæ„å¤–åŒ»ç–—è´£ä»»ï¼›é¢„ç®—ä¸ºæ¯å¹´200å…ƒï¼ˆä¿é¢50ä¸‡å…ƒï¼‰ã€‚</p></li><li><p>æ„å¤–é™©ï¼šåŒ…å«æ„å¤–èº«æ•…/ä¼¤æ®‹è´£ä»»ï¼›é¢„ç®—ä¸ºæ¯å¹´400å…ƒï¼ˆä¿é¢100ä¸‡å…ƒï¼‰ã€‚</p></li><li><p>åŒ»ç–—é™©ï¼šåŒ…å«ç–¾ç—…å¯¼è‡´çš„ä½é™¢åŒ»ç–—è´£ä»»ï¼›é¢„ç®—ä¸ºæ¯å¹´200å…ƒã€‚å®šæœŸå¯¿é™©Aï¼šå—ç›Šäººä¸ºçˆ¶æ¯ï¼Œä¿é¢ç›¸å½“äºçˆ¶æ¯5å¹´çš„é€€ä¼‘é‡‘ï¼›é¢„ç®—ä¸ºæ¯å¹´500å…ƒï¼ˆä¿é¢50ä¸‡å…ƒï¼Œä¿éšœæœŸ30å¹´ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚</p></li><li><p>å®šæœŸå¯¿é™©Bï¼šå—ç›Šäººä¸ºæ³•å®šå—ç›Šäººï¼Œä¿é¢ç›¸å½“äºè‡ªå·±5å€çš„å¹´è–ªã€‚é¢„ç®—ä¸ºæ¯å¹´1000å…ƒï¼ˆä¿é¢80ä¸‡å…ƒï¼Œä¿åˆ°60å²ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚</p></li><li><p>å‡é¢å®šæœŸå¯¿é™©Cï¼šå—ç›Šäººä¸ºæ³•å®šå—ç›Šäººï¼Œä¿é¢ç­‰äºæˆ¿è´·æ€»é¢ï¼›é¢„ç®—ä¸ºæ¯å¹´2000å…ƒï¼ˆä¿é¢150ä¸‡å…ƒï¼Œä¿éšœæœŸ30å¹´ï¼Œç¼´è´¹æœŸ20å¹´ï¼‰ã€‚</p></li><li><p>å®šæœŸå¯¿é™©Dï¼šå—ç›Šäººä¸ºå­å¥³ï¼Œä¿é¢ç›¸å½“äºå­©å­5å¹´çš„ç”Ÿæ´»è´¹ï¼›é¢„ç®—ä¸ºæ¯å¹´4000å…ƒï¼ˆä¿é¢100ä¸‡å…ƒï¼Œä¿åˆ°60å²ï¼Œç¼´è´¹æœŸ20å¹´ï¼‰ã€‚</p></li><li><p>é‡å¤§ç–¾ç—…é™©Aï¼šä¿é¢ç›¸å½“äºè‡ªå·±å½“æ—¶çš„3å€å¹´è–ªï¼›é¢„ç®—ä¸ºæ¯å¹´5000å…ƒï¼ˆä¿é¢50ä¸‡å…ƒï¼Œä¿åˆ°70å²ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚é‡å¤§ç–¾ç—…é™©Bï¼šæå‡é‡ç–¾é™©ä¿é¢ï¼›é¢„ç®—ä¸ºæ¯å¹´5000å…ƒï¼ˆä¿é¢30ä¸‡å…ƒï¼Œä¿ç»ˆèº«ï¼Œç¼´è´¹æœŸ30å¹´ï¼‰ã€‚</p></li><li><p>å…»è€ä¿é™©ï¼ˆ60å²é¢†å–ï¼‰ï¼šé¢„ç®—ä¸ºæ¯å¹´60000å…ƒï¼ˆæ¯æœˆ5000å…ƒï¼‰ã€‚</p></li></ul><p>ç»™è‡ªå·±ä¹°ä¿é™©ï¼Œä¸èƒ½ä¸€è¹´è€Œå°±ï¼Œåº”éšç€äººç”Ÿè¿›å…¥ä¸åŒé˜¶æ®µè€Œåˆ†æ­¥å®æ–½ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è‡ªå·±çš„æƒ…æ„Ÿè¿›è¡Œå†åˆ†é…ï¼Œè¯´åˆ°åº•å°±æ˜¯ï¼Œå›ç­”â€œä¸ºè°ä¹°ä¿é™©â€çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œæ¶‰åŠåŒ»ç–—è¡¥å¿çš„ä¿é™©ï¼ˆå¦‚ä½é™¢åŒ»ç–—é™©ã€é‡å¤§ç–¾ç—…é™©ï¼‰ï¼Œæ˜¯ä¸ºäº†è®©è‡ªå·±ä¸è‡³äºè¢«ç–¾ç—…æç©ºè…°åŒ…ï¼›å†æ¯”å¦‚ï¼Œæ¶‰åŠèº«æ•…è¡¥å¿çš„ä¿é™©ï¼ˆå¦‚å®šæœŸå¯¿é™©ã€æ„å¤–é™©ï¼‰ï¼Œæ˜¯ä¸ºäº†è®©å®¶äººèƒ½å¤Ÿç»§ç»­ç»´æŒåŸæ¥çš„ç”Ÿæ´»æ°´å‡†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1ã€ç ´é™¤è¯¯ä¼šï¼Œæˆ‘ä»¬çœŸçš„äº†è§£ä¿é™©å—&quot;&gt;1ã€ç ´é™¤è¯¯ä¼šï¼Œæˆ‘ä»¬çœŸçš„äº†è§£ä¿é™©å—&lt;/h1&gt;
&lt;h2 id=&quot;æˆ‘ä»¬å¯¹ä¿é™©çš„è®¤è¯†ï¼šç†èµ”ä¼¼ä¹ç‰¹åˆ«éš¾&quot;&gt;æˆ‘ä»¬å¯¹ä¿é™©çš„è®¤è¯†ï¼šç†èµ”ä¼¼ä¹ç‰¹åˆ«éš¾&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å‘ç”Ÿçš„äº‹æ•…ä¸åœ¨ä¿é™©èŒƒå›´ï¼Œä¸èƒ½èµ”ä»˜&lt;/li&gt;
&lt;li&gt;å®¢æˆ·æœªå¦‚å®å‘ŠçŸ¥è‡ªèº«</summary>
      
    
    
    
    <category term="è¯»ä¹¦ç¬”è®°" scheme="https://guozhe001.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="è¯»ä¹¦ç¬”è®°" scheme="https://guozhe001.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    <category term="ä¿é™©" scheme="https://guozhe001.github.io/tags/%E4%BF%9D%E9%99%A9/"/>
    
  </entry>
  
  <entry>
    <title>Gradleå­¦ä¹ è¸©å‘è®°å½•</title>
    <link href="https://guozhe001.github.io/2021/04/01/others/gradle%E5%AD%A6%E4%B9%A0%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    <id>https://guozhe001.github.io/2021/04/01/others/gradle%E5%AD%A6%E4%B9%A0%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/</id>
    <published>2021-04-01T10:18:21.506Z</published>
    <updated>2021-04-01T10:18:21.507Z</updated>
    
    <content type="html"><![CDATA[<h1 id="gradleå­¦ä¹ è¸©å‘è®°å½•">gradleå­¦ä¹ è¸©å‘è®°å½•</h1><p>æœ€è¿‘æƒ³å­¦ä¹ ä¸€ä¸‹Java11ï¼Œä½¿ç”¨gradleæ­å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œæ‰“åŒ…å‘½ä»¤<code>./gradlew clean build</code>æ—¶æŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Could not target platform: &#x27;Java SE 11&#x27; using tool chain: &#x27;JDK 8 (1.8)&#x27;</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯å› ä¸ºæˆ‘æœ¬åœ°çš„JAVA_HOMEé…ç½®çš„JDKç‰ˆæœ¬æ˜¯1.8ï¼Œä½†æ˜¯é¡¹ç›®ä¸­æŒ‡å®šçš„ç¼–è¯‘ç‰ˆæœ¬ä¸ºJava11ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sourceCompatibility = JavaVersion.VERSION_11</span><br><span class="line">targetCompatibility = JavaVersion.VERSION_11</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹å¼æ˜¯åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºgradle.propertiesæ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹é…ç½®ï¼Œé—®é¢˜è§£å†³</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">org.gradle.java.home</span> = <span class="string">/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home</span></span><br></pre></td></tr></table></figure><p>gradleçš„<a href="https://www.jetbrains.com/help/idea/gradle-jvm-selection.html#jdk_existing_project">å®˜æ–¹æ–‡æ¡£</a>è§£é‡Šå¦‚ä¸‹ï¼š</p><h3 id="Resolve-the-Gradle-JVM-version-for-the-existing-project">Resolve the Gradle JVM version for the existing project</h3><ol><li>IntelliJ IDEA checks the <code>gradle.properties</code> file for the appropriate Gradle JVM specified in <code>org.gradle.java.home</code> and uses it for the project.</li><li>Then it checks the <code>JAVA_HOME</code> environment variable.</li><li>Then it checks the closest appropriate JDK version for the existing Gradle version.</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;gradleå­¦ä¹ è¸©å‘è®°å½•&quot;&gt;gradleå­¦ä¹ è¸©å‘è®°å½•&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘æƒ³å­¦ä¹ ä¸€ä¸‹Java11ï¼Œä½¿ç”¨gradleæ­å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œæ‰“åŒ…å‘½ä»¤&lt;code&gt;./gradlew clean build&lt;/code&gt;æ—¶æŠ¥é”™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Gradle" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/Gradle/"/>
    
    
    <category term="Gradle" scheme="https://guozhe001.github.io/tags/Gradle/"/>
    
    <category term="Java" scheme="https://guozhe001.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Homebrewé…ç½®ä¸ºå›½å†…é•œåƒ</title>
    <link href="https://guozhe001.github.io/2021/04/01/others/Homebrew%E9%85%8D%E7%BD%AE%E4%B8%BA%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F/"/>
    <id>https://guozhe001.github.io/2021/04/01/others/Homebrew%E9%85%8D%E7%BD%AE%E4%B8%BA%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F/</id>
    <published>2021-04-01T10:18:21.505Z</published>
    <updated>2021-04-01T10:18:21.505Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬äººçš„Macç”µè„‘æŒ‰ç…§<a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/">æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™</a>çš„è®¾ç½®æ—¶æŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git -C &quot;$(brew --repo homebrew/cask)&quot; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask.git</span><br><span class="line">fatal: cannot change to &#x27;/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask&#x27;: No such file or directory</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆæ˜¯å…ˆchangeåˆ°å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œåœ¨æ‰§è¡Œæ›¿æ¢è„šæœ¬ï¼Œæ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd &quot;$(brew --repo)&quot;</span><br><span class="line">git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git</span><br><span class="line"></span><br><span class="line">cd $(brew --repo homebrew/core)</span><br><span class="line">git remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git</span><br></pre></td></tr></table></figure><h2 id="å¸è½½homebrew">å¸è½½homebrew</h2><p>æ‰§è¡Œå¸è½½è„šæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœæŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused</span><br></pre></td></tr></table></figure><p>éœ€è¦é…ç½®ä¸€ä¸‹hostï¼›å»å¾€<a href="https://www.ipaddress.com/">https://www.ipaddress.com/</a>ï¼Œè¾“å…¥<a href="https://raw.githubusercontent.com">raw.githubusercontent.com</a>æŸ¥çœ‹ipåœ°å€ï¼Œç„¶åé…ç½®hostä¹‹åé‡è¯•ã€‚</p><h2 id="å®‰è£…bash-completion">å®‰è£…bash_completion</h2><p>å¸è½½homebrewåå‘ç°è‡ªåŠ¨è¡¥å…¨çš„åŠŸèƒ½ä¹Ÿæ²¡æœ‰äº†ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi awk: can&#x27;t open file /usr/local/etc/bash_completion</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯é‡æ–°å®‰è£…homebrewåï¼Œå®‰è£…bash-completionï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install bash-completion</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬äººçš„Macç”µè„‘æŒ‰ç…§&lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/&quot;&gt;æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™&lt;/a&gt;çš„è®¾ç½®æ—¶æŠ¥é”™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;tab</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Homebrew" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/Homebrew/"/>
    
    
    <category term="Homebrew" scheme="https://guozhe001.github.io/tags/Homebrew/"/>
    
    <category term="Mac" scheme="https://guozhe001.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¸¸ç”¨å‘½ä»¤è®°å½•</title>
    <link href="https://guozhe001.github.io/2021/04/01/others/Linux%20Shell%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"/>
    <id>https://guozhe001.github.io/2021/04/01/others/Linux%20Shell%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/</id>
    <published>2021-04-01T10:18:21.505Z</published>
    <updated>2021-04-01T10:18:21.506Z</updated>
    
    <content type="html"><![CDATA[<h2 id="tar-è§£å‹ï¼Œå‹ç¼©ï¼Œå¸®åŠ©ï¼štar-h">tar(è§£å‹ï¼Œå‹ç¼©ï¼Œå¸®åŠ©ï¼štar -h)</h2><p>è§£å‹ï¼Œ<code>-C</code>æ ‡ç­¾æŒ‡å®šè§£å‹åˆ°å“ªä¸ªç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf -C ./test</span><br></pre></td></tr></table></figure><p>å‹ç¼©</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -cf &lt;archive-filename&gt; [filenames...]</span><br></pre></td></tr></table></figure><h2 id="shasumï¼ˆhashï¼Œå¸®åŠ©shasum-hï¼‰">shasumï¼ˆhashï¼Œå¸®åŠ©shasum -hï¼‰</h2><p>ç”Ÿæˆhashï¼Œ<code>-a</code>æ ‡ç­¾æŒ‡å®šä½¿ç”¨å“ªä¸ªç®—æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shasum -a 256 README.md</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ç»ˆç«¯æ˜¾ç¤ºï¼Œä¸æ˜¾ç¤ºç”¨æˆ·åå’Œç”µè„‘åç§°">ä¿®æ”¹ç»ˆç«¯æ˜¾ç¤ºï¼Œä¸æ˜¾ç¤ºç”¨æˆ·åå’Œç”µè„‘åç§°</h2><p>ä¿®æ”¹<code>/etc/bashrc</code>ï¼šPS1='\w $ â€™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> more /etc/bashrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> System-wide .bashrc file <span class="keyword">for</span> interactive bash(1) shells.</span></span><br><span class="line">if [ -z &quot;$PS1&quot; ]; then</span><br><span class="line">   return</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">PS1=<span class="string">&#x27;\h:\W \u\$ &#x27;</span></span></span><br><span class="line">PS1=&#x27;\w \$ &#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> Make bash check its window size after a process completes</span></span><br><span class="line">shopt -s checkwinsize</span><br><span class="line"></span><br><span class="line">[ -r &quot;/etc/bashrc_$TERM_PROGRAM&quot; ] &amp;&amp; . &quot;/etc/bashrc_$TERM_PROGRAM&quot;</span><br></pre></td></tr></table></figure><p>å…¶ä»–å‚æ•°ï¼š</p><ul><li>\d ï¼šä»£è¡¨æ—¥æœŸï¼Œæ ¼å¼ä¸ºweekday month dateï¼Œä¾‹å¦‚ï¼šâ€œMon Aug 1â€</li><li>\H ï¼šå®Œæ•´çš„ä¸»æœºåç§°ã€‚ä¾‹å¦‚ï¼šæˆ‘çš„æœºå™¨åç§°ä¸ºï¼šfc4.linuxï¼Œåˆ™è¿™ä¸ªåç§°å°±æ˜¯fc4.linux</li><li>\h ï¼šä»…å–ä¸»æœºçš„ç¬¬ä¸€ä¸ªåå­—ï¼Œå¦‚ä¸Šä¾‹ï¼Œåˆ™ä¸ºfc4ï¼Œ.linuxåˆ™è¢«çœç•¥</li><li>\t ï¼šæ˜¾ç¤ºæ—¶é—´ä¸º24å°æ—¶æ ¼å¼ï¼Œå¦‚ï¼šHHï¼šMMï¼šSS</li><li>\T ï¼šæ˜¾ç¤ºæ—¶é—´ä¸º12å°æ—¶æ ¼å¼\A ï¼šæ˜¾ç¤ºæ—¶é—´ä¸º24å°æ—¶æ ¼å¼ï¼šHHï¼šMM</li><li>\u ï¼šå½“å‰ç”¨æˆ·çš„è´¦å·åç§°\v ï¼šBASHçš„ç‰ˆæœ¬ä¿¡æ¯</li><li>\w ï¼šå®Œæ•´çš„å·¥ä½œç›®å½•åç§°ã€‚å®¶ç›®å½•ä¼šä»¥ ~ä»£æ›¿</li><li>\W ï¼šåˆ©ç”¨basenameå–å¾—å·¥ä½œç›®å½•åç§°ï¼Œæ‰€ä»¥åªä¼šåˆ—å‡ºæœ€åä¸€ä¸ªç›®å½•</li><li># ï¼šä¸‹è¾¾çš„ç¬¬å‡ ä¸ªå‘½ä»¤</li><li>$ ï¼šæç¤ºå­—ç¬¦ï¼Œå¦‚æœæ˜¯rootæ—¶ï¼Œæç¤ºç¬¦ä¸ºï¼š# ï¼Œæ™®é€šç”¨æˆ·åˆ™ä¸ºï¼š$</li></ul><h3 id="crontabï¼ˆå®šæ—¶ä»»åŠ¡-man-crontabï¼‰">crontabï¼ˆå®šæ—¶ä»»åŠ¡,man crontabï¼‰</h3><ul><li>æŸ¥çœ‹ï¼š<code>crontab -l</code></li><li>ç¼–è¾‘ï¼š<code>crontab -e</code></li></ul><p>crontabé…ç½®ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ¯å¤©åç‚¹30åˆ†æ‰§è¡Œhello.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ† æ—¶ æ—¥ æœˆ æ˜ŸæœŸ <span class="built_in">command</span></span></span><br><span class="line">30 10 * * * ï½/hello.sh</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;tar-è§£å‹ï¼Œå‹ç¼©ï¼Œå¸®åŠ©ï¼štar-h&quot;&gt;tar(è§£å‹ï¼Œå‹ç¼©ï¼Œå¸®åŠ©ï¼štar -h)&lt;/h2&gt;
&lt;p&gt;è§£å‹ï¼Œ&lt;code&gt;-C&lt;/code&gt;æ ‡ç­¾æŒ‡å®šè§£å‹åˆ°å“ªä¸ªç›®å½•&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    <category term="Linux" scheme="https://guozhe001.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://guozhe001.github.io/tags/Linux/"/>
    
    <category term="shell" scheme="https://guozhe001.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¸¸ç”¨å‘½ä»¤è®°å½•</title>
    <link href="https://guozhe001.github.io/2021/04/01/others/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"/>
    <id>https://guozhe001.github.io/2021/04/01/others/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/</id>
    <published>2021-04-01T10:18:21.504Z</published>
    <updated>2021-04-01T10:18:21.504Z</updated>
    
    <content type="html"><![CDATA[<h2 id="dockerå‘½ä»¤">dockerå‘½ä»¤</h2><h3 id="åˆ é™¤æœ¬åœ°æ‰€æœ‰æ²¡æœ‰è¢«ä½¿ç”¨çš„å·ï¼š">åˆ é™¤æœ¬åœ°æ‰€æœ‰æ²¡æœ‰è¢«ä½¿ç”¨çš„å·ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume prune</span><br></pre></td></tr></table></figure><p>WARNING! This will remove all local volumes not used by at least one container.</p><h3 id="æŸ¥çœ‹æœ¬åœ°çš„æ‰€æœ‰å·ï¼š">æŸ¥çœ‹æœ¬åœ°çš„æ‰€æœ‰å·ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æŸä¸ªvolumeå·">åˆ é™¤æŸä¸ªvolumeå·</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm docker_orderer.supply.com</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æ²¡æœ‰è¿è¡Œä¸­çš„">æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æ²¡æœ‰è¿è¡Œä¸­çš„</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æŸä¸ªå®¹å™¨çš„æ—¥å¿—">æŸ¥çœ‹æŸä¸ªå®¹å™¨çš„æ—¥å¿—</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs ead00b30e8ec</span><br></pre></td></tr></table></figure><h3 id="åœæ­¢å®¹å™¨">åœæ­¢å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop 46bc78ee1f8a e8df5432a918 be15203b7835</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤å®¹å™¨">åˆ é™¤å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm ead00b30e8ec 46bc78ee1f8a e8df5432a918 be15203b7835</span><br></pre></td></tr></table></figure><h3 id="è¿›å…¥dockerå®¹å™¨">è¿›å…¥dockerå®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it f37c61b09023 /bin/sh</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å®¹å™¨çš„ç¯å¢ƒå˜é‡">ä¿®æ”¹å®¹å™¨çš„ç¯å¢ƒå˜é‡</h3><p>åœ¨é…ç½®docker-composeæŸä¸ªå®¹å™¨çš„ç¯å¢ƒå˜é‡æ—¶å‡ºç°äº†é”™è¯¯ï¼Œä½†æ˜¯å®¹å™¨å·²ç»è¿è¡Œäº†ï¼Œå¦‚æœé‡æ–°è¿è¡Œåˆ™æ•°æ®ä¼šä¸¢å¤±ã€‚æ‰€ä»¥éœ€è¦ä¿®æ­£æ­¤ç¯å¢ƒå˜é‡</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  <span class="attr">peer0.s1.supply.com:</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>    <span class="attr">container_name:</span> <span class="string">peer0.s1.supply.com</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>    <span class="attr">image:</span> <span class="string">hyperledger/fabric-peer:2.2.0</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>    <span class="attr">environment:</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">*#Generic</span> <span class="string">peer</span> <span class="string">variables*</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">\-</span> <span class="string">CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">*#</span> <span class="string">the</span> <span class="string">following</span> <span class="string">setting</span> <span class="string">starts</span> <span class="string">chaincode</span> <span class="string">containers</span> <span class="string">on</span> <span class="string">the</span> <span class="string">same*</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">*#</span> <span class="string">bridge</span> <span class="string">network</span> <span class="string">as</span> <span class="string">the</span> <span class="string">peers*</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">*#</span> <span class="string">https://docs.docker.com/compose/networking/*</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">\-</span> <span class="string">CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=_test</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">\-</span> <span class="string">FABRIC_LOGGING_SPEC=INFO</span></span><br><span class="line"></span><br><span class="line"><span class="string">â€‹</span>      <span class="string">*#-</span> <span class="string">FABRIC_LOGGING_SPEC=DEBUG*</span></span><br></pre></td></tr></table></figure><p>å¦‚è¦ä¿®æ”¹<code>CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE</code>ä¸º<code>docker_test</code>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1ã€è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker exec -it f37c61b09023 /bin/sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2ã€ä¿®æ”¹ç¯å¢ƒå˜é‡</span></span><br><span class="line">echo &quot;export CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=docker_test&quot; &gt;&gt; /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash"> 3ã€é‡æ–°å¯åŠ¨å®¹å™¨å³å¯</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹dockerå¯åŠ¨çš„ç½‘ç»œ">æŸ¥çœ‹dockerå¯åŠ¨çš„ç½‘ç»œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure><h2 id="docker-composeå‘½ä»¤">docker-composeå‘½ä»¤</h2><h3 id="ä½¿ç”¨docker-composeå¯åŠ¨dockeré•œåƒ">ä½¿ç”¨docker-composeå¯åŠ¨dockeré•œåƒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> --f æŒ‡å®šæ–‡ä»¶, -dæŒ‡å®šåå°è¿è¡Œ</span></span><br><span class="line">docker-compose --f docker-compose.yml up -d</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨docker-composeå¯åŠ¨æŒ‡å®šçš„åç§°çš„å®¹å™¨">ä½¿ç”¨docker-composeå¯åŠ¨æŒ‡å®šçš„åç§°çš„å®¹å™¨</h3><p>åœ¨ä¸€ä¸ª<code>docker-compose.yaml</code>é…ç½®æ–‡ä»¶ä¸‹å¯èƒ½æœ‰å¤šä¸ª<code>serevice</code>ï¼Œå¯ä»¥æŒ‡å®šåç§°æ¥å¯åŠ¨å…¶ä¸­çš„ä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up ca-tls</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;dockerå‘½ä»¤&quot;&gt;dockerå‘½ä»¤&lt;/h2&gt;
&lt;h3 id=&quot;åˆ é™¤æœ¬åœ°æ‰€æœ‰æ²¡æœ‰è¢«ä½¿ç”¨çš„å·ï¼š&quot;&gt;åˆ é™¤æœ¬åœ°æ‰€æœ‰æ²¡æœ‰è¢«ä½¿ç”¨çš„å·ï¼š&lt;/h3&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Docker" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/Docker/"/>
    
    
    <category term="Docker" scheme="https://guozhe001.github.io/tags/Docker/"/>
    
    <category term="docker-compose" scheme="https://guozhe001.github.io/tags/docker-compose/"/>
    
  </entry>
  
  <entry>
    <title>Gradleå¸¸ç”¨å‘½ä»¤è®°å½•</title>
    <link href="https://guozhe001.github.io/2021/04/01/others/Gradle%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://guozhe001.github.io/2021/04/01/others/Gradle%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-04-01T10:18:21.504Z</published>
    <updated>2021-04-01T10:18:21.505Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Gradleå¸¸ç”¨å‘½ä»¤è®°å½•">Gradleå¸¸ç”¨å‘½ä»¤è®°å½•:</h2><h4 id="è¿è¡Œgradle-help-task-someTaskæ¥æ˜¾ç¤ºå¸®åŠ©ï¼Œå¦‚ï¼š">è¿è¡Œ<code>gradle help --task someTask</code>æ¥æ˜¾ç¤ºå¸®åŠ©ï¼Œå¦‚ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew help --task test</span><br></pre></td></tr></table></figure><h4 id="clean">clean</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew clean</span><br></pre></td></tr></table></figure><h4 id="build">build</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew build</span><br></pre></td></tr></table></figure><h4 id="test">test</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew test</span><br></pre></td></tr></table></figure><h4 id="æ’é™¤æŒ‡å®šçš„task-exclude-task">æ’é™¤æŒ‡å®šçš„task<code>--exclude-task</code></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew clean build --exclude-task test</span><br></pre></td></tr></table></figure><h4 id="å¤šæ¨¡å—æŒ‡å®šæ¨¡å—è¿è¡Œtask">å¤šæ¨¡å—æŒ‡å®šæ¨¡å—è¿è¡Œtask</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gradlew :my-subproject:taskName</span><br><span class="line">./gradlew my-subproject:taskName</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•å¤±è´¥ç»§ç»­æ‰§è¡Œ">æµ‹è¯•å¤±è´¥ç»§ç»­æ‰§è¡Œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew test --continue</span><br></pre></td></tr></table></figure><h4 id="æ£€æŸ¥ï¼Œä¼šæ‰§è¡Œtestå’Œlinting">æ£€æŸ¥ï¼Œä¼šæ‰§è¡Œtestå’Œlinting</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew check</span><br></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºå½“å‰çš„é¡¹ç›®å±‚æ¬¡">æ˜¾ç¤ºå½“å‰çš„é¡¹ç›®å±‚æ¬¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew project</span><br></pre></td></tr></table></figure><h4 id="åˆ—å‡ºæ‰€æœ‰çš„task">åˆ—å‡ºæ‰€æœ‰çš„task</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew tasks</span><br></pre></td></tr></table></figure><h4 id="åˆ—å‡ºé¡¹ç›®æ‰€æœ‰çš„ä¾èµ–ï¼š">åˆ—å‡ºé¡¹ç›®æ‰€æœ‰çš„ä¾èµ–ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew dependencies</span><br></pre></td></tr></table></figure><p>å»<a href="https://docs.gradle.org/current/userguide/command_line_interface.html">å®˜ç½‘</a>æŸ¥çœ‹æ›´å¤š</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Gradleå¸¸ç”¨å‘½ä»¤è®°å½•&quot;&gt;Gradleå¸¸ç”¨å‘½ä»¤è®°å½•:&lt;/h2&gt;
&lt;h4 id=&quot;è¿è¡Œgradle-help-task-someTaskæ¥æ˜¾ç¤ºå¸®åŠ©ï¼Œå¦‚ï¼š&quot;&gt;è¿è¡Œ&lt;code&gt;gradle help --task someTask&lt;/code&gt;æ¥æ˜¾ç¤ºå¸®åŠ©ï¼Œå¦‚ï¼š&lt;/h4</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Gradle" scheme="https://guozhe001.github.io/categories/%E5%B7%A5%E5%85%B7/Gradle/"/>
    
    
    <category term="Gradle" scheme="https://guozhe001.github.io/tags/Gradle/"/>
    
    <category term="Java" scheme="https://guozhe001.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Redisè‡ªå¢ç‰¹æ€§åˆ›å»ºå”¯ä¸€idç”Ÿæˆå™¨</title>
    <link href="https://guozhe001.github.io/2021/04/01/language/java/%E4%BD%BF%E7%94%A8redis%E8%87%AA%E5%A2%9E%E7%89%B9%E6%80%A7%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80id%E7%94%9F%E6%88%90%E5%99%A8/"/>
    <id>https://guozhe001.github.io/2021/04/01/language/java/%E4%BD%BF%E7%94%A8redis%E8%87%AA%E5%A2%9E%E7%89%B9%E6%80%A7%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80id%E7%94%9F%E6%88%90%E5%99%A8/</id>
    <published>2021-04-01T10:18:21.503Z</published>
    <updated>2021-04-01T10:18:21.503Z</updated>
    
    <content type="html"><![CDATA[<h1 id="éœ€æ±‚è¯´æ˜">éœ€æ±‚è¯´æ˜</h1><h2 id="äº§å“è¦æ±‚å®ç°ä¸€ä¸ªè®¢å•ç¼–å·ï¼Œæ­¤ç¼–å·è§„åˆ™å¦‚ä¸‹">äº§å“è¦æ±‚å®ç°ä¸€ä¸ªè®¢å•ç¼–å·ï¼Œæ­¤ç¼–å·è§„åˆ™å¦‚ä¸‹</h2><h3 id="è®¢å•ç¼–å·è§„åˆ™ï¼š">è®¢å•ç¼–å·è§„åˆ™ï¼š</h3><p>â€œå­—æ¯â€ + â€œæ—¥æœŸâ€ + â€œè‡ªå¢IDâ€</p><h3 id="è®¢å•ç¼–å·ä¸¾ä¾‹">è®¢å•ç¼–å·ä¸¾ä¾‹</h3><p>æ¯”å¦‚ä¸šåŠ¡Aï¼Œåœ¨2020-08-04æ—¥æœ‰ä¸‰ä¸ªè®¢å•ï¼Œé‚£ä¹ˆè®¢å•ç¼–å·å¦‚ä¸‹ï¼š</p><ul><li>A202008040001</li><li>A202008040002</li><li>A202008040003</li></ul><p>æ¯”å¦‚ä¸šåŠ¡Aï¼Œåœ¨2020-08-05æ—¥æœ‰4ä¸ªè®¢å•ï¼Œé‚£ä¹ˆè®¢å•ç¼–å·å¦‚ä¸‹ï¼š</p><ul><li>A202008050001</li><li>A202008050002</li><li>A202008050003</li><li>A202008050003</li></ul><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œåé¢çš„â€œè‡ªå¢IDâ€æ¯å¤©éƒ½ä¼šä»1å¼€å§‹å¢åŠ ï¼Œåœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¦åšåˆ°æ¯å¤©ä»1å¼€å§‹ä¸é‡å¤å¹¶ä¸”è‡ªå¢çš„æ•ˆæœï¼›æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªå®ç°æ–¹æ¡ˆå°±æ˜¯redisçš„Incrå‘½ä»¤ï¼ˆRedis Incr å‘½ä»¤å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€ï¼‰ã€‚</p><h1 id="éœ€æ±‚å®ç°">éœ€æ±‚å®ç°</h1><h2 id="é…ç½®redis">é…ç½®redis</h2><h3 id="ä¾èµ–redisç›¸å…³jaråŒ…">ä¾èµ–redisç›¸å…³jaråŒ…</h3><p>å› ä¸ºæ­¤æ¨¡å—ç»§æ‰¿äº†spring-boot-starter-parentï¼Œæ‰€ä»¥ä¸éœ€è¦æŒ‡å®šç‰ˆæœ¬</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™é…ç½®redisçš„config">ç¼–å†™é…ç½®redisçš„config</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nicai.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.data.redis.RedisProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisClusterConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.jedis.JedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * redisé›†ç¾¤é…ç½®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> guozhe</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/08/04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(RedisProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisClusterConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedisProperties redisProperties;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RedisClusterConfig</span><span class="params">(RedisProperties redisProperties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisProperties = redisProperties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread-safe factory of Redis connectionsé…ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> factory of Redis</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisConnectionFactory <span class="title">redisConnectionFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RedisClusterConfiguration redisClusterConfiguration = <span class="keyword">new</span> RedisClusterConfiguration(redisProperties.getCluster().getNodes());</span><br><span class="line">        redisClusterConfiguration.setPassword(redisProperties.getPassword());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JedisConnectionFactory(redisClusterConfiguration);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºStringç±»å‹çš„redisæ¨¡æ¿</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> redisConnectionFactory factory of Redis</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String-focused extension of RedisTemplate</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StringRedisTemplate <span class="title">stringRedisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;</span><br><span class="line">        StringRedisTemplate template = <span class="keyword">new</span> StringRedisTemplate(redisConnectionFactory);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯é…ç½®èŒƒå‹çš„RedisTemplateï¼Œéœ€è¦è®¾ç½®å€¼çš„åºåˆ—åŒ–è§„åˆ™ä¸ºï¼š<strong>StringRedisSerializer</strong>ï¼ŒåŸå› å¯ä»¥å‚è€ƒæ­¤æ–‡ç« ï¼š<a href="https://blog.csdn.net/tyyh08/article/details/80267261">Spring Bootä¸­ä½¿ç”¨RedisTemplateä¼˜é›…çš„æ“ä½œRedisï¼Œå¹¶ä¸”è§£å†³RedisTemplateæ³›å‹æ³¨å…¥å¤±è´¥çš„é—®é¢˜</a></p><h3 id="æµ‹è¯•redisçš„configä»£ç ">æµ‹è¯•redisçš„configä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nicai.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuanfeng.accounting.BaseAdminSpringTest;</span><br><span class="line"><span class="keyword">import</span> com.yuanfeng.accounting.Constants;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.junit.Assert;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.ValueOperations;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> guozhe</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/08/04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest(classes = AdminApplication.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisClusterConfigTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TEST_KEY = Constants.REDIS_KEY_PREFIX + <span class="string">&quot;test:hello&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TEST_VALUE = <span class="string">&quot;world&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStringRedisTemplateGetAndSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stringRedisTemplate.opsForValue().set(TEST_KEY, TEST_VALUE);</span><br><span class="line">        String value = stringRedisTemplate.opsForValue().get(TEST_KEY);</span><br><span class="line">        Assert.assertEquals(TEST_VALUE, value);</span><br><span class="line">        stringRedisTemplate.delete(TEST_KEY);</span><br><span class="line">        Assert.assertNull(stringRedisTemplate.opsForValue().get(TEST_KEY));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testIncr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String key = TEST_KEY;</span><br><span class="line">        ValueOperations&lt;String, String&gt; valueOperations = stringRedisTemplate.opsForValue();</span><br><span class="line">        valueOperations.set(key, <span class="string">&quot;1&quot;</span>, <span class="number">24</span>, TimeUnit.HOURS);</span><br><span class="line">        String initValue = valueOperations.get(key);</span><br><span class="line">        log.info(<span class="string">&quot;key=&#123;&#125;, init value=&#123;&#125;&quot;</span>, key, initValue);</span><br><span class="line">        Assert.assertEquals(<span class="string">&quot;1&quot;</span>, initValue);</span><br><span class="line">        Long increment = valueOperations.increment(key);</span><br><span class="line">        log.info(<span class="string">&quot;key=&#123;&#125;, after increment=&#123;&#125;&quot;</span>, key, increment);</span><br><span class="line">        Assert.assertEquals(Long.valueOf(<span class="number">2</span>), increment);</span><br><span class="line">        stringRedisTemplate.delete(key);</span><br><span class="line">        Assert.assertNull(valueOperations.get(key));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸºäºredisç¼–å†™å”¯ä¸€IDç”ŸæˆæœåŠ¡">åŸºäºredisç¼–å†™å”¯ä¸€IDç”ŸæˆæœåŠ¡</h2><h3 id="æ·»åŠ æŠ½è±¡çš„å”¯ä¸€idç”ŸæˆæœåŠ¡">æ·»åŠ æŠ½è±¡çš„å”¯ä¸€idç”ŸæˆæœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nicai.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.BooleanUtil;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†å¸ƒå¼IDç”ŸæˆæœåŠ¡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> guozhe</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/08/04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractRedisDistributedIDGenerateService</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">AbstractRedisDistributedIDGenerateService</span>.<span class="title">Context</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–keyæ—¶çš„é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> DEFAULT_VALUE = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> StringRedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractRedisDistributedIDGenerateService</span><span class="params">(StringRedisTemplate redisTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¸‹ä¸€ä¸ªIDï¼Œç›´æ¥ä»redisä¸­è·å–è‡ªå¢åçš„å€¼ï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä¸‹ä¸€ä¸ªID, å¦‚æœrediså‡ºç°å¼‚å¸¸åˆ™è¿”å›nullï¼Œè¯·ä½¿ç”¨è€…è‡ªè¡Œå¤„ç†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Optional&lt;Long&gt; <span class="title">nextId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä»redisä¸­è·å–è‡ªå¢id</span></span><br><span class="line">        Long id = incr(getKey());</span><br><span class="line">        <span class="keyword">return</span> Objects.isNull(id) ? Optional.empty() : Optional.of(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¸‹ä¸€ä¸ªIDï¼Œæ ¹æ®ä¼ å…¥çš„ä¸Šä¸‹æ–‡å’Œredisä¸­è‡ªå¢åçš„å€¼æœ€ç»ˆç»„è£…æˆä¸‹ä¸€ä¸ªIDï¼›</span></span><br><span class="line"><span class="comment">     * è·å–ä¹‹åä¼šäº¤ç»™å­ç±»æ£€æŸ¥æ­¤IDæ˜¯å¦é‡å¤ï¼Œå¦‚æœé‡å¤ä¼šä»å­ç±»ä¸­è·å–æœ€æ–°çš„IDï¼Œç„¶åæ›´æ–°redisä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context æ‹¼è£…idæ—¶éœ€è¦çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä¸‹ä¸€ä¸ªID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">nextId</span><span class="params">(T context)</span> </span>&#123;</span><br><span class="line">        Optional&lt;Long&gt; id = nextId();</span><br><span class="line">        <span class="comment">// å¦‚æœå¯ä»¥ä»redisä¸­è·å–å€¼ï¼Œåˆ™è¯´æ˜redisæœåŠ¡æ­£å¸¸ï¼Œéœ€è¦åˆ¤é‡ï¼›å¦åˆ™ç›´æ¥ä»æ•°æ®åº“ä¸­è·å–ä¸‹ä¸€ä¸ªid</span></span><br><span class="line">        String nextId = id.isPresent() ? ifDuplicatedThenUpdate(context, assemblyNextId(context, id.get())) :</span><br><span class="line">                getNewIdFromDbAndUpdateRedis(context, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (log.isDebugEnabled()) &#123;</span><br><span class="line">            log.debug(<span class="string">&quot;context=&#123;&#125;,redisIncrId=&#123;&#125; nextId=&#123;&#125;&quot;</span>, JSON.toJSONString(context), id, nextId);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nextId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥è·å–åˆ°çš„IDæ˜¯å¦é‡å¤</span></span><br><span class="line"><span class="comment">     * å¦‚æœé‡å¤åˆ™è¯´æ˜ç”±äºredisçš„ä¸€äº›åŸå› å¯¼è‡´çš„é‡å¤ï¼Œè¿”å›æœ€æ–°çš„redisä¸­åº”è¯¥å­˜åœ¨çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nextId ä¸‹ä¸€ä¸ªID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœå½“å‰IDæ²¡æœ‰é‡å¤ï¼Œåˆ™è¿”å›nullï¼Œå¦åˆ™å¦‚æœé‡å¤äº†åˆ™è¿”å›redisä¸­åº”è¯¥æœ‰çš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">checkIfDuplicated</span><span class="params">(String nextId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»æ•°æ®åº“è·å–ä¸‹ä¸€ä¸ªid</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> duplicatedId é‡å¤çš„idï¼Œæ­¤å…¥å‚å¯èƒ½ä¸ºnullï¼Œå­ç±»éœ€è¦è‡ªå·±å¤„ç†</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ•°æ®åº“è·å–ä¸‹ä¸€ä¸ªid</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> Long <span class="title">maxIdFromDatabase</span><span class="params">(String duplicatedId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­ç±»æ ¹æ®rediså½“å‰çš„å€¼è‡ªè¡Œç»„è£…æœ€ç»ˆçš„ID</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context    ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> redisValue rediså½“å‰çš„å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æœ€ç»ˆçš„ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> String <span class="title">assemblyNextId</span><span class="params">(T context, Long redisValue)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–redisè‡ªå¢çš„key</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> redisè‡ªå¢çš„key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> String <span class="title">getKey</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨redisçš„è‡ªå¢æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * å¦‚æœkeyä¸å­˜åœ¨åˆ™å…ˆè®¾ç½®keyï¼Œå†è°ƒç”¨è‡ªå¢æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key éœ€è¦è‡ªå¢çš„key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è‡ªå¢ä¹‹åçš„å€¼ï¼Œå¦‚æœrediså‡ºç°å¼‚å¸¸åˆ™è¿”å›null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Long <span class="title">incr</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        Long increment = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å…ˆæ£€æŸ¥redisä¸­æ˜¯å¦æœ‰key,å¦‚æœæ²¡æœ‰,å…ˆè®¾ç½®keyå¹¶ä¸”è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">            <span class="keyword">if</span> (BooleanUtil.isFalse(redisTemplate.hasKey(key))) &#123;</span><br><span class="line">                initOrUpdateValue(key, getKeyInitValue());</span><br><span class="line">            &#125;</span><br><span class="line">            increment = redisTemplate.opsForValue().increment(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;è°ƒç”¨redisçš„è‡ªå¢æ–¹æ³•å¼‚å¸¸ï¼Œerror_message=&#123;&#125;&quot;</span>, e.getMessage(), e);</span><br><span class="line">        &#125;</span><br><span class="line">        log.debug(<span class="string">&quot;key = &#123;&#125;, increment=&#123;&#125;&quot;</span>, key, increment);</span><br><span class="line">        <span class="keyword">return</span> increment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–åˆå§‹åŒ–keyæ—¶çš„valueå€¼ï¼Œé»˜è®¤æ˜¯0ï¼Œè‡ªå¢ä¹‹åidä»1å¼€å§‹ï¼›</span></span><br><span class="line"><span class="comment">     * å¦‚æœå­ç±»æƒ³ä»å…¶ä»–æ•°å­—å¼€å§‹åˆ™è‡ªå·±è¦†ç›–æ­¤æ–¹æ³•å³å¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆå§‹åŒ–keyæ—¶çš„valueå€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">long</span> <span class="title">getKeyInitValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DEFAULT_VALUE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–keyçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯å°æ—¶ï¼Œç”±å­ç±»è®¾ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¶…æ—¶æ—¶é—´ï¼Œå•ä½å°æ—¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">long</span> <span class="title">getTimeOutHours</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ˜¯å¦é‡å¤ï¼Œå¦‚æœé‡å¤åˆ™ä»åˆ«çš„æ¸ é“ï¼ˆç”±å­ç±»è‡ªå·±å†³å®šä»å“ªä¸ªæ¸ é“ï¼‰æ›´æ–°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context æ‹¼è£…idæ—¶éœ€è¦çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nextId  ä¸‹ä¸€ä¸ªid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœé‡å¤åˆ™è¿”å›æ–°çš„nextIdï¼Œå¦åˆ™è¿”å›å…¥å‚ä¼ å…¥çš„nextId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">ifDuplicatedThenUpdate</span><span class="params">(T context, String nextId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦é‡å¤ï¼Œå¦‚æœé‡å¤åˆ™ä»æ•°æ®åº“ä¸­è·å–ï¼Œå¦åˆ™ç›´æ¥è¿”å›å½“å‰å€¼</span></span><br><span class="line">        <span class="keyword">return</span> checkIfDuplicated(nextId) ? getNewIdFromDbAndUpdateRedis(context, nextId) : nextId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»æ•°æ®åº“è·å–æ–°idå¹¶æ›´æ–°redisä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context æ‹¼è£…idæ—¶éœ€è¦çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nextId  ä¸‹ä¸€ä¸ªid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ ¹æ®æ•°æ®åº“çš„idè·å¾—çš„æ–°id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getNewIdFromDbAndUpdateRedis</span><span class="params">(T context, String nextId)</span> </span>&#123;</span><br><span class="line">        Long maxIdFromDatabase = maxIdFromDatabase(nextId);</span><br><span class="line">        String newId = assemblyNextId(context, maxIdFromDatabase);</span><br><span class="line">        log.warn(<span class="string">&quot;nextId=&#123;&#125; åœ¨æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨ï¼ŒmaxIdFromDatabase=&#123;&#125; é‡æ–°è·å–æ–°çš„newId=&#123;&#125;&quot;</span>, nextId, maxIdFromDatabase, newId);</span><br><span class="line">        initOrUpdateValue(getKey(), maxIdFromDatabase);</span><br><span class="line">        <span class="keyword">return</span> newId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–æˆ–è€…æ›´æ–°redisä¸­çš„è‡ªå¢çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   redisä¸­çš„key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value éœ€è¦è®¾ç½®çš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initOrUpdateValue</span><span class="params">(String key, Long value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, String.valueOf(value), getTimeOutHours(), TimeUnit.HOURS);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;è®¾ç½®rediså€¼å¼‚å¸¸ï¼Œvalue=&#123;&#125; error_message=&#123;&#125;&quot;</span>, value, e.getMessage(), e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¸‹æ–‡ï¼›å­ç±»è‡ªå·±å®šä¹‰ä¸Šä¸‹æ–‡ï¼Œç„¶åæ ¹æ®ä¸Šä¸‹æ–‡çš„æ•°æ®æ¥æœ€ç»ˆç»„è£…ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‡­è¯ç¼–å·ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor</span></span><br><span class="line">    <span class="meta">@AllArgsConstructor</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AContext</span> <span class="keyword">implements</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä¸šåŠ¡ç±»å‹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> String businessType;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ ä¸€ä¸ªAæœåŠ¡çš„å”¯ä¸€idç”ŸæˆæœåŠ¡å®ç°">æ·»åŠ ä¸€ä¸ªAæœåŠ¡çš„å”¯ä¸€idç”ŸæˆæœåŠ¡å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nicai.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DatePattern;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.yuanfeng.accounting.Constants;</span><br><span class="line"><span class="keyword">import</span> com.yuanfeng.accounting.dao.ManualVoucherDAO;</span><br><span class="line"><span class="keyword">import</span> com.yuanfeng.accounting.entity.ManualVoucherEntity;</span><br><span class="line"><span class="keyword">import</span> com.yuanfeng.accounting.exception.AccountingException;</span><br><span class="line"><span class="keyword">import</span> com.yuanfeng.accounting.service.AbstractRedisDistributedIDGenerateService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†å¸ƒå¼å”¯ä¸€IDç”Ÿæˆ-Aå®ç°ç±»</span></span><br><span class="line"><span class="comment"> * ç¼–å·è§„åˆ™ï¼šç”¨é€”+æ—¥æœŸ+è‡ªå¢IDï¼Œå¦‚ï¼šA202007310001ï¼›A202007310002ï¼›A202008070001ï¼›</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> guozhe</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/08/04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DistributedIDGenerateServiceAImpl</span> <span class="keyword">extends</span> <span class="title">AbstractRedisDistributedIDGenerateService</span>&lt;<span class="title">AbstractRedisDistributedIDGenerateService</span>.<span class="title">AContext</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸šåŠ¡ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BUSINESS_TYPE = <span class="string">&quot;A:&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * IDé•¿åº¦ä¸è¶³4ä½æ—¶åœ¨å‰é¢å¡«å……çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">char</span> FILLED_CHAR = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ€åçš„è‡ªå¢IDçš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> INCREMENT_LENGTH = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿‡æœŸå°æ—¶æ•°ï¼Œå³åœ¨24å°æ—¶å€™è¿‡æœŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> EXPIRATION_HOURS = <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DistributedIDGenerateServiceAImpl</span><span class="params">(StringRedisTemplate redisTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(redisTemplate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">checkIfDuplicated</span><span class="params">(String nextId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Long <span class="title">maxIdFromDatabase</span><span class="params">(String duplicatedId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1L</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">assemblyNextId</span><span class="params">(VoucherNumberContext context, Long redisValue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.join(Constants.BLANK, context.getBusinessType(), getDatePeriod(),</span><br><span class="line">                StrUtil.fillBefore(String.valueOf(redisValue), FILLED_CHAR, INCREMENT_LENGTH));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.join(Constants.REDIS_KEY_DELIMITER, Constants.REDIS_KEY_PREFIX, BUSINESS_TYPE, getDatePeriod());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">long</span> <span class="title">getTimeOutHours</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> EXPIRATION_HOURS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;éœ€æ±‚è¯´æ˜&quot;&gt;éœ€æ±‚è¯´æ˜&lt;/h1&gt;
&lt;h2 id=&quot;äº§å“è¦æ±‚å®ç°ä¸€ä¸ªè®¢å•ç¼–å·ï¼Œæ­¤ç¼–å·è§„åˆ™å¦‚ä¸‹&quot;&gt;äº§å“è¦æ±‚å®ç°ä¸€ä¸ªè®¢å•ç¼–å·ï¼Œæ­¤ç¼–å·è§„åˆ™å¦‚ä¸‹&lt;/h2&gt;
&lt;h3 id=&quot;è®¢å•ç¼–å·è§„åˆ™ï¼š&quot;&gt;è®¢å•ç¼–å·è§„åˆ™ï¼š&lt;/h3&gt;
&lt;p&gt;â€œå­—æ¯â€ + â€œæ—¥æœŸâ€ + â€œè‡ªå¢IDâ€&lt;/p&gt;
&lt;h</summary>
      
    
    
    
    <category term="Java" scheme="https://guozhe001.github.io/categories/Java/"/>
    
    <category term="Redis" scheme="https://guozhe001.github.io/categories/Java/Redis/"/>
    
    
    <category term="Java" scheme="https://guozhe001.github.io/tags/Java/"/>
    
    <category term="Redis" scheme="https://guozhe001.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>çº¿ç¨‹æ± æ— æ³•æ•è·çº¿ç¨‹çš„å¼‚å¸¸è¸©å‘å¤ç›˜</title>
    <link href="https://guozhe001.github.io/2021/04/01/language/java/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%97%A0%E6%B3%95%E6%8D%95%E8%8E%B7%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%BC%82%E5%B8%B8%E8%B8%A9%E5%9D%91%E5%A4%8D%E7%9B%98/"/>
    <id>https://guozhe001.github.io/2021/04/01/language/java/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%97%A0%E6%B3%95%E6%8D%95%E8%8E%B7%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%BC%82%E5%B8%B8%E8%B8%A9%E5%9D%91%E5%A4%8D%E7%9B%98/</id>
    <published>2021-04-01T10:18:21.503Z</published>
    <updated>2021-04-01T10:18:21.503Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h2><h3 id="éœ€æ±‚ä¿¡æ¯">éœ€æ±‚ä¿¡æ¯</h3><p>æœ€è¿‘åœ¨å·¥ä½œä¸­æœ‰ä¸ªéœ€æ±‚ï¼Œå…ˆåœ¨AæœåŠ¡é¡µé¢å¢åŠ ä¸€æ¡æ•°æ®ï¼Œç„¶åå»BæœåŠ¡æŸ¥è¯¢æ­¤æ•°æ®çš„è¯¦ç»†ä¿¡æ¯</p><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><p>ä¸ºäº†ä½¿AæœåŠ¡çš„æ–°å¢æ•°æ®æ¥å£å¿«é€Ÿå“åº”ï¼Œåœ¨æŸ¥è¯¢BæœåŠ¡æ•°æ®è¯¦æƒ…çš„åœ°æ–¹ä½¿ç”¨äº†çº¿ç¨‹æ± å¼‚æ­¥æŸ¥è¯¢ä¸æ›´æ–°ã€‚</p><h3 id="é—®é¢˜ç°è±¡">é—®é¢˜ç°è±¡</h3><p>åœ¨éªŒè¯æ—¶å‘ç°æ•°æ®åº“ä¸­çš„æ•°æ®å­—æ®µä¸å…¨ï¼Œç»åˆ†æç¼ºå°‘çš„éƒ½æ˜¯éœ€è¦ä»BæœåŠ¡æŸ¥è¯¢å¹¶æ›´æ–°çš„å­—æ®µ</p><h3 id="åˆæ­¥å®šä½">åˆæ­¥å®šä½</h3><p>çŒœæµ‹åº”è¯¥æ˜¯æŸ¥è¯¢BæœåŠ¡æ—¶å‡ºäº†ä¸€äº›å¼‚å¸¸ï¼Œè€Œç”±äºä¸è§„èŒƒä½¿ç”¨çº¿ç¨‹æ± å¯¼è‡´å¼‚å¸¸æ²¡æœ‰æŠ›å‡ºï¼Œç›´æ¥æ‰“åˆ°äº†æ§åˆ¶å°ï¼Œæ•…AæœåŠ¡çš„æ—¥å¿—ç³»ç»Ÿå¹¶çœ‹ä¸åˆ°é”™è¯¯æ—¥å¿—ã€‚</p><h2 id="é—®é¢˜è§£å†³">é—®é¢˜è§£å†³</h2><ol><li>æŸ¥è¯¢BæœåŠ¡æ•°æ®è¯¦æƒ…æ—¶æš‚æ—¶å»æ‰ä½¿ç”¨çº¿ç¨‹æ± ï¼Œæ”¹ä¸ºåŒæ­¥è°ƒç”¨</li><li>å¢åŠ å®¹é”™å®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶æŸ¥è¯¢éœ€è¦ä»BæœåŠ¡è·å–ç¼ºå¤±å­—æ®µçš„æ•°æ®è¿›è¡Œæ›´æ–°</li></ol><p>ä¸Šçº¿åè§‚å¯Ÿï¼Œæ–°å¢çš„æ•°æ®ä¸å†æœ‰éƒ¨åˆ†å­—æ®µç¼ºå¤±çš„æƒ…å†µï¼›é—®é¢˜è§£å†³ã€‚</p><h2 id="é—®é¢˜å¤ç›˜">é—®é¢˜å¤ç›˜</h2><h3 id="AæœåŠ¡çº¿ç¨‹æ± çš„ä½¿ç”¨">AæœåŠ¡çº¿ç¨‹æ± çš„ä½¿ç”¨</h3><p>çº¿ç¨‹æ± å®šä¹‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢BæœåŠ¡æ•°æ®è¯¦æƒ…çš„çº¿ç¨‹æ± </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ExecutorService executorService = <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0L</span>, TimeUnit.MICROSECONDS,</span><br><span class="line">        <span class="keyword">new</span> LinkedBlockingDeque&lt;&gt;(), <span class="keyword">new</span> ThreadFactoryBuilder().setNameFormat(<span class="string">&quot;queryDataDetail-%d&quot;</span>).build());</span><br></pre></td></tr></table></figure><p>çº¿ç¨‹æ± ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(String contract)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 0ã€æ£€æŸ¥åˆåŒå¿…é¡»ä¸å­˜åœ¨</span></span><br><span class="line">    checkIfExist(contract);</span><br><span class="line">    <span class="comment">// 1ã€ä¿å­˜åˆåŒæ•°æ®</span></span><br><span class="line">    Entity entity = saveData(contract);</span><br><span class="line">    <span class="comment">// 2ã€ä»BæœåŠ¡æŸ¥è¯¢ç¼ºå¤±ä¿¡æ¯</span></span><br><span class="line">    executorService.execute(() -&gt; queryDataDetail(entity));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¦‚æ­¤ä½¿ç”¨æœ‰ä½•é—®é¢˜">å¦‚æ­¤ä½¿ç”¨æœ‰ä½•é—®é¢˜</h3><p>æˆ‘é‡æ–°å†™äº†ä¸€ä¸ªæµ‹è¯•æ–¹æ³•å¦‚ä¸‹ï¼š</p><p>1ã€å®šä¹‰ä¸€ä¸ªä¼šä¸€ç›´æŠ›å¼‚å¸¸çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¼•å…¥SystemOutRuleï¼Œç›‘å¬ç¨‹åºæ—¥å¿—è¾“å‡º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Rule</span></span><br><span class="line"><span class="keyword">public</span> SystemOutRule systemOutRule = <span class="keyword">new</span> SystemOutRule().enableLog();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¼•å…¥SystemOutRuleï¼Œç›‘å¬ç¨‹åºæ—¥å¿—è¾“å‡º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">runWithException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Thread thread = Thread.currentThread();</span><br><span class="line">    log.info(<span class="string">&quot;thread is &#123;&#125;&quot;</span>, thread);</span><br><span class="line">    log.info(<span class="string">&quot;eh=&#123;&#125;&quot;</span>, thread.getUncaughtExceptionHandler());</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> NicaiException(<span class="string">&quot;å‡ºé”™å•¦ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€ä½¿ç”¨çº¿ç¨‹æ± è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">    executorService.execute(<span class="keyword">this</span>::runWithException);</span><br><span class="line">    TimeUnit.MILLISECONDS.sleep(<span class="number">100L</span>);</span><br><span class="line">    <span class="comment">// æ–­è¨€ç¨‹åºæ‰“å°çš„æ—¥å¿—ä¸åŒ…å«â€œå‡ºé”™å•¦ï¼â€</span></span><br><span class="line">    Assert.assertFalse(systemOutRule.getLog().contains(<span class="string">&quot;å‡ºé”™å•¦ï¼&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ã€ä¸Šé¢çš„å•æµ‹æ–­è¨€æ˜¯æˆåŠŸçš„ï¼Œé‚£ä¹ˆå¼‚å¸¸è·‘å“ªé‡Œå»äº†ï¼Ÿä¸Šé¢çš„å•æµ‹åœ¨æ§åˆ¶å°çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/zheshiyigegexingwangzhan/images/raw/master//image-20200807110851677.png" alt="image-20200807110851677"></p><p>4ã€å¯ä»¥çœ‹å‡ºä¸Šé¢çš„å¼‚å¸¸ä¿¡æ¯æ˜¯ç›´æ¥è¾“å‡ºåˆ°äº†æ§åˆ¶å°ï¼Œè€Œä¸æ˜¯ç”±ç¨‹åºè¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œä¸»è¦åŸå› æ˜¯ä¸»ç¨‹åºæ²¡æœ‰æ•è·åˆ°æ­¤å¼‚å¸¸å¯¼è‡´çš„ã€‚ï¼ˆå…·ä½“åŸå› è¿˜æ²¡æœ‰æ·±å…¥ï¼‰</p><h3 id="å¦‚ä½•è§£å†³çº¿ç¨‹æ± çš„å¼‚å¸¸æ•è·é—®é¢˜">å¦‚ä½•è§£å†³çº¿ç¨‹æ± çš„å¼‚å¸¸æ•è·é—®é¢˜</h3><p>ä¸Šé¢çš„æµ‹è¯•å¯ä»¥è¯´æ˜åˆ°ä¸ºä»€ä¹ˆæ—¥å¿—é‡Œé¢æŸ¥ä¸åˆ°é”™è¯¯æ—¥å¿—ï¼Œé‚£ä¹ˆå¦‚ä½•æ•è·çº¿ç¨‹é‡Œçš„å¼‚å¸¸å‘¢ï¼Ÿ</p><h4 id="æ–¹æ³•1-ä½¿ç”¨UncaughtExceptionHandler">æ–¹æ³•1:ä½¿ç”¨UncaughtExceptionHandler</h4><p>1ã€åœ¨åˆ›å»ºçº¿ç¨‹æ± çš„æ—¶å€™ï¼Œè®¾ç½®ä¼ å…¥çš„ThreadFactoryçš„UncaughtExceptionHandlerå±æ€§ï¼Œæ­¤UncaughtExceptionHandlerä¼šå¤„ç†çº¿ç¨‹ä¸­çš„å¼‚å¸¸ï¼›ä¸‹é¢çš„ä¾‹å­æˆ‘ç›´æ¥æ‰“å°äº†å‡ºæ¥å¼‚å¸¸åŸå› å’Œå¼‚å¸¸æ ˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runWithUncaughtExceptionHandler</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    ExecutorService executorService = Executors.newCachedThreadPool(</span><br><span class="line">            <span class="keyword">new</span> ThreadFactoryBuilder()</span><br><span class="line">                    .setUncaughtExceptionHandler((t, e) -&gt; log.info(<span class="string">&quot;UncaughtExceptionHandler caught, error_message=&#123;&#125;&quot;</span>, e.getMessage(), e))</span><br><span class="line">                    .build());</span><br><span class="line">    executorService.execute(<span class="keyword">this</span>::runWithException);</span><br><span class="line">    TimeUnit.MILLISECONDS.sleep(<span class="number">100L</span>);</span><br><span class="line">    Assert.assertTrue(systemOutRule.getLog().contains(<span class="string">&quot;å‡ºé”™å•¦ï¼&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€ä¸Šé¢çš„å•æµ‹è¿è¡Œç»“æœå¦‚ä¸‹ï¼šï¼ˆå¯ä»¥å’Œä¸Šé¢çš„è¿è¡Œç»“æœè¿›è¡Œæ¯”å¯¹ï¼‰</p><p><img src="https://gitee.com/zheshiyigegexingwangzhan/images/raw/master//image-20200807111728213.png" alt="image-20200807111728213"></p><p>3ã€ä»ä¸Šé¢çš„è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºå¼‚å¸¸ä¿¡æ¯æ˜¯ç”±ç¨‹åºæ•è·åå†è¾“å‡ºå‡ºæ¥ï¼Œè¿™æ ·å°±ä¸ä¼šå¯¼è‡´æŸ¥ä¸åˆ°å¼‚å¸¸æ—¥å¿—äº†ã€‚</p><h4 id="æ–¹æ³•2-ä½¿ç”¨guavaæ‰©å±•çš„FutureCallback">æ–¹æ³•2:ä½¿ç”¨guavaæ‰©å±•çš„FutureCallback</h4><p>1ã€guavaå¯¹jdkçš„çº¿ç¨‹åšäº†ä¸€äº›æ‰©å±•ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯FutureCallbackï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runWithGuavaThreadPool</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    ListeningExecutorService executorService = MoreExecutors.listeningDecorator(Executors.newCachedThreadPool());</span><br><span class="line">    ListenableFuture&lt;String&gt; listenableFuture = executorService.submit(<span class="keyword">this</span>::runWithException);</span><br><span class="line">    Futures.addCallback(listenableFuture, <span class="keyword">new</span> FutureCallback&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String result)</span> </span>&#123;</span><br><span class="line">            log.info(<span class="string">&quot;success! result = &#123;&#125;&quot;</span>, result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Throwable t)</span> </span>&#123;</span><br><span class="line">            log.error(<span class="string">&quot;guava FutureCallback caught, error_message=&#123;&#125;&quot;</span>, t.getMessage(), t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, executorService);</span><br><span class="line">    TimeUnit.MILLISECONDS.sleep(<span class="number">100L</span>);</span><br><span class="line">    Assert.assertTrue(systemOutRule.getLog().contains(<span class="string">&quot;å‡ºé”™å•¦ï¼&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€ä¸Šé¢çš„å•æµ‹è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/zheshiyigegexingwangzhan/images/raw/master//image-20200807112535447.png" alt="image-20200807112535447"></p><h2 id="é—®é¢˜æ€»ç»“">é—®é¢˜æ€»ç»“</h2><p>1ã€é€šè¿‡ä¸Šé¢çš„æµ‹è¯•ï¼Œä¼˜åŒ–AæœåŠ¡çš„çº¿ç¨‹æ± å®šä¹‰ï¼Œä½¿ä¹‹åœ¨é‡åˆ°å¼‚å¸¸æ—¶èƒ½å¤Ÿæ­£å¸¸è¢«æ•è·ï¼Œèƒ½è¾“å‡ºï¼Œæ–¹ä¾¿é—®é¢˜å®šä½ï¼›è¡¥å¿å®šæ—¶ä»»åŠ¡ä¹Ÿèƒ½å¯¹ç¬¬ä¸€æ¬¡æŸ¥è¯¢å¼‚å¸¸è¿›è¡Œå®¹é”™ï¼Œä¿è¯æ•°æ®èƒ½å¤ŸåŒæ­¥è¿‡æ¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢BæœåŠ¡æ•°æ®è¯¦æƒ…çš„çº¿ç¨‹æ± </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ExecutorService executorService = <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0L</span>, TimeUnit.MICROSECONDS,</span><br><span class="line">        <span class="keyword">new</span> LinkedBlockingDeque&lt;&gt;(), <span class="keyword">new</span> ThreadFactoryBuilder()</span><br><span class="line">        .setUncaughtExceptionHandler((t, e) -&gt; log.error(<span class="string">&quot;æŸ¥è¯¢æ•°æ®è¯¦æƒ…çš„çº¿ç¨‹æ± å¼‚å¸¸,error_message=&#123;&#125;&quot;</span>, e.getMessage(), e))</span><br><span class="line">        .setNameFormat(<span class="string">&quot;queryDataDetail-%d&quot;</span>).build());</span><br></pre></td></tr></table></figure><p>2ã€å½“ç„¶æ­¤é—®é¢˜æ›´æ·±å±‚çš„é—®é¢˜è¿˜æ²¡æœ‰å®Œå…¨è§£ç­”</p><ul><li>ä¸ºä»€ä¹ˆçº¿ç¨‹é‡Œçš„å¼‚å¸¸ä¸ä¼šè¢«æ•è·ï¼Ÿ</li><li>UncaughtExceptionHandlerçš„è¿è¡ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>Guavaçš„FutureCallbackæ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ</li></ul><p>3ã€<a href="https://github.com/guozhe001/my-tools/blob/master/my-learn/my-experience/src/test/java/com/nicai/experience/concurrency/ExceptionThreadTest.java">æµ‹è¯•ä»£ç æºç åœ°å€</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é—®é¢˜æè¿°&quot;&gt;é—®é¢˜æè¿°&lt;/h2&gt;
&lt;h3 id=&quot;éœ€æ±‚ä¿¡æ¯&quot;&gt;éœ€æ±‚ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;æœ€è¿‘åœ¨å·¥ä½œä¸­æœ‰ä¸ªéœ€æ±‚ï¼Œå…ˆåœ¨AæœåŠ¡é¡µé¢å¢åŠ ä¸€æ¡æ•°æ®ï¼Œç„¶åå»BæœåŠ¡æŸ¥è¯¢æ­¤æ•°æ®çš„è¯¦ç»†ä¿¡æ¯&lt;/p&gt;
&lt;h3 id=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†ä½¿AæœåŠ¡çš„æ–°å¢æ•°æ®æ¥å£å¿«é€Ÿå“</summary>
      
    
    
    
    <category term="Java" scheme="https://guozhe001.github.io/categories/Java/"/>
    
    
    <category term="Java" scheme="https://guozhe001.github.io/tags/Java/"/>
    
    <category term="çº¿ç¨‹æ± " scheme="https://guozhe001.github.io/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ä½¿ç”¨Springçš„æ—¶å€™åº”è¯¥ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥bean</title>
    <link href="https://guozhe001.github.io/2021/04/01/language/java/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5%E8%80%8C%E4%B8%8D%E6%98%AF@Autoware/"/>
    <id>https://guozhe001.github.io/2021/04/01/language/java/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5%E8%80%8C%E4%B8%8D%E6%98%AF@Autoware/</id>
    <published>2021-04-01T10:18:21.502Z</published>
    <updated>2021-04-01T10:18:21.503Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜">é—®é¢˜</h1><p>å¯¹äºä½¿ç”¨Springæ¡†æ¶çš„javaå¼€å‘äººå‘˜å¯¹ä¸‹é¢çš„ä»£ç åº”è¯¥å¾ˆç†Ÿæ‚‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HelloService helloService;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¯¹äºä¸Šé¢çš„ä»£ç ï¼ŒSonarä¼šæç¤ºï¼š<code>Remove this annotation and use constructor injection instead.</code></p><p>ç¿»è¯‘æˆä¸­æ–‡å³ï¼šç§»é™¤<code>@Autowired</code>æ³¨è§£ä½¿ç”¨æ„é€ å™¨æ³¨å…¥æ–¹å¼æ›¿ä»£ã€‚</p><p>IntelliJ IDEAä¹Ÿä¼šæç¤º<code>Field injection is not recommended</code></p><p>ç¿»è¯‘æˆä¸­æ–‡å³ï¼šä¸æ¨èä½¿ç”¨å­—æ®µæ³¨å…¥</p><h1 id="é‚£ä¹ˆä»–ä»¬ä¸ºä»€ä¹ˆè¿™ä¹ˆå»ºè®®å‘¢ï¼Ÿ">é‚£ä¹ˆä»–ä»¬ä¸ºä»€ä¹ˆè¿™ä¹ˆå»ºè®®å‘¢ï¼Ÿ</h1><h2 id="é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Springæœ‰å“ªäº›æ³¨å…¥beançš„æ–¹å¼">é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Springæœ‰å“ªäº›æ³¨å…¥beançš„æ–¹å¼</h2><ol><li>æ„é€ æ–¹æ³•æ³¨å…¥</li><li>setæ–¹æ³•æ³¨å…¥</li><li>å­—æ®µæ³¨å…¥ï¼Œå³<code>@Autowired</code>æ³¨è§£</li></ol><h2 id="å¦‚ä½•ä½¿ç”¨è¿™äº›æ–¹å¼">å¦‚ä½•ä½¿ç”¨è¿™äº›æ–¹å¼</h2><h3 id="æ„é€ æ–¹æ³•æ³¨å…¥">æ„é€ æ–¹æ³•æ³¨å…¥</h3><p>åœ¨Spring4.3ç‰ˆæœ¬ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»è¦åœ¨æ„é€ æ–¹æ³•ä¸ŠåŠ <code>@Autowired</code>æ³¨è§£ï¼›åœ¨æ–°ç‰ˆæœ¬ä¸­å¦‚æœå½“å‰ç±»åªæœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•<code>@Autowired</code>æ³¨è§£å°±æ˜¯å¯é€‰çš„ã€‚</p><p>åªæœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidationController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HelloService helloService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ValidationController</span><span class="params">(HelloService helloService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.helloService = helloService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤šä¸ªæ„é€ æ–¹æ³•ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidationController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HelloService helloService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ValidationController</span><span class="params">(HelloService helloService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.helloService = helloService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ValidationController</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="setæ–¹æ³•æ³¨å…¥">setæ–¹æ³•æ³¨å…¥</h3><p>è¿™ç§æ–¹å¼Springä¼šæ‰¾åˆ° <code>@Autowired</code> æ³¨è§£å¹¶ä¸”è°ƒç”¨setæ–¹æ³•æ¥æ³¨å…¥æ‰€éœ€çš„ä¾èµ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidationController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HelloService helloService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HelloService <span class="title">getHelloService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> helloService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHelloService</span><span class="params">(HelloService helloService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.helloService = helloService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­—æ®µæ³¨å…¥">å­—æ®µæ³¨å…¥</h3><p>é€šè¿‡åŸºäºå­—æ®µçš„æ³¨å…¥ï¼ŒSpringåœ¨ä½¿ç”¨<code>@Autowired</code>æ³¨é‡Šè¿›è¡Œæ³¨é‡Šæ—¶ï¼Œç›´æ¥å°†æ‰€éœ€çš„ä¾èµ–é¡¹åˆ†é…ç»™å­—æ®µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidationController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HelloService helloService;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿™äº›æ–¹å¼æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹">è¿™äº›æ–¹å¼æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹</h2><p>æ—¢ç„¶è¦<em><strong>ç§»é™¤<code>@Autowired</code>æ³¨è§£ä½¿ç”¨æ„é€ å™¨æ³¨å…¥æ–¹å¼æ›¿ä»£</strong></em>ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸»è¦è®¨ä¸€ä¸‹è¿™äº›æ–¹å¼çš„ä¼˜ç¼ºç‚¹ã€‚</p><h3 id="å­—æ®µæ³¨å…¥æ–¹å¼çš„ä¼˜ç‚¹">å­—æ®µæ³¨å…¥æ–¹å¼çš„ä¼˜ç‚¹</h3><p>ç›¸æ¯”è¾ƒå¦å¤–ä¸¤ç§æ–¹å¼ï¼Œå­—æ®µæ³¨å…¥æ–¹å¼çš„ä»£ç é‡æ›´å°‘ã€æ›´æ•´é½ã€æ›´ç®€æ´</p><h3 id="æ„é€ æ–¹æ³•æ³¨å…¥çš„ä¼˜ç‚¹">æ„é€ æ–¹æ³•æ³¨å…¥çš„ä¼˜ç‚¹</h3><h4 id="å®¹æ˜“å‘ç°ä»£ç çš„åå‘³é“">å®¹æ˜“å‘ç°ä»£ç çš„åå‘³é“</h4><p>setæ–¹æ³•æ³¨å…¥å’Œå­—æ®µæ³¨å…¥ä¼š<em><strong>é—´æ¥</strong></em>è¿å<strong>å•ä¸€èŒè´£åŸåˆ™</strong>ã€‚</p><p>å› ä¸ºåœ¨ä¸€ä¸ªç±»ä¾èµ–å¾ˆå¤šå…¶ä»–ç±»çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥å°±ä¼šå‘ç°æ„é€ æ–¹æ³•çš„å‚æ•°å¤ªå¤šï¼Œè¿™ä¼šè®©å¼€å‘äººå‘˜åæ€è¿™ä¸ªç±»çœŸçš„éœ€è¦è¿™ä¹ˆå¤šä¾èµ–å—ï¼Ÿå½“å‰ç±»æ˜¯ä¸æ˜¯èŒè´£è¿‡å¤šï¼Ÿ</p><p>è€Œä½¿ç”¨å­—æ®µæ³¨å…¥æ—¶ï¼Œå°±ä¼šæŠŠä¸€äº›ä¾‹å¦‚sonarçš„æç¤ºå±è”½æ‰ï¼Œè®©å¼€å‘äººå‘˜è¯¯ä»¥ä¸ºè¿™æ ·åšæ²¡æœ‰é—®é¢˜</p><h4 id="å¯ä»¥åˆ›å»ºä¸å¯å˜ç±»">å¯ä»¥åˆ›å»ºä¸å¯å˜ç±»</h4><p>åœ¨ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥æ—¶å› ä¸ºæ„é€ æ–¹æ³•æ˜¯åˆ›å»ºä¾èµ–å¯¹è±¡çš„å”¯ä¸€æ–¹å¼ï¼Œè¿™éå¸¸æœ‰åŠ©äºè®©æˆ‘ä»¬åˆ›å»ºä¸å¯å˜çš„å¯¹è±¡ã€‚</p><p>æƒ³è±¡ä¸€ä¸‹åˆ›å»ºä¸€ä¸ªbeanä¹‹åä½ å¯ä»¥é€šè¿‡setæ–¹æ³•éšæ„ä¿®æ”¹æ­¤ç±»çš„ä¾èµ–ï¼Œåœ¨å‡ºç°é—®é¢˜æ—¶æ˜¯å¾ˆéš¾å®šä½çš„ã€‚</p><p><code>@Autowired</code>çš„æºç æœ‰ä¸€æ®µæ³¨é‡Šå¦‚ä¸‹ï¼š<code>Fields are injected right after construction of a bean, before any config methods are invoked. Such a config field does not have to be public.</code><br>å¤§æ„æ˜¯ä½¿ç”¨<code>@Autowired</code>æ³¨è§£æ—¶ï¼Œbeanæ˜¯åœ¨æ„é€ å½“å‰çš„beanä¹‹åï¼Œå¹¶ä¸”åœ¨ä»»ä½•çš„å…¶ä»–æ–¹æ³•è°ƒç”¨ä¹‹å‰æ³¨å…¥ï¼Œå› æ­¤æ— æ³•è®¾ç½®æˆfinalç±»å‹çš„å­—æ®µã€‚</p><h4 id="æ›´æ˜æ˜¾çš„å£°æ˜æ‰€æœ‰çš„ä¾èµ–">æ›´æ˜æ˜¾çš„å£°æ˜æ‰€æœ‰çš„ä¾èµ–</h4><p>ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªç±»æ—¶å°±ä¼šæš´éœ²ç»™ä½¿ç”¨è€…è¯´æˆ‘è¦ä¾èµ–æ„é€ æ–¹æ³•ä¸­çš„ç±»ã€‚</p><p>ä½†æ˜¯ä½¿ç”¨å­—æ®µæ³¨å…¥æ—¶ï¼Œä½¿ç”¨è€…å…¶å®å¹¶ä¸çŸ¥é“è¿™ä¸ªç±»ä¾èµ–äº†å“ªäº›ç±»ï¼Œé™¤éæˆ‘åˆ°æ­¤ç±»ä¸­æŸ¥çœ‹è¿™ä¸ªç±»æœ‰å¤šå°‘ä¸ªå­—æ®µæ˜¯æœ‰<code>@Autowired</code>æ³¨è§£ã€‚</p><h4 id="ä¸æ–¹ä¾¿è¿ç§»">ä¸æ–¹ä¾¿è¿ç§»</h4><p>springå®ç°äº†DIï¼ˆæ§åˆ¶åè½¬ï¼‰ï¼Œä½†å¹¶éæ˜¯DIæœ¬èº«ï¼›<br>ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥æ—¶ï¼Œé™¤äº†åœ¨ç±»ä¸Šé¢æœ‰<code>@Service</code>ã€<code>@Component</code>ç­‰çš„æ³¨è§£ï¼Œæ²¡æœ‰å…¶ä»–çš„Springç›¸å…³çš„æ›´å¤šçš„æ³¨è§£ã€‚</p><p>ä½¿ç”¨å­—æ®µæ³¨å…¥æ—¶ï¼Œé™¤äº†åœ¨ç±»ä¸Šé¢æœ‰<code>@Service</code>ã€<code>@Component</code>ç­‰çš„æ³¨è§£ä¹‹å¤–åˆä½¿ç”¨äº†Springçš„<code>@Autowired</code>æ³¨è§£ï¼Œå¦‚æœæŠŠæ­¤ç±»è¿ç§»åˆ°å…¶ä»–æ²¡æœ‰springçš„ç¯å¢ƒæ—¶æ˜¯å®Œæˆä¸äº†æ³¨å…¥çš„ã€‚</p><h4 id="ä¸æ–¹ä¾¿æµ‹è¯•">ä¸æ–¹ä¾¿æµ‹è¯•</h4><p>åœ¨ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥æ—¶ï¼Œå•å…ƒæµ‹è¯•æ—¶å¼€å‘äººå‘˜å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªmockçš„ç±»æˆ–è€…å…¶ä»–çš„ä»»ä½•è¢«æµ‹è¯•ç±»ä¾èµ–çš„å­ç±»ï¼›</p><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨setæ–¹å¼æ³¨å…¥ä¸€ä¸ªmockçš„ç±»ï¼Œä½†æ˜¯å¦‚æœä»£ç ä¿®æ”¹äº†æ–°å¢äº†ä¸€ä¸ªä¾èµ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾ˆå®¹æ˜“å¿˜æ‰åœ¨æµ‹è¯•ä»£ç ä¸­setæ–°å¢çš„ä¾èµ–ï¼Œç›´åˆ°è¿è¡Œçš„æ—¶å€™æˆ‘ä»¬æ‰ä¼šçœ‹åˆ°å¯èƒ½æœ‰NPEå¼‚å¸¸çˆ†å‡ºï¼›ä½†æ˜¯æ„é€ æ–¹æ³•å°±ä¸å¿…æœ‰è¿™ç§çƒ¦æ¼ï¼Œå› ä¸ºå¦‚æœæ–°å¢äº†ä¸€ä¸ªä¾èµ–ï¼Œæµ‹è¯•æ–¹æ³•ä¼šé©¬ä¸Šç¼–è¯‘ä¸é€šè¿‡ã€‚</p><p>ä½¿ç”¨å­—æ®µæ³¨å…¥ï¼Œå¿…é¡»ä¾èµ–Springå»å¸®åŠ©æ³¨å…¥ä¾èµ–çš„ç±»</p><h1 id="æ€»ç»“">æ€»ç»“</h1><p>é€šè¿‡æ„é€ æ–¹æ³•æ³¨å…¥beanæ˜¯æˆ‘ä»¬æ›´å®¹æ˜“åˆ›å»ºä¸å¯å˜ç±»ï¼Œä»£ç æ›´å¥å£®ã€æ›´å…·æœ‰å¯æµ‹è¯•æ€§ã€æ›´å®¹æ˜“é¿å…NPEã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;é—®é¢˜&lt;/h1&gt;
&lt;p&gt;å¯¹äºä½¿ç”¨Springæ¡†æ¶çš„javaå¼€å‘äººå‘˜å¯¹ä¸‹é¢çš„ä»£ç åº”è¯¥å¾ˆç†Ÿæ‚‰ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;</summary>
      
    
    
    
    <category term="Java" scheme="https://guozhe001.github.io/categories/Java/"/>
    
    <category term="Spring" scheme="https://guozhe001.github.io/categories/Java/Spring/"/>
    
    
    <category term="Java" scheme="https://guozhe001.github.io/tags/Java/"/>
    
    <category term="Spring" scheme="https://guozhe001.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>åˆ›å»ºä¸€ä¸ªæ–°çš„channel</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83/</id>
    <published>2021-04-01T10:18:21.501Z</published>
    <updated>2021-04-01T10:18:21.502Z</updated>
    
    <content type="html"><![CDATA[<p>å®˜æ–¹æ–‡æ¡£:<a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html">deployment_guide_overview</a></p><h1 id="Deploying-a-production-network">Deploying a production network</h1><ul><li><p><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#dg-step-one-decide-on-your-network-configuration">Step one: Decide on your network configuration</a></p></li><li><p><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#dg-step-two-set-up-a-cluster-for-your-resources">Step two: Set up a cluster for your resources</a></p></li><li><p><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#dg-step-three-set-up-your-cas">Step three: Set up your CAs</a></p></li><li><p><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#dg-step-four-use-the-ca-to-create-identities-and-msps">Step four: Use the CA to create identities and MSPs</a></p></li><li><ul><li><p><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#dg-step-five-deploy-nodes">Step five: Deploy peers and ordering nodes</a></p><p><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#dg-create-a-peer">Creating a peer</a><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#dg-create-an-ordering-node">Creating an ordering node</a></p></li></ul></li></ul><h2 id="Step-one-Decide-on-your-network-configuration">Step one: Decide on your network configuration</h2><ul><li><strong>Certificate Authority configuration</strong>.</li><li><strong>Use Organizational Units or not?</strong></li><li><strong>Database type.</strong> ï¼ˆç›¸åŒçš„channelçš„peerèŠ‚ç‚¹å¿…é¡»ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“ï¼‰</li><li><strong>Channels and private data.</strong></li><li><strong>Container orchestration.</strong></li><li><strong>Chaincode deployment method</strong>ï¼ˆä½¿ç”¨å†…ç½®çš„éƒ¨ç½²æ–¹å¼è¿˜æ˜¯å¤–éƒ¨çš„éƒ¨ç½²æ–¹å¼ï¼Œå¦‚ä½¿ç”¨k8séƒ¨ç½²ï¼‰</li><li><strong>Using firewalls</strong></li></ul><h2 id="Step-two-Set-up-a-cluster-for-your-resources">Step two: Set up a cluster for your resources</h2><h3 id="Managing-your-infrastructure">Managing your infrastructure</h3><ul><li><p>Using secret objects to securely store important configuration files in your cluster. ï¼ˆä½¿ç”¨ç§˜å¯†å¯¹è±¡å°†é‡è¦çš„é…ç½®æ–‡ä»¶å®‰å…¨åœ°å­˜å‚¨åœ¨ç¾¤é›†ä¸­ã€‚ï¼‰</p></li><li><p>Cluster considerations and node sizing.</p></li><li><p>How you choose to mount your volumes. It is a best practice to mount the volumes relevant to your nodes external to the place where your nodes are deployed. (æ‚¨å¦‚ä½•é€‰æ‹©æŒ‚è½½å·ã€‚æœ€ä½³å®è·µæ˜¯å°†ä¸æ‚¨çš„èŠ‚ç‚¹ç›¸å…³çš„å·æŒ‚è½½åˆ°éƒ¨ç½²èŠ‚ç‚¹çš„å¤–éƒ¨ã€‚)</p></li><li><p>How you will monitor your resources.</p></li></ul><h2 id="Step-three-Set-up-your-CAs">Step three: Set up your CAs</h2><p>The first component that must be deployed in a Fabric network is a CA. This is because the certificates associated with a node (not just for the node itself but also the certificates identifying who can administer the node) must be created before the node itself can be deployed.</p><p>å¿…é¡»åœ¨Fabricç½‘ç»œä¸­éƒ¨ç½²çš„ç¬¬ä¸€ä¸ªç»„ä»¶æ˜¯CAã€‚è¿™æ˜¯å› ä¸ºå¿…é¡»å…ˆåˆ›å»ºä¸èŠ‚ç‚¹å…³è”çš„è¯ä¹¦ï¼ˆä¸ä»…æ˜¯é’ˆå¯¹èŠ‚ç‚¹æœ¬èº«çš„è¯ä¹¦ï¼Œè€Œä¸”è¿˜åŒ…æ‹¬æ ‡è¯†è°å¯ä»¥ç®¡ç†è¯¥èŠ‚ç‚¹çš„è¯ä¹¦ï¼‰ï¼Œç„¶åæ‰èƒ½éƒ¨ç½²èŠ‚ç‚¹æœ¬èº«ã€‚</p><ul><li><p>One CA (or more, if you are using intermediate CAs â€” more on intermediate CAs below) is used to generate (through a process called â€œenrollmentâ€) the certificates of the admin of an organization, the MSP of that organization, and any nodes owned by that organization. This CA will also generate the certificates for any additional users.This CA will also generate the certificates for any additional users. Because of its role in â€œenrollingâ€ identities, this CA is sometimes called the â€œenrollment CAâ€ or the â€œecert CAâ€.</p><p>ä¸€ä¸ªCAç”¨äºç”Ÿæˆè¯¥ç»„ç»‡ç®¡ç†å‘˜ã€è¯¥ç»„ç»‡çš„MSPå’Œè¯¥ç»„ç»‡æ‰€æ‹¥æœ‰çš„ä»»ä½•èŠ‚ç‚¹çš„è¯ä¹¦ã€‚è¯¥CAè¿˜å°†ä¸ºä»»ä½•å…¶ä»–ç”¨æˆ·ç”Ÿæˆè¯ä¹¦ã€‚ç”±äºå…¶åœ¨â€œæ³¨å†Œâ€èº«ä»½ä¸­çš„ä½œç”¨ï¼Œå› æ­¤æœ‰æ—¶å°†è¯¥CAç§°ä¸ºâ€œæ³¨å†ŒCAâ€æˆ–â€œè¯ä¹¦CAâ€ã€‚</p></li><li><p>The other CA generates the certificates used to secure communications on Transport Layer Security (TLS).For this reason, this CA is often referred to as a â€œTLS CAâ€. These TLS certificates are attached to actions as a way of preventing â€œman in the middleâ€ attacks.</p><p>å¦ä¸€ä¸ªCAç”Ÿæˆç”¨äºä¿æŠ¤ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆTLSï¼‰ä¸Šçš„é€šä¿¡çš„è¯ä¹¦ã€‚å› æ­¤ï¼Œè¯¥CAé€šå¸¸è¢«ç§°ä¸ºâ€œ TLS CAâ€ã€‚å°†è¿™äº›TLSè¯ä¹¦é™„åŠ åˆ°æ“ä½œä¸­ï¼Œä»¥é˜²æ­¢â€œä¸­é—´äººâ€æ”»å‡»ã€‚</p></li></ul><p>Deploy a Production CA</p><ul><li><a href="https://hyperledger-fabric-ca.readthedocs.io/en/latest/deployguide/ca-deploy-topology.html">Planning for a CA</a></li><li><a href="https://hyperledger-fabric-ca.readthedocs.io/en/latest/deployguide/ca-config.html">Checklist for a production CA server</a></li><li><a href="https://hyperledger-fabric-ca.readthedocs.io/en/latest/deployguide/cadeploy.html">CA deployment steps</a></li></ul><h2 id="Step-four-Use-the-CA-to-create-identities-and-MSPs">Step four: Use the CA to create identities and MSPs</h2><p>For each organization, you will need to, at a minimum:</p><ul><li><p><strong>Register and enroll an admin identity and create an MSP</strong>.</p><p><strong>you must create the org admin identity before creating the local MSP of a node, since the certificate of the node admin must be used when creating the local MSP</strong>.</p></li><li><p><strong>Register and enroll node identities</strong>.</p></li></ul><h2 id="Step-five-Deploy-peers-and-ordering-nodes">Step five: Deploy peers and ordering nodes</h2><p>Before any node can be deployed, its configuration file must be customized. For the peer, this file is called <code>core.yaml</code>, while the configuration file for ordering nodes is called <code>orderer.yaml</code>.</p><p>åœ¨ä»»ä½•çš„èŠ‚ç‚¹å¯ä»¥è¢«éƒ¨ç½²ä¹‹å‰ï¼Œå¿…é¡»å…ˆè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ã€‚</p><ul><li>peerèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ï¼š <code>core.yaml</code></li><li>orderingèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶<code>orderer.yaml</code></li></ul><p>You have three main options for tuning your configuration.</p><ol><li>Edit the YAML file bundled with the binaries.</li><li>Use environment variable overrides when deploying.</li><li>Specify flags on CLI commands.</li></ol><h3 id="Creating-a-peer">Creating a peer</h3><p>Among the parameters in <code>core.yaml</code>, there are:</p><ul><li><strong>Identifiers</strong>: these include not just the paths to the relevant local MSP and Transport Layer Security (TLS) certificates, but also the name (known as the â€œpeer IDâ€) of the peer and the MSP ID of the organization that owns the peer.</li><li><strong>Addresses and paths</strong>: because peers are not entities unto themselves but interact with other peers and components, you must specify a series of addresses in the configuration. These include addresses where the peer itself can be found by other components as well as the addresses where, for example, chaincodes can be found (if you are employing external chaincodes). Similarly, you will need to specify the location of your ledger (as well as your state database type) and the path to your external builders (again, if you intend to employ external chaincodes). These include <strong>Operations and metrics</strong>, which allow you to set up methods for monitoring the health and performance of your peer through the configuration of endpoints.</li><li><strong>Gossip</strong>: components in Fabric networks communicate with each other using the â€œgossipâ€ protocol. Through this protocol, they can be discovered by the discovery service and disseminate blocks and private data to each other. Note that gossip communications are secured using TLS.</li></ul><p>Deploying a production peer</p><ul><li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deploypeer/peerplan.html">Planning for a production peer</a></li><li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deploypeer/peerchecklist.html">Checklist for a production peer</a></li><li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deploypeer/peerdeploy.html">Deploy the peer</a></li></ul><h3 id="Creating-an-ordering-node">Creating an ordering node</h3><p>Among the parameters in <code>orderer.yaml</code>, there are:</p><ul><li><strong>Identifiers</strong>: these include not just the paths to the relevant local MSP and Transport Layer Security (TLS) certificates, but also the MSP ID of the organization that owns the ordering node.</li><li><strong>Addresses and paths</strong>: because ordering nodes interact with other components, you must specify a series of addresses in the configuration. These include addresses where the ordering node itself can be found by other components as well as <strong>Operations and metrics</strong>, which allow you to set up methods for monitoring the health and performance of your ordering node through the configuration of endpoints.</li></ul><p>Deploying a production ordering node</p><ul><li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployorderer/ordererplan.html">Planning for an ordering service</a></li><li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployorderer/ordererchecklist.html">Checklist for a production ordering node</a></li><li><a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployorderer/ordererdeploy.html">Deploy the ordering service</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å®˜æ–¹æ–‡æ¡£:&lt;a href=&quot;https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html&quot;&gt;deployment_guide_overview&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/"/>
    
    <category term="channel" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/channel/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/tags/Hyperledger-Fabric/"/>
    
    <category term="channel" scheme="https://guozhe001.github.io/tags/channel/"/>
    
  </entry>
  
  <entry>
    <title>éšç§˜äº¤æ˜“.md</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E9%9A%90%E7%A7%98%E4%BA%A4%E6%98%93/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E9%9A%90%E7%A7%98%E4%BA%A4%E6%98%93/</id>
    <published>2021-04-01T10:18:21.500Z</published>
    <updated>2021-04-01T10:18:21.501Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªå·±å¼€å‘çš„æ™ºèƒ½åˆçº¦åœ¨channelä¸Šçš„æ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ç¬¦åˆç°å®ä¸–ç•Œä¸­çš„äº¤æ˜“è§„åˆ™ã€‚ç†è®ºä¸Šä¸¤ä¸ªç»„ç»‡ä¹‹é—´çš„äº¤æ˜“æ˜¯ä¸å…è®¸åˆ«äººçœ‹åˆ°çš„ã€‚æ‰€ä»¥è¿™æ¬¡æˆ‘ä½¿ç”¨fabric-samplesæä¾›çš„<code>asset-transfer-secured-agreement</code>æ¥ä½œä¸ºæˆ‘çš„ä¾›åº”é“¾é‡‘èåŒºå—é“¾é¡¹ç›®çš„chaincodeã€‚</p><h2 id="éƒ¨ç½²é“¾ç ">éƒ¨ç½²é“¾ç </h2><h3 id="æ‰“åŒ…">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package secured_supply.5.tar.gz --path ./asset-transfer-secured-agreement/chaincode-go --lang golang --label secured_supply_15.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-æ¯ä¸ªpeeréƒ½è¦å®‰è£…ï¼š">å®‰è£…é“¾ç åŒ…,æ¯ä¸ªpeeréƒ½è¦å®‰è£…ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install secured_supply.5.tar.gz</span><br></pre></td></tr></table></figure><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=secured_supply_22.0:e815ca2d270dea029bc6992952140b1288a440aba8c430853f72eee7d5de24a7</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰ï¼Œæ¯ä¸ªpeeréƒ½è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š">æ‰¹å‡†é“¾ç å®šä¹‰ï¼Œæ¯ä¸ªpeeréƒ½è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name secured_supply --version 23.0 --package-id $CC_PACKAGE_ID --sequence 23 --signature-policy &quot;OR(&#x27;GylCoreOrg1MSP.member&#x27;,&#x27;GylFOrg1MSP.member&#x27;,&#x27;GylSOrg1MSP.member&#x27;,&#x27;GylSOrg2MSP.member&#x27;)&quot; --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><h4 id="æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š">æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID alljoinchannel --name secured_supply --version 23.0 --sequence 23 --signature-policy &quot;OR(&#x27;GylCoreOrg1MSP.member&#x27;,&#x27;GylFOrg1MSP.member&#x27;,&#x27;GylSOrg1MSP.member&#x27;,&#x27;GylSOrg2MSP.member&#x27;)&quot; --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><h4 id="åœ¨æ‰€æœ‰ç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š">åœ¨æ‰€æœ‰ç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name secured_supply --version 23.0 --sequence 23 --signature-policy &quot;OR(&#x27;GylCoreOrg1MSP.member&#x27;,&#x27;GylFOrg1MSP.member&#x27;,&#x27;GylSOrg1MSP.member&#x27;,&#x27;GylSOrg2MSP.member&#x27;)&quot; --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID alljoinchannel --name secured_supply --output json</span><br></pre></td></tr></table></figure><h2 id="è°ƒç”¨é“¾ç ">è°ƒç”¨é“¾ç </h2><h3 id="åˆ›å»ºèµ„äº§">åˆ›å»ºèµ„äº§</h3><p><em><strong>èµ„äº§çš„å†…å®¹éœ€è¦æ‰“ä¸ªé—®å·ï¼Œå› ä¸ºè¿™ä¸ªèµ„äº§åœ¨åé¢éœ€è¦è¢«äº¤æ˜“ï¼Œå¦‚æœèµ„äº§çš„å†…å®¹ä¸èƒ½å¤Ÿä¿®æ”¹é‚£ä¹ˆåˆåŒå’Œå‘ç¥¨çš„hashåº”è¯¥ä¸åœ¨èµ„äº§çš„è¯¦ç»†ä¿¡æ¯é‡Œé¢ï¼Œè¿™é‡Œå…ˆæ”¾è¿™é‡Œåé¢å†æ”¹</strong></em></p><p><em><strong>å‘è¡Œè€…èƒ½å¦æ”¾åœ¨å¤–é¢è€Œä¸æ˜¯èµ„äº§é‡Œé¢ï¼Ÿå“ªç§æ–¹å¼æ¯”è¾ƒå¥½å‘¢ï¼Ÿ</strong></em></p><p>åœ¨æ ¸å¿ƒä¼ä¸šçš„èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªèµ„äº§å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PROPERTIES=$(echo -n &quot;&#123;\&quot;objectType\&quot;:\&quot;asset_properties\&quot;,\&quot;assetID\&quot;:\&quot;asset011\&quot;,\&quot;issuer\&quot;:\&quot;GylCoreOrg1MSP\&quot;,\&quot;amount\&quot;:1000,\&quot;createDate\&quot;:\&quot;2020-01-11T06:57:06.963617Z\&quot;,\&quot;endDate\&quot;:\&quot;2021-07-11T06:57:06.963617Z\&quot;,\&quot;salt\&quot;:\&quot;224cba6c547aecc76ab6acfac41d12dfd96e7165\&quot;&#125;&quot; | base64 | tr -d \\n)</span><br></pre></td></tr></table></figure><p>åœ¨æ ¸å¿ƒä¼ä¸šçš„èŠ‚ç‚¹ä¸Šè°ƒç”¨chaincodeï¼Œåˆ›å»ºèµ„äº§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;CreateAsset&quot;,&quot;Args&quot;:[&quot;asset011&quot;, &quot;A new asset for GylCoreOrg1MSP&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_properties\&quot;:\&quot;$ASSET_PROPERTIES\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>åœ¨ç§æœ‰æ•°æ®é›†ä¸­æŸ¥è¯¢åˆšæ‰åˆ›å»ºçš„èµ„äº§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset011&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset_properties&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset010&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;amount&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">  <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-01-11T06:57:06.963617Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-07-11T06:57:06.963617Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;salt&quot;</span>: <span class="string">&quot;224cba6c547aecc76ab6acfac41d12dfd96e7165&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢è´¦æœ¬æ¥æŸ¥çœ‹å…¬å…±è®°å½•ï¼Œæ‰€æœ‰åœ¨channelä¸Šçš„æˆå‘˜éƒ½å¯ä»¥æŸ¥è¯¢å¾—åˆ°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset010&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœï¼Œchannelä¸Šçš„æˆå‘˜åªèƒ½çœ‹åˆ°èµ„äº§çš„éƒ¨åˆ†ä¿¡æ¯ï¼Œè¯¦ç»†ä¿¡æ¯æ˜¯æ— æ³•çœ‹åˆ°çš„ã€‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset010&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;A new asset for GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;enable&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èµ„äº§æ‹¥æœ‰è€…æ›´æ”¹èµ„äº§çš„å…¬å…±ä¿¡æ¯">èµ„äº§æ‹¥æœ‰è€…æ›´æ”¹èµ„äº§çš„å…¬å…±ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ChangePublicDescription&quot;,&quot;Args&quot;:[&quot;asset010&quot;,&quot;This asset is for sale&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„æ–¹æ³•ï¼Œåœ¨æ ¸å¿ƒä¼ä¸šçš„peerèŠ‚ç‚¹è¿”å›æ—¥å¿—å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2021-01-07 16:07:43.589 CST [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 001 Chaincode invoke successful. result: status:200</span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„ç»„ç»‡å¦‚æœæƒ³è¦è°ƒç”¨è¿™ä¸ªé“¾ç çš„æ–¹æ³•æ›´æ”¹ä¿¡æ¯ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œå› ä¸ºå±äºæ ¸å¿ƒä¼ä¸šçš„èµ„äº§åˆ«äººä¸å¯ä»¥æ›´æ”¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during invoke. response: status:500 message:&quot;a client from GylFOrg1MSP cannot update the description of a asset owned by GylCoreOrg1MSP&quot;</span><br></pre></td></tr></table></figure><h3 id="èµ„äº§äº¤æ˜“">èµ„äº§äº¤æ˜“</h3><h4 id="å…è®¸å‡ºå”®èµ„äº§">å…è®¸å‡ºå”®èµ„äº§</h4><p>ç°åœ¨æ ¸å¿ƒä¼ä¸šè¦ä¸ä¸€çº§ä¾›åº”å•†äº¤æ˜“æ ¸å¿ƒä¼ä¸šçš„èµ„äº§ã€‚é¦–å…ˆæ ¸å¿ƒä¼ä¸šä¸ä¸€çº§ä¾›åº”å•†è¦åœ¨é“¾ä¸‹å¯¹ä»·æ ¼è¾¾æˆå…±è¯†ï¼Œå¹¶ä¸”æ ¸å¿ƒä¼ä¸šè¦æŠŠèµ„äº§çš„è¯¦æƒ…ä¹Ÿé€šè¿‡é“¾ä¸‹çš„é€šé“å‘é€ç»™ä¸€çº§ä¾›åº”å•†ã€‚ä¹‹åä¹°å–åŒæ–¹å°±å¯ä»¥å¯¹ä»·æ ¼è¾¾æˆå…±è¯†äº†ã€‚</p><h5 id="æ ¸å¿ƒä¼ä¸šå°†èµ„äº§çš„ä»·æ ¼è®¾ç½®ä¸º1000ï¼š">æ ¸å¿ƒä¼ä¸šå°†èµ„äº§çš„ä»·æ ¼è®¾ç½®ä¸º1000ï¼š</h5><p>ä¸‹é¢çš„trade_idæ˜¯åˆåŒçš„hashå€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PRICE=$(echo -n &quot;&#123;\&quot;asset_id\&quot;:\&quot;asset007\&quot;,\&quot;trade_id\&quot;:\&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14\&quot;,\&quot;price\&quot;:1000&#125;&quot; | base64)</span><br><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;AgreeToSell&quot;,&quot;Args&quot;:[&quot;asset007&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ ¸å¿ƒä¼ä¸šçš„ç§æœ‰æ•°æ®é›†åˆæ¥è¯»å–åŒæ„çš„é”€å”®ä»·æ ¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetSalesPrice&quot;,&quot;Args&quot;:[&quot;asset007&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h5 id="ä¸€çº§ä¾›åº”å•†å‡ºä»·1000">ä¸€çº§ä¾›åº”å•†å‡ºä»·1000</h5><p>åœ¨ä¸€çº§ä¾›åº”å•†å‡ºä»·ä¹‹å‰ï¼Œä»–éœ€è¦å…ˆéªŒè¯èµ„äº§çš„ä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚æ­¤é“¾ç ä¸­è¿”å›trueå³ä¸ºæ­£ç¡®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">export</span> ASSET_PROPERTIES=$(<span class="built_in">echo</span> -n <span class="string">&quot;&#123;\&quot;object_type\&quot;:\&quot;asset_properties\&quot;,\&quot;asset_id\&quot;:\&quot;asset006\&quot;,\&quot;issuer\&quot;:\&quot;GylCoreOrg1MSP\&quot;,\&quot;amount\&quot;:1000,\&quot;createDate\&quot;:\&quot;2020-01-11T06:57:06.963617Z\&quot;,\&quot;endDate\&quot;:\&quot;2021-07-11T06:57:06.963617Z\&quot;,\&quot;salt\&quot;:\&quot;224cba6c547aecc76ab6acfac41d12dfd96e7165\&quot;&#125;&quot;</span> | base64 | tr -d \\n)</span></span><br><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;VerifyAssetProperties&quot;,&quot;Args&quot;:[&quot;asset007&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_properties\&quot;:\&quot;$ASSET_PROPERTIES\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>éªŒè¯é€šè¿‡ä¹‹åï¼Œå°±å¯¹èµ„äº§å‡ºä»·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PRICE=$(echo -n &quot;&#123;\&quot;asset_id\&quot;:\&quot;asset007\&quot;,\&quot;trade_id\&quot;:\&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14\&quot;,\&quot;price\&quot;:1000&#125;&quot; | base64)</span><br><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;AgreeToBuy&quot;,&quot;Args&quot;:[&quot;asset007&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ä¸€çº§ä¾›åº”å•†çš„éšç§æ•°æ®é›†ä¸­æŸ¥è¯¢åˆ°å‡ºä»·ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetBidPrice&quot;,&quot;Args&quot;:[&quot;asset007&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœåœ¨å…¶ä»–ç»„ç»‡ä¸ŠæŸ¥è¯¢ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼Œè¯´æ˜å‡ºä»·å–å‡ºè®¾ç½®çš„ä»·æ ¼ä¿¡æ¯æ˜¯éšç§˜çš„ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during query. response: status:500 message:&quot;asset price does not exist: asset001&quot;</span><br></pre></td></tr></table></figure><h4 id="æ ¸å¿ƒä¼ä¸šæŠŠèµ„äº§è½¬ç§»ç»™ä¸€çº§ä¾›åº”å•†">æ ¸å¿ƒä¼ä¸šæŠŠèµ„äº§è½¬ç§»ç»™ä¸€çº§ä¾›åº”å•†</h4><p>æ ¸å¿ƒä¼ä¸šå’Œä¸€çº§ä¾›åº”å•†å¯¹ç›¸åŒçš„ä»·æ ¼è¾¾æˆå…±è¯†ä¹‹åï¼Œæ ¸å¿ƒä¼ä¸šå°±å¯ä»¥æŠŠèµ„äº§è½¬ç§»ç»™ä¸€çº§ä¾›åº”å•†äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAsset&quot;,&quot;Args&quot;:[&quot;asset007&quot;,&quot;GylFOrg1MSP&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_properties\&quot;:\&quot;$ASSET_PROPERTIES\&quot;,\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å…¬å…±æ•°æ®çš„èµ„äº§å½’å±ä»¥éªŒè¯äº¤æ˜“æˆåŠŸï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset001&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="äº¤æ˜“éªŒè¯">äº¤æ˜“éªŒè¯</h3><p>é™¤äº†äº¤æ˜“åŒæ–¹å…¶ä»–äººæ— æ³•æŸ¥çœ‹åˆ°èµ„äº§è¯¦æƒ…</p><h5 id="éªŒè¯ä¸€çº§ä¾›åº”å•†å¯ä»¥ä¿®æ”¹è‡ªå·±çš„èµ„äº§çš„å…¬å…±å±æ€§ï¼š">éªŒè¯ä¸€çº§ä¾›åº”å•†å¯ä»¥ä¿®æ”¹è‡ªå·±çš„èµ„äº§çš„å…¬å…±å±æ€§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ChangePublicDescription&quot;,&quot;Args&quot;:[&quot;asset005&quot;,&quot;This asset is not for sale now&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç„¶åé€šè¿‡æ‰€æœ‰å››ä¸ªç»„ç»‡æŸ¥è¯¢èµ„äº§IDä¸ºasset005çš„å…¬å…±ä¿¡æ¯å¦‚ä¸‹ï¼Œè¯´æ˜ä¸€çº§ä¾›åº”å•†å·²ç»è·å¾—äº†ä¿®æ”¹æƒé™å¹¶ä¿®æ”¹äº†è¿™ä¸ªèµ„äº§çš„å…¬å…±ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(base) w:supply-finance apple$ peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset005&quot;]&#125;&#x27;|jq</span><br><span class="line">&#123;</span><br><span class="line">  &quot;objectType&quot;: &quot;asset&quot;,</span><br><span class="line">  &quot;assetID&quot;: &quot;asset005&quot;,</span><br><span class="line">  &quot;ownerOrg&quot;: &quot;GylFOrg1MSP&quot;,</span><br><span class="line">  &quot;publicDescription&quot;: &quot;This asset is not for sale now&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯æ ¸å¿ƒä¼ä¸šä¸å¯ä»¥å†ä¿®æ”¹è¿™ä¸ªèµ„äº§çš„å…¬å…±ä¿¡æ¯">éªŒè¯æ ¸å¿ƒä¼ä¸šä¸å¯ä»¥å†ä¿®æ”¹è¿™ä¸ªèµ„äº§çš„å…¬å…±ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ChangePublicDescription&quot;,&quot;Args&quot;:[&quot;asset005&quot;,&quot;This asset is not for sale again&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœæŠ¥é”™å¦‚ä¸‹ï¼Œç¬¦åˆé¢„æœŸï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during invoke. response: status:500 message:&quot;a client from GylCoreOrg1MSP cannot update the description of a asset owned by GylFOrg1MSP&quot;</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯åªæœ‰ä¸€çº§ä¾›åº”å•†æ‰å¯ä»¥æŸ¥è¯¢è¿™ä¸ªèµ„äº§çš„ç§æœ‰ä¿¡æ¯">éªŒè¯åªæœ‰ä¸€çº§ä¾›åº”å•†æ‰å¯ä»¥æŸ¥è¯¢è¿™ä¸ªèµ„äº§çš„ç§æœ‰ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset005&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼ŒéªŒè¯é€šè¿‡ï¼š</p><p>å†ä¸€çº§ä¾›åº”å•†çš„peerèŠ‚ç‚¹å¯ä»¥æŸ¥è¯¢åˆ°èµ„äº§çš„ç§æœ‰å±æ€§ï¼Œå…¶ä»–ç»„ç»‡çš„peerèŠ‚ç‚¹éƒ½æŠ¥é”™ï¼š<code>Error: endorsement failure during query. response: status:500 message:&quot;asset private details does not exist in client org's collection: asset005&quot;</code></p><h2 id="èµ„äº§æ‹†åˆ†">èµ„äº§æ‹†åˆ†</h2><h3 id="è°ƒç”¨æ‹†åˆ†æ–¹æ³•">è°ƒç”¨æ‹†åˆ†æ–¹æ³•</h3><p>å®Œæˆèµ„äº§çš„æ‹†åˆ†chaincodeçš„æ›´æ–°ä¹‹åï¼Œè°ƒç”¨æ‹†åˆ†çš„æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;SplitAsset&quot;,&quot;Args&quot;:[&quot;asset010&quot;, &quot;500&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="éªŒè¯æ‹†åˆ†ç»“æœ">éªŒè¯æ‹†åˆ†ç»“æœ</h3><h4 id="ç§æœ‰æ•°æ®éªŒè¯">ç§æœ‰æ•°æ®éªŒè¯</h4><h5 id="ç¬¬ä¸€ä¸ªèµ„äº§ï¼š">ç¬¬ä¸€ä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;objectType&quot;: &quot;asset_properties&quot;,</span><br><span class="line">  &quot;assetID&quot;: &quot;asset0101&quot;,</span><br><span class="line">  &quot;issuer&quot;: &quot;GylCoreOrg1MSP&quot;,</span><br><span class="line">  &quot;amount&quot;: 500,</span><br><span class="line">  &quot;createDate&quot;: &quot;2020-01-11T06:57:06.963617Z&quot;,</span><br><span class="line">  &quot;endDate&quot;: &quot;2021-07-11T06:57:06.963617Z&quot;,</span><br><span class="line">  &quot;salt&quot;: &quot;224cba6c547aecc76ab6acfac41d12dfd96e7165&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒä¸ªèµ„äº§ï¼š">ç¬¬äºŒä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset0102&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset_properties&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset0102&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">  <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-01-11T06:57:06.963617Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-07-11T06:57:06.963617Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;salt&quot;</span>: <span class="string">&quot;224cba6c547aecc76ab6acfac41d12dfd96e7165&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="åŸå§‹çš„èµ„äº§ï¼š">åŸå§‹çš„èµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset010&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼ŒåŸå§‹èµ„äº§å·²ç»æ²¡æœ‰äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during query. response: status:500 message:&quot;asset private details does not exist in client org&#x27;s collection: asset010&quot;</span><br></pre></td></tr></table></figure><h4 id="å…¬å…±æ•°æ®éªŒè¯">å…¬å…±æ•°æ®éªŒè¯</h4><h5 id="ç¬¬ä¸€ä¸ªèµ„äº§ï¼š-v2">ç¬¬ä¸€ä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼Œchannelä¸Šçš„æ‰€æœ‰çš„ç»„ç»‡éƒ½å¯ä»¥çœ‹åˆ°ç›¸åŒçš„æ•°æ®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset0101&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;A new asset for GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;enable&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;asset010&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒä¸ªèµ„äº§ï¼š-v2">ç¬¬äºŒä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset0102&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset0102&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;A new asset for GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;enable&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;asset010&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="åŸå§‹çš„èµ„äº§ï¼š-v2">åŸå§‹çš„èµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset010&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼Œchaincodeæœ‰é—®é¢˜ï¼Œæ‹†åˆ†èµ„äº§ä¹‹ååŸå§‹èµ„äº§çš„çŠ¶æ€åº”è¯¥æ”¹å˜ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset010&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;å·²æ‹†åˆ†&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;delete&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‹†åˆ†åçš„èµ„äº§äº¤æ˜“">æ‹†åˆ†åçš„èµ„äº§äº¤æ˜“</h2><h4 id="æ ¸å¿ƒå…è®¸å‡ºå”®èµ„äº§ï¼Œä»·æ ¼è®¾ç½®ä¸º500ï¼š">æ ¸å¿ƒå…è®¸å‡ºå”®èµ„äº§ï¼Œä»·æ ¼è®¾ç½®ä¸º500ï¼š</h4><p>ä¸‹é¢çš„trade_idæ˜¯åˆåŒçš„hashå€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PRICE=$(echo -n &quot;&#123;\&quot;asset_id\&quot;:\&quot;asset0101\&quot;,\&quot;trade_id\&quot;:\&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14\&quot;,\&quot;price\&quot;:500&#125;&quot; | base64)</span><br><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;AgreeToSell&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ ¸å¿ƒä¼ä¸šçš„ç§æœ‰æ•°æ®é›†åˆæ¥è¯»å–åŒæ„çš„é”€å”®ä»·æ ¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetSalesPrice&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h5 id="ä¸€çº§ä¾›åº”å•†å‡ºä»·500">ä¸€çº§ä¾›åº”å•†å‡ºä»·500</h5><p>åœ¨ä¸€çº§ä¾›åº”å•†å‡ºä»·ä¹‹å‰ï¼Œä»–éœ€è¦å…ˆéªŒè¯èµ„äº§çš„ä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚æ­¤é“¾ç ä¸­è¿”å›trueå³ä¸ºæ­£ç¡®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PROPERTIES=$(echo -n &quot;&#123;\&quot;objectType\&quot;:\&quot;asset_properties\&quot;,\&quot;assetID\&quot;:\&quot;asset0101\&quot;,\&quot;issuer\&quot;:\&quot;GylCoreOrg1MSP\&quot;,\&quot;amount\&quot;:500,\&quot;createDate\&quot;:\&quot;2020-01-11T06:57:06.963617Z\&quot;,\&quot;endDate\&quot;:\&quot;2021-07-11T06:57:06.963617Z\&quot;,\&quot;salt\&quot;:\&quot;224cba6c547aecc76ab6acfac41d12dfd96e7165\&quot;&#125;&quot; | base64 | tr -d \\n)</span><br><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;VerifyAssetProperties&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_properties\&quot;:\&quot;$ASSET_PROPERTIES\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>éªŒè¯é€šè¿‡ä¹‹åï¼Œå°±å¯¹èµ„äº§å‡ºä»·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PRICE=$(echo -n &quot;&#123;\&quot;asset_id\&quot;:\&quot;asset0101\&quot;,\&quot;trade_id\&quot;:\&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14\&quot;,\&quot;price\&quot;:500&#125;&quot; | base64)</span><br><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;AgreeToBuy&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ä¸€çº§ä¾›åº”å•†çš„éšç§æ•°æ®é›†ä¸­æŸ¥è¯¢åˆ°å‡ºä»·ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetBidPrice&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœåœ¨å…¶ä»–ç»„ç»‡ä¸ŠæŸ¥è¯¢ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼Œè¯´æ˜å‡ºä»·å–å‡ºè®¾ç½®çš„ä»·æ ¼ä¿¡æ¯æ˜¯éšç§˜çš„ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during query. response: status:500 message:&quot;asset price does not exist: asset001&quot;</span><br></pre></td></tr></table></figure><h4 id="æ ¸å¿ƒä¼ä¸šæŠŠèµ„äº§è½¬ç§»ç»™ä¸€çº§ä¾›åº”å•†-v2">æ ¸å¿ƒä¼ä¸šæŠŠèµ„äº§è½¬ç§»ç»™ä¸€çº§ä¾›åº”å•†</h4><p>æ ¸å¿ƒä¼ä¸šå’Œä¸€çº§ä¾›åº”å•†å¯¹ç›¸åŒçš„ä»·æ ¼è¾¾æˆå…±è¯†ä¹‹åï¼Œæ ¸å¿ƒä¼ä¸šå°±å¯ä»¥æŠŠèµ„äº§è½¬ç§»ç»™ä¸€çº§ä¾›åº”å•†äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAsset&quot;,&quot;Args&quot;:[&quot;asset0101&quot;,&quot;GylFOrg1MSP&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_properties\&quot;:\&quot;$ASSET_PROPERTIES\&quot;,\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å…¬å…±æ•°æ®çš„èµ„äº§å½’å±ä»¥éªŒè¯äº¤æ˜“æˆåŠŸï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset0101&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylFOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;A new asset for GylCoreOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;enable&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;asset010&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº¤æ˜“éªŒè¯-v2">äº¤æ˜“éªŒè¯</h3><p>é™¤äº†äº¤æ˜“åŒæ–¹å…¶ä»–äººæ— æ³•æŸ¥çœ‹åˆ°èµ„äº§è¯¦æƒ…</p><h5 id="éªŒè¯ä¸€çº§ä¾›åº”å•†å¯ä»¥ä¿®æ”¹è‡ªå·±çš„èµ„äº§çš„å…¬å…±å±æ€§ï¼š-v2">éªŒè¯ä¸€çº§ä¾›åº”å•†å¯ä»¥ä¿®æ”¹è‡ªå·±çš„èµ„äº§çš„å…¬å…±å±æ€§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ChangePublicDescription&quot;,&quot;Args&quot;:[&quot;asset0101&quot;,&quot;This asset is not for sale now&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æˆåŠŸä¹‹åé‡æ–°æŸ¥è¯¢èµ„äº§çš„å…¬å…±ä¿¡æ¯ï¼ŒéªŒè¯é€šè¿‡ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset0101&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylFOrg1MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;This asset is not for sale now&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;enable&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;asset010&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯æ ¸å¿ƒä¼ä¸šä¸å¯ä»¥å†ä¿®æ”¹è¿™ä¸ªèµ„äº§çš„å…¬å…±ä¿¡æ¯-v2">éªŒè¯æ ¸å¿ƒä¼ä¸šä¸å¯ä»¥å†ä¿®æ”¹è¿™ä¸ªèµ„äº§çš„å…¬å…±ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ChangePublicDescription&quot;,&quot;Args&quot;:[&quot;asset0101&quot;,&quot;This asset is not for sale again&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœæŠ¥é”™å¦‚ä¸‹ï¼Œç¬¦åˆé¢„æœŸï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during invoke. response: status:500 message:&quot;a client from GylCoreOrg1MSP cannot update the description of a asset owned by GylFOrg1MSP&quot;</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯åªæœ‰ä¸€çº§ä¾›åº”å•†æ‰å¯ä»¥æŸ¥è¯¢è¿™ä¸ªèµ„äº§çš„ç§æœ‰ä¿¡æ¯-v2">éªŒè¯åªæœ‰ä¸€çº§ä¾›åº”å•†æ‰å¯ä»¥æŸ¥è¯¢è¿™ä¸ªèµ„äº§çš„ç§æœ‰ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼ŒéªŒè¯é€šè¿‡ï¼š</p><p>åœ¨ä¸€çº§ä¾›åº”å•†çš„peerèŠ‚ç‚¹å¯ä»¥æŸ¥è¯¢åˆ°èµ„äº§çš„ç§æœ‰å±æ€§ï¼Œå…¶ä»–ç»„ç»‡çš„peerèŠ‚ç‚¹éƒ½æŠ¥é”™ï¼š<code>Error: endorsement failure during query. response: status:500 message:&quot;asset private details does not exist in client org's collection: asset005&quot;</code></p><h2 id="ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†äº¤æ˜“">ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†äº¤æ˜“</h2><p>è°ƒç”¨æ‹†åˆ†çš„æ–¹æ³•ï¼Œå°†èµ„äº§æ‹†åˆ†æˆ200å’Œ300ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;SplitAsset&quot;,&quot;Args&quot;:[&quot;asset0101&quot;, &quot;200&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="éªŒè¯æ‹†åˆ†ç»“æœ-v2">éªŒè¯æ‹†åˆ†ç»“æœ</h3><h4 id="ç§æœ‰æ•°æ®éªŒè¯-v2">ç§æœ‰æ•°æ®éªŒè¯</h4><h5 id="ç¬¬ä¸€ä¸ªèµ„äº§ï¼š-v3">ç¬¬ä¸€ä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset01011&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒä¸ªèµ„äº§ï¼š-v3">ç¬¬äºŒä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h5 id="åŸå§‹çš„èµ„äº§ï¼ŒåŸå§‹èµ„äº§å·²ç»æ²¡æœ‰äº†ï¼š">åŸå§‹çš„èµ„äº§ï¼ŒåŸå§‹èµ„äº§å·²ç»æ²¡æœ‰äº†ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h4 id="å…¬å…±æ•°æ®éªŒè¯-v2">å…¬å…±æ•°æ®éªŒè¯</h4><h5 id="ç¬¬ä¸€ä¸ªèµ„äº§ï¼š-v4">ç¬¬ä¸€ä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset01011&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒä¸ªèµ„äº§ï¼š-v4">ç¬¬äºŒä¸ªèµ„äº§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h5 id="åŸå§‹çš„èµ„äº§ï¼Œæ‹†åˆ†èµ„äº§ä¹‹ååŸå§‹èµ„äº§çš„çŠ¶æ€åº”è¯¥æ”¹å˜ï¼š">åŸå§‹çš„èµ„äº§ï¼Œæ‹†åˆ†èµ„äº§ä¹‹ååŸå§‹èµ„äº§çš„çŠ¶æ€åº”è¯¥æ”¹å˜ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset0101&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h2 id="æ‹†åˆ†åçš„èµ„äº§äº¤æ˜“-v2">æ‹†åˆ†åçš„èµ„äº§äº¤æ˜“</h2><h4 id="ä¸€çº§ä¾›åº”å•†å…è®¸å‡ºå”®èµ„äº§ï¼Œè®¾ç½®ä»·æ ¼ï¼š">ä¸€çº§ä¾›åº”å•†å…è®¸å‡ºå”®èµ„äº§ï¼Œè®¾ç½®ä»·æ ¼ï¼š</h4><p>ä¸‹é¢çš„trade_idæ˜¯åˆåŒçš„hashå€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PRICE=$(echo -n &quot;&#123;\&quot;asset_id\&quot;:\&quot;asset01012\&quot;,\&quot;trade_id\&quot;:\&quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb\&quot;,\&quot;price\&quot;:300&#125;&quot; | base64)</span><br><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;AgreeToSell&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ ¸å¿ƒä¼ä¸šçš„ç§æœ‰æ•°æ®é›†åˆæ¥è¯»å–åŒæ„çš„é”€å”®ä»·æ ¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetSalesPrice&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h5 id="äºŒçº§ä¾›åº”å•†2å‡ºä»·300">äºŒçº§ä¾›åº”å•†2å‡ºä»·300</h5><p>åœ¨äºŒçº§ä¾›åº”å•†2å‡ºä»·ä¹‹å‰ï¼Œä»–éœ€è¦å…ˆéªŒè¯èµ„äº§çš„ä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚æ­¤é“¾ç ä¸­è¿”å›trueå³ä¸ºæ­£ç¡®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PROPERTIES=$(echo -n &quot;&#123;\&quot;objectType\&quot;:\&quot;asset_properties\&quot;,\&quot;assetID\&quot;:\&quot;asset01012\&quot;,\&quot;issuer\&quot;:\&quot;GylCoreOrg1MSP\&quot;,\&quot;amount\&quot;:300,\&quot;createDate\&quot;:\&quot;2020-01-11T06:57:06.963617Z\&quot;,\&quot;endDate\&quot;:\&quot;2021-07-11T06:57:06.963617Z\&quot;,\&quot;salt\&quot;:\&quot;224cba6c547aecc76ab6acfac41d12dfd96e7165\&quot;&#125;&quot; | base64 | tr -d \\n)</span><br><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;VerifyAssetProperties&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_properties\&quot;:\&quot;$ASSET_PROPERTIES\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>éªŒè¯é€šè¿‡ä¹‹åï¼Œå°±å¯¹èµ„äº§å‡ºä»·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ASSET_PRICE=$(echo -n &quot;&#123;\&quot;asset_id\&quot;:\&quot;asset01012\&quot;,\&quot;trade_id\&quot;:\&quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb\&quot;,\&quot;price\&quot;:300&#125;&quot; | base64)</span><br><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;AgreeToBuy&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ä¸€çº§ä¾›åº”å•†çš„éšç§æ•°æ®é›†ä¸­æŸ¥è¯¢åˆ°å‡ºä»·ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetBidPrice&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœåœ¨å…¶ä»–ç»„ç»‡ä¸ŠæŸ¥è¯¢ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼Œè¯´æ˜å‡ºä»·å–å‡ºè®¾ç½®çš„ä»·æ ¼ä¿¡æ¯æ˜¯éšç§˜çš„ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during query. response: status:500 message:&quot;asset price does not exist: asset001&quot;</span><br></pre></td></tr></table></figure><h4 id="ä¸€çº§ä¾›åº”å•†æŠŠèµ„äº§è½¬ç§»ç»™äºŒçº§ä¾›åº”å•†2">ä¸€çº§ä¾›åº”å•†æŠŠèµ„äº§è½¬ç§»ç»™äºŒçº§ä¾›åº”å•†2</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAsset&quot;,&quot;Args&quot;:[&quot;asset01012&quot;,&quot;GylSOrg2MSP&quot;]&#125;&#x27; --transient &quot;&#123;\&quot;asset_properties\&quot;:\&quot;$ASSET_PROPERTIES\&quot;,\&quot;asset_price\&quot;:\&quot;$ASSET_PRICE\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å…¬å…±æ•°æ®çš„èµ„äº§å½’å±ä»¥éªŒè¯äº¤æ˜“æˆåŠŸï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset01012&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylSOrg2MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;This asset is not for sale now&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;enable&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;asset0101&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº¤æ˜“éªŒè¯-v3">äº¤æ˜“éªŒè¯</h3><p>é™¤äº†äº¤æ˜“åŒæ–¹å…¶ä»–äººæ— æ³•æŸ¥çœ‹åˆ°èµ„äº§è¯¦æƒ…</p><h5 id="éªŒè¯äºŒçº§çº§ä¾›åº”å•†2å¯ä»¥ä¿®æ”¹è‡ªå·±çš„èµ„äº§çš„å…¬å…±å±æ€§ï¼š">éªŒè¯äºŒçº§çº§ä¾›åº”å•†2å¯ä»¥ä¿®æ”¹è‡ªå·±çš„èµ„äº§çš„å…¬å…±å±æ€§ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ChangePublicDescription&quot;,&quot;Args&quot;:[&quot;asset01012&quot;,&quot;hello i am GylSOrg2MSP&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æˆåŠŸä¹‹åé‡æ–°æŸ¥è¯¢èµ„äº§çš„å…¬å…±ä¿¡æ¯ï¼ŒéªŒè¯é€šè¿‡ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;objectType&quot;</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;assetID&quot;</span>: <span class="string">&quot;asset01012&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;ownerOrg&quot;</span>: <span class="string">&quot;GylSOrg2MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;publicDescription&quot;</span>: <span class="string">&quot;hello i am GylSOrg2MSP&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;enable&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parentID&quot;</span>: <span class="string">&quot;asset0101&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯åªæœ‰äºŒçº§çº§ä¾›åº”å•†2æ‰å¯ä»¥æŸ¥è¯¢è¿™ä¸ªèµ„äº§çš„ç§æœ‰ä¿¡æ¯">éªŒè¯åªæœ‰äºŒçº§çº§ä¾›åº”å•†2æ‰å¯ä»¥æŸ¥è¯¢è¿™ä¸ªèµ„äº§çš„ç§æœ‰ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼ŒéªŒè¯é€šè¿‡ï¼š</p><p>åœ¨ä¸€çº§ä¾›åº”å•†çš„peerèŠ‚ç‚¹å¯ä»¥æŸ¥è¯¢åˆ°èµ„äº§çš„ç§æœ‰å±æ€§ï¼Œå…¶ä»–ç»„ç»‡çš„peerèŠ‚ç‚¹éƒ½æŠ¥é”™ï¼š<code>Error: endorsement failure during query. response: status:500 message:&quot;asset private details does not exist in client org's collection: asset005&quot;</code></p><h2 id="chaincodeæ¥å£è®°å½•">chaincodeæ¥å£è®°å½•</h2><h3 id="æŸ¥è¯¢å–å‡ºçš„äº¤æ˜“ä¿¡æ¯">æŸ¥è¯¢å–å‡ºçš„äº¤æ˜“ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;QueryAssetSaleAgreements&quot;,&quot;Args&quot;:[]&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢èµ„äº§çš„å…¬å…±ä¿¡æ¯">æŸ¥è¯¢èµ„äº§çš„å…¬å…±ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;ReadAsset&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢ç§æœ‰èµ„äº§ä¿¡æ¯">æŸ¥è¯¢ç§æœ‰èµ„äº§ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;GetAssetPrivateProperties&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢ä¸€ä¸ªèµ„äº§å…¬å…±ä¿¡æ¯çš„å†å²æ•°æ®">æŸ¥è¯¢ä¸€ä¸ªèµ„äº§å…¬å…±ä¿¡æ¯çš„å†å²æ•°æ®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply -c &#x27;&#123;&quot;function&quot;:&quot;QueryAssetHistory&quot;,&quot;Args&quot;:[&quot;asset01012&quot;]&#125;&#x27;|jq</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è‡ªå·±å¼€å‘çš„æ™ºèƒ½åˆçº¦åœ¨channelä¸Šçš„æ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ç¬¦åˆç°å®ä¸–ç•Œä¸­çš„äº¤æ˜“è§„åˆ™ã€‚ç†è®ºä¸Šä¸¤ä¸ªç»„ç»‡ä¹‹é—´çš„äº¤æ˜“æ˜¯ä¸å…è®¸åˆ«äººçœ‹åˆ°çš„ã€‚æ‰€ä»¥è¿™æ¬¡æˆ‘ä½¿ç”¨fabric-samplesæä¾›çš„&lt;code&gt;asset-transfer-secured-agreement&lt;/code&gt;æ¥ä½œ</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/tags/Hyperledger-Fabric/"/>
    
    <category term="peer" scheme="https://guozhe001.github.io/tags/peer/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/tags/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
  </entry>
  
  <entry>
    <title>éƒ¨ç½²æ–°çš„æ™ºèƒ½åˆçº¦åˆ°channel</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E9%83%A8%E7%BD%B2%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E5%88%B0channel/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E9%83%A8%E7%BD%B2%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E5%88%B0channel/</id>
    <published>2021-04-01T10:18:21.498Z</published>
    <updated>2021-04-01T10:18:21.499Z</updated>
    
    <content type="html"><![CDATA[<h1 id="éƒ¨ç½²æ–°çš„æ™ºèƒ½åˆçº¦åˆ°channel">éƒ¨ç½²æ–°çš„æ™ºèƒ½åˆçº¦åˆ°channel</h1><h2 id="éƒ¨ç½²V1ç‰ˆæœ¬">éƒ¨ç½²V1ç‰ˆæœ¬</h2><h3 id="æ‰“åŒ…">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_1.0</span><br></pre></td></tr></table></figure><p>è¿è¡Œå®Œä¸Šé¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰ç›®å½•ä¼šå‘ç°å¤šäº†<code>supply.tar.gz</code>åŒ…ï¼Œè¯´æ˜æ‰“åŒ…æˆåŠŸã€‚</p><h3 id="å®‰è£…é“¾ç åŒ…">å®‰è£…é“¾ç åŒ…</h3><p>ä¸€çº§ä¾›åº”å•†å’Œæ ¸å¿ƒä¼ä¸šéƒ½è¦å®‰è£…ï¼š<br>æ ¸å¿ƒä¼ä¸šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.tar.gz --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä¸€çº§ä¾›åº”å•†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.tar.gz --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 17:12:37.540 CST [cli.lifecycle.chaincode] submitInstallProposal -&gt; INFO 001 Installed remotely: response:&lt;status:200 payload:&quot;\nKsupply_1.0:7f51b70454bfcc78087a784c84288a67bbad56786e4007c3a7106491a492ad3a\022\nsupply_1.0&quot; &gt;</span><br><span class="line">2020-12-28 17:12:37.542 CST [cli.lifecycle.chaincode] submitInstallProposal -&gt; INFO 002 Chaincode code package identifier: supply_1.0:7f51b70454bfcc78087a784c84288a67bbad56786e4007c3a7106491a492ad3a</span><br></pre></td></tr></table></figure><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Installed chaincodes on peer:</span><br><span class="line">Package ID: basic_1.0:4ec191e793b27e953ff2ede5a8bcc63152cecb1e4c3f301a26e22692c61967ad, Label: basic_1.0</span><br><span class="line">Package ID: supply_1.0:7f51b70454bfcc78087a784c84288a67bbad56786e4007c3a7106491a492ad3a, Label: supply_1.0</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_1.0:7f51b70454bfcc78087a784c84288a67bbad56786e4007c3a7106491a492ad3a</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v2">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ ¸å¿ƒä¼ä¸šå’Œä¸€çº§ä¾›åº”å•†éƒ½éœ€è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 1.0 --package-id $CC_PACKAGE_ID --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 17:14:07.090 CST [chaincodeCmd] ClientWait -&gt; INFO 001 txid [5c192d72135019a4bd6d444231fc95d41b6c7391cbc80a98cb67618f5e7a85c6] committed with status (VALID) at localhost:8053</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID coreandfirstchannel --name supply --version 1.0 --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;approvals&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;GylCoreOrg1MSP&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">&quot;GylFOrg1MSP&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸¤ä¸ªç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 1.0 --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 17:14:57.631 CST [chaincodeCmd] ClientWait -&gt; INFO 001 txid [1c5e194c62a24b9fe78d51bd7003fce369f01a0b3051f63ed5e1f9ee4f6cf48b] committed with status (VALID) at localhost:8051</span><br><span class="line">2020-12-28 17:14:57.631 CST [chaincodeCmd] ClientWait -&gt; INFO 002 txid [1c5e194c62a24b9fe78d51bd7003fce369f01a0b3051f63ed5e1f9ee4f6cf48b] committed with status (VALID) at localhost:8053</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID coreandfirstchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Committed chaincode definition for chaincode &#x27;supply&#x27; on channel &#x27;coreandfirstchannel&#x27;:</span><br><span class="line">Version: 1.0, Sequence: 1, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [GylCoreOrg1MSP: true, GylFOrg1MSP: true]</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç ">è°ƒç”¨é“¾ç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C coreandfirstchannel -n supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;IssueVoucher&quot;,&quot;Args&quot;:[&quot;100&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æˆåŠŸä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-12-25 17:26:22.583 CST [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 001 Chaincode invoke successful. result: status:200</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯ä¿¡æ¯è®°å½•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: could not assemble transaction: ProposalResponsePayloads do not match - proposal response: version:1 response:&lt;status:200 &gt; payload:&quot;\n \266\367\033\202\030f\357\010\266zg\350\237\212\313 \342B\2041\316\351&gt;H\037\035\312\274J\021i\220\022\266\002\n\237\002\0227\n\n_lifecycle\022)\n&#x27;\n!namespaces/fields/supply/Sequence\022\002\010\t\022\343\001\n\006supply\022\330\001\n\003\n\0011\032\320\001\n\0011\032\312\001&#123;\&quot;ID\&quot;:\&quot;1\&quot;,\&quot;issuer\&quot;:\&quot;\346\240\270\345\277\203\344\274\201\344\270\232\&quot;,\&quot;owner\&quot;:\&quot;\346\240\270\345\277\203\344\274\201\344\270\232\&quot;,\&quot;amount\&quot;:100,\&quot;createDate\&quot;:\&quot;2020-12-28T09:24:44.871052163Z\&quot;,\&quot;endDate\&quot;:\&quot;2021-06-28T09:24:44.871052228Z\&quot;,\&quot;contractHash\&quot;:\&quot;test\&quot;,\&quot;invoiceHash\&quot;:\&quot;test\&quot;&#125;\032\003\010\310\001\&quot;\r\022\006supply\032\0031.0&quot; endorsement:&lt;endorser:&quot;\n\013GylFOrg1MSP\022\212\006-----BEGIN CERTIFICATE-----\nMIICETCCAbegAwIBAgIRAKxyUt8FsMI4LRaMcjh08ZgwCgYIKoZIzj0EAwIwbTEL\nMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG\ncmFuY2lzY28xFjAUBgNVBAoTDWYxLnN1cHBseS5jb20xGTAXBgNVBAMTEGNhLmYx\nLnN1cHBseS5jb20wHhcNMjAxMjI1MDkxNzAwWhcNMzAxMjIzMDkxNzAwWjBYMQsw\nCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy\nYW5jaXNjbzEcMBoGA1UEAxMTcGVlcjAuZjEuc3VwcGx5LmNvbTBZMBMGByqGSM49\nAgEGCCqGSM49AwEHA0IABIChG5EnW6enlGqH2F9EiWYbilBwfA+KgqqxnN56njS5\ngv368PElfoafV6jCrjA+p2OnbTI3gO2/RAwr2WBLB0+jTTBLMA4GA1UdDwEB/wQE\nAwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAIHNOBiXoFslrjdFMBMzU7pNe\nI5pmxxrQGrWTdgfI0cetMAoGCCqGSM49BAMCA0gAMEUCIQDEOKc114LvsauKzrMR\n7k6ipg0HPM1+W8JJt06Jeqd1vwIgBre+xg2g/rS7F5oZaJpECUf7ALV0fy9/Dhw0\nYDB3H+g=\n-----END CERTIFICATE-----\n&quot; signature:&quot;0D\002 9\020\212\014\220\302Ao_\226n`o\005\354B\263\316\346\330\347\010\217\205^X\&quot;\267d\320U\365\002 \t&lt;\024e\324\312X\036\346=\025.I*A\311\223\013\301\276\320\232\366\246tZm\341g\223\235|&quot; &gt;</span><br></pre></td></tr></table></figure><p>åŸå› åº”è¯¥æ˜¯ä»£ç ä¸­ä½¿ç”¨äº†Nowï¼ˆï¼‰æ¥åˆ›å»ºå½“å‰æ—¶é—´ï¼Œä¸¤ä¸ªpeerçš„å½“å‰æ—¶é—´å¯èƒ½ä¼šæœ‰ä¸€ç‚¹è¯¯å·®å¯¼è‡´äº†æ ¡éªŒä¸é€šè¿‡ã€‚</p><p>**è§£å†³æ–¹æ¡ˆï¼š**ä½¿ç”¨<code>ctx.GetStub().GetTxTimestamp()</code>æ¥è·å–æ—¶é—´ï¼Œè¿™æ ·æ‰€æœ‰çš„èŠ‚ç‚¹åˆ›å»ºçš„æ—¶é—´éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¯¦è§<a href="https://stackoverflow.com/questions/55289283/hyperledger-fabric-error-could-not-assemble-transaction-proposalresponsepaylo/61727958">å‚è€ƒæ–‡æ¡£</a></p><h2 id="æ›´æ–°æ™ºèƒ½åˆçº¦">æ›´æ–°æ™ºèƒ½åˆçº¦</h2><h3 id="æ‰“åŒ…-v2">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> peer lifecycle chaincode package supply.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/fabric-samples/asset-transfer-basic/chaincode-go/ --lang golang --label supply_1.0</span></span><br></pre></td></tr></table></figure><p>æ‰“åŒ…æœ¬åœ°çš„ä»£ç ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.5.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_5.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v2">å®‰è£…é“¾ç åŒ…</h3><p>ä¸€çº§ä¾›åº”å•†å’Œæ ¸å¿ƒä¼ä¸šéƒ½è¦å®‰è£…ï¼š<br>æ ¸å¿ƒä¼ä¸šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.5.tar.gz --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä¸€çº§ä¾›åº”å•†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.5.tar.gz --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v3">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v2">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_5.0:0006888ea72e1b318238518b719382d440ab72f2d2c45b22e674f4828b7f7f9c</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v4">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ ¸å¿ƒä¼ä¸šå’Œä¸€çº§ä¾›åº”å•†éƒ½éœ€è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 5.0 --package-id $CC_PACKAGE_ID --sequence 5 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 17:58:55.313 CST [chaincodeCmd] ClientWait -&gt; INFO 001 txid [c4974d5c90ae4fb3bd31f179292d9943dd05aac47248f33e365d9f32ccb5ccb6] committed with status (VALID) at localhost:8051</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v2">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID coreandfirstchannel --name supply --version 5.0 --sequence 5 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;approvals&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;GylCoreOrg1MSP&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">&quot;GylFOrg1MSP&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸¤ä¸ªç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 5.0 --sequence 5 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 17:51:08.452 CST [chaincodeCmd] ClientWait -&gt; INFO 001 txid [87bc060e5ccdf4014cd4cf34bbbeb5d2ea10c4ff8ebb6f444d10580e2de2da50] committed with status (VALID) at localhost:8053</span><br><span class="line">2020-12-28 17:51:08.460 CST [chaincodeCmd] ClientWait -&gt; INFO 002 txid [87bc060e5ccdf4014cd4cf34bbbeb5d2ea10c4ff8ebb6f444d10580e2de2da50] committed with status (VALID) at localhost:8051</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID coreandfirstchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹,å¯ä»¥çœ‹åˆ°å·²ç»å‡çº§åˆ°2.0ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Committed chaincode definition for chaincode &#x27;supply&#x27; on channel &#x27;coreandfirstchannel&#x27;:</span><br><span class="line">Version: 2.0, Sequence: 2, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [GylCoreOrg1MSP: true, GylFOrg1MSP: true]</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç -v2">è°ƒç”¨é“¾ç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C coreandfirstchannel -n supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;IssueVoucher&quot;,&quot;Args&quot;:[&quot;asset001&quot;, &quot;100&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æˆåŠŸä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 18:37:54.285 CST [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 001 Chaincode invoke successful. result: status:200</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: could not assemble transaction: proposal response was not successful, error code 500, msg Incorrect number of params. Expected 2, received 1 - proposal response: version:1 response:&lt;status:200 &gt; payload:&quot;\n \177\017\350[\344G6\010V\331\332\377\354\216&amp;\035\317&amp;\251[N`\023\036\033\237\237A\005\3670\260\022\266\002\n\237\002\0227\n\n_lifecycle\022)\n&#x27;\n!namespaces/fields/supply/Sequence\022\002\010\016\022\343\001\n\006supply\022\330\001\n\003\n\0011\032\320\001\n\0011\032\312\001&#123;\&quot;ID\&quot;:\&quot;1\&quot;,\&quot;issuer\&quot;:\&quot;\346\240\270\345\277\203\344\274\201\344\270\232\&quot;,\&quot;owner\&quot;:\&quot;\346\240\270\345\277\203\344\274\201\344\270\232\&quot;,\&quot;amount\&quot;:100,\&quot;createDate\&quot;:\&quot;2020-12-28T10:02:30.578872398Z\&quot;,\&quot;endDate\&quot;:\&quot;2021-06-28T10:02:30.578872527Z\&quot;,\&quot;contractHash\&quot;:\&quot;test\&quot;,\&quot;invoiceHash\&quot;:\&quot;test\&quot;&#125;\032\003\010\310\001\&quot;\r\022\006supply\032\0033.0&quot; endorsement:&lt;endorser:&quot;\n\016GylCoreOrg1MSP\022\222\006-----BEGIN CERTIFICATE-----\nMIICFjCCAbygAwIBAgIQU43L5gjtXO+uCpRP2jG2AjAKBggqhkjOPQQDAjBxMQsw\nCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy\nYW5jaXNjbzEYMBYGA1UEChMPY29yZS5zdXBwbHkuY29tMRswGQYDVQQDExJjYS5j\nb3JlLnN1cHBseS5jb20wHhcNMjAxMjI1MDkxNzAwWhcNMzAxMjIzMDkxNzAwWjBa\nMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2Fu\nIEZyYW5jaXNjbzEeMBwGA1UEAxMVcGVlcjAuY29yZS5zdXBwbHkuY29tMFkwEwYH\nKoZIzj0CAQYIKoZIzj0DAQcDQgAErf3R+7XpNQpmTsMO+iM4WS7IrOoafiPbAS7Q\nbuFFR3Qs4riIczgSmjh9rOA6I1q2q0CstLhfWDbqpf+8fXPUlKNNMEswDgYDVR0P\nAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwKwYDVR0jBCQwIoAguznqsTisa64dNvOR\nvPwP0KGklWohNpbSe7VgIghx4L8wCgYIKoZIzj0EAwIDSAAwRQIhALIw1VMzezCg\n9LONbO4+V+weY42HQLbShkTP/gCFnGRYAiARyLLSDJIC2wwzSvOHNdm+aDRtbqGC\nNJenP9hmEbYsTw==\n-----END CERTIFICATE-----\n&quot; signature:&quot;0E\002!\000\251\370K6S\020\373\242\321\000\211\312\0001\333\365&gt;\314\324\231\020&gt;u;+\243\303dD\023\221\237\002 z \224\236R\355Z\251\202\363\035\304\365\212\277\235\375?\376\030\371\236\220\354iG6\244\334M\315\331&quot; &gt;</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯å› ä¸ºä¸‹å›¾ï¼Œåªæœ‰ä¸€ä¸ªç»„ç»‡çš„é“¾ç æ›´æ–°åˆ°äº†æœ€æ–°çš„ç‰ˆæœ¬ã€‚</p><p>![æˆªå±2020-12-28 18.03.06](/Users/apple/Desktop/æˆªå±2020-12-28 18.03.06.png)</p><p>**è§£å†³æ–¹æ¡ˆï¼š**åŸå› æ˜¯å› ä¸ºè®¾ç½®ç¯å¢ƒå˜é‡<code>CC_PACKAGE_ID</code>æ—¶åªè®¾ç½®äº†ä¸€ä¸ªç»„ç»‡çš„peerï¼Œå¯¼è‡´æ—§çš„ç¯å¢ƒå˜é‡è¿˜åœ¨ç”Ÿæ•ˆï¼Œé‡æ–°æ“ä½œä¸€éé—®é¢˜è§£å†³ã€‚</p><h4 id="æŸ¥è¯¢è°ƒç”¨åçš„ç»“æœ">æŸ¥è¯¢è°ƒç”¨åçš„ç»“æœ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C coreandfirstchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ ¸å¿ƒä¼ä¸š</span></span><br><span class="line">[&#123;&quot;ID&quot;:&quot;asset001&quot;,&quot;issuer&quot;:&quot;æ ¸å¿ƒä¼ä¸š&quot;,&quot;owner&quot;:&quot;æ ¸å¿ƒä¼ä¸š&quot;,&quot;amount&quot;:100,&quot;createDate&quot;:&quot;2020-12-28T10:37:54.271518Z&quot;,&quot;endDate&quot;:&quot;2021-06-28T10:37:54.271518Z&quot;,&quot;contractHash&quot;:&quot;test&quot;,&quot;invoiceHash&quot;:&quot;test&quot;&#125;]</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸€çº§ä¾›åº”å•†</span></span><br><span class="line">[&#123;&quot;ID&quot;:&quot;asset001&quot;,&quot;issuer&quot;:&quot;æ ¸å¿ƒä¼ä¸š&quot;,&quot;owner&quot;:&quot;æ ¸å¿ƒä¼ä¸š&quot;,&quot;amount&quot;:100,&quot;createDate&quot;:&quot;2020-12-28T10:37:54.271518Z&quot;,&quot;endDate&quot;:&quot;2021-06-28T10:37:54.271518Z&quot;,&quot;contractHash&quot;:&quot;test&quot;,&quot;invoiceHash&quot;:&quot;test&quot;&#125;]</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨äº¤æ˜“æ–¹æ³•">è°ƒç”¨äº¤æ˜“æ–¹æ³•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C coreandfirstchannel -n supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAsset&quot;,&quot;Args&quot;:[&quot;asset001&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥è¯¢ï¼š<code>peer chaincode query -C coreandfirstchannel -n supply -c '&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;'</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ ¸å¿ƒä¼ä¸š</span></span><br><span class="line">[&#123;&quot;ID&quot;:&quot;asset001&quot;,&quot;issuer&quot;:&quot;æ ¸å¿ƒä¼ä¸š&quot;,&quot;owner&quot;:&quot;ä¸€çº§ä¾›åº”å•†&quot;,&quot;amount&quot;:100,&quot;createDate&quot;:&quot;2020-12-28T10:37:54.271518Z&quot;,&quot;endDate&quot;:&quot;2021-06-28T10:37:54.271518Z&quot;,&quot;contractHash&quot;:&quot;test&quot;,&quot;invoiceHash&quot;:&quot;test&quot;&#125;]</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸€çº§ä¾›åº”å•†</span></span><br><span class="line">[&#123;&quot;ID&quot;:&quot;asset001&quot;,&quot;issuer&quot;:&quot;æ ¸å¿ƒä¼ä¸š&quot;,&quot;owner&quot;:&quot;ä¸€çº§ä¾›åº”å•†&quot;,&quot;amount&quot;:100,&quot;createDate&quot;:&quot;2020-12-28T10:37:54.271518Z&quot;,&quot;endDate&quot;:&quot;2021-06-28T10:37:54.271518Z&quot;,&quot;contractHash&quot;:&quot;test&quot;,&quot;invoiceHash&quot;:&quot;test&quot;&#125;]</span><br></pre></td></tr></table></figure><p>äº¤æ˜“ä¹‹åownerå˜æˆäº†ä¸€çº§ä¾›åº”å•†ï¼Œæ²¡æœ‰é—®é¢˜ã€‚</p><h2 id="é—®é¢˜è®°å½•ï¼š">é—®é¢˜è®°å½•ï¼š</h2><p>è™½ç„¶æ™ºèƒ½åˆçº¦çš„ä»£ç ç¼–å†™æ–¹å¼å¦‚ä¸‹ï¼Œä½†æ˜¯ç¬¬äºŒè¡Œçš„<code>TransferAsset</code>å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œå¯èƒ½æ˜¯å› ä¸ºç¬¬ä¸€ä¸ªåˆ›å»ºäº¤æ˜“ï¼ˆCreateAssetï¼‰è¿˜æ²¡æœ‰æˆåŠŸï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªäº¤æ˜“ï¼ˆTransferAssetï¼‰æ²¡æœ‰è¿™ä¸ªèµ„äº§æ‰€ä»¥æ²¡æœ‰æ‰§è¡Œï¼Ÿå¾…ç¡®è®¤</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºèµ„äº§</span></span><br><span class="line">s.CreateAsset(ctx, assetID, amount)</span><br><span class="line">s.TransferAsset(ctx, assetID, owner)</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²v6ç‰ˆæœ¬çš„supply">éƒ¨ç½²v6ç‰ˆæœ¬çš„supply</h2><h3 id="v6ç‰ˆæœ¬æ™ºèƒ½åˆçº¦æºç å¦‚ä¸‹ï¼š">v6ç‰ˆæœ¬æ™ºèƒ½åˆçº¦æºç å¦‚ä¸‹ï¼š</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chaincode</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/golang/protobuf/ptypes&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/hyperledger/fabric-contract-api-go/contractapi&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// SmartContract provides functions for managing an Asset</span></span><br><span class="line"><span class="keyword">type</span> SmartContract <span class="keyword">struct</span> &#123;</span><br><span class="line">contractapi.Contract</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Asset describes basic details of what makes up a simple asset</span></span><br><span class="line"><span class="keyword">type</span> Asset <span class="keyword">struct</span> &#123;</span><br><span class="line">ID           <span class="keyword">string</span>    <span class="string">`json:&quot;ID&quot;`</span></span><br><span class="line">Issuer       <span class="keyword">string</span>    <span class="string">`json:&quot;issuer&quot;`</span></span><br><span class="line">Owner        <span class="keyword">string</span>    <span class="string">`json:&quot;owner&quot;`</span></span><br><span class="line">Amount       <span class="keyword">int64</span>     <span class="string">`json:&quot;amount&quot;`</span></span><br><span class="line">CreateDate   time.Time <span class="string">`json:&quot;createDate&quot;`</span></span><br><span class="line">EndDate      time.Time <span class="string">`json:&quot;endDate&quot;`</span></span><br><span class="line">ContractHash <span class="keyword">string</span>    <span class="string">`json:&quot;contractHash&quot;`</span></span><br><span class="line">InvoiceHash  <span class="keyword">string</span>    <span class="string">`json:&quot;invoiceHash&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IssueVoucher å‘è¡Œå‡­è¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">IssueVoucher</span><span class="params">(ctx contractapi.TransactionContextInterface, assetID <span class="keyword">string</span>, amount <span class="keyword">int64</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºèµ„äº§</span></span><br><span class="line">asset, err := s.createAsset(ctx, assetID, amount, <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>, <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> s.PutState(ctx, asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// createAsset issues a new asset to the world state with given details.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">createAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, amount <span class="keyword">int64</span>, issuerName <span class="keyword">string</span>, owner <span class="keyword">string</span>)</span> <span class="params">(*Asset, error)</span></span> &#123;</span><br><span class="line">exists, err := s.AssetExists(ctx, id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> exists &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;the asset %s already exists&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line">now, err := getNow(ctx)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">asset := Asset&#123;ID: id, Issuer: issuerName, Amount: amount, Owner: owner, CreateDate: now,</span><br><span class="line">EndDate: now.AddDate(<span class="number">0</span>, <span class="number">6</span>, <span class="number">0</span>), ContractHash: <span class="string">&quot;test&quot;</span>, InvoiceHash: <span class="string">&quot;test&quot;</span>&#125;</span><br><span class="line"><span class="keyword">return</span> &amp;asset, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getNow</span><span class="params">(ctx contractapi.TransactionContextInterface)</span> <span class="params">(time.Time, error)</span></span> &#123;</span><br><span class="line">now, err := ctx.GetStub().GetTxTimestamp()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> time.Now(), err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ptypes.Timestamp(now)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadAsset returns the asset stored in the world state with given id.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">ReadAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>)</span> <span class="params">(*Asset, error)</span></span> &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;failed to read from world state: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> assetJSON == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;the asset %s does not exist&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> asset Asset</span><br><span class="line">err = json.Unmarshal(assetJSON, &amp;asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &amp;asset, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AssetExists returns true when asset with given ID exists in world state</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">AssetExists</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">bool</span>, error)</span></span> &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>, fmt.Errorf(<span class="string">&quot;failed to read from world state: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> assetJSON != <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TransferAsset updates the owner field of asset with given id in world state.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">TransferAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, newOwner <span class="keyword">string</span>, amount <span class="keyword">int64</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">asset, err := s.ReadAsset(ctx, id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœé‡‘é¢åˆšå¥½ç­‰äºå‡­è¯èµ„äº§çš„é‡‘é¢ï¼Œç›´æ¥æ›´æ–°å‡­è¯èµ„äº§çš„æ‹¥æœ‰è€…</span></span><br><span class="line"><span class="keyword">if</span> asset.Amount == amount &#123;</span><br><span class="line">asset.Owner = newOwner</span><br><span class="line">err = s.PutState(ctx, asset)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> asset.Amount &gt; amount &#123; <span class="comment">// å¦‚æœå‡­è¯èµ„äº§çš„é‡‘é¢å¤§äºè½¬è´¦çš„é‡‘é¢ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„äº§</span></span><br><span class="line"><span class="comment">// åˆ›å»ºæ–°çš„èµ„äº§å¹¶ä¿å­˜</span></span><br><span class="line">newAsset, err := s.createAsset(ctx, asset.ID+<span class="string">&quot;1&quot;</span>, amount, asset.Issuer, newOwner)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">err = s.PutState(ctx, newAsset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ›´æ–°æ—§èµ„äº§çš„é‡‘é¢</span></span><br><span class="line">asset.Amount = asset.Amount - amount</span><br><span class="line">err = s.PutState(ctx, asset)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> asset.Amount &lt; amount &#123; <span class="comment">// å¦‚æœèµ„äº§çš„é¢åº¦å°äºè¦è½¬è´¦çš„é‡‘é¢ï¼Œåˆ™ç›´æ¥æŠ¥é”™</span></span><br><span class="line">err = fmt.Errorf(<span class="string">&quot;è½¬è´¦é‡‘é¢=%d,ä¸èƒ½è¶…è¿‡èµ„äº§çš„é‡‘é¢=%d&quot;</span>, amount, asset.Amount)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PutState æ›´æ–°èµ„äº§</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">PutState</span><span class="params">(ctx contractapi.TransactionContextInterface, asset *Asset)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">assetJSON, err := json.Marshal(asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ctx.GetStub().PutState(asset.ID, assetJSON)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetAllAssets returns all assets found in world state</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">GetAllAssets</span><span class="params">(ctx contractapi.TransactionContextInterface)</span> <span class="params">([]*Asset, error)</span></span> &#123;</span><br><span class="line"><span class="comment">// range query with empty string for startKey and endKey does an</span></span><br><span class="line"><span class="comment">// open-ended query of all assets in the chaincode namespace.</span></span><br><span class="line">resultsIterator, err := ctx.GetStub().GetStateByRange(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resultsIterator.Close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> assets []*Asset</span><br><span class="line"><span class="keyword">for</span> resultsIterator.HasNext() &#123;</span><br><span class="line">queryResponse, err := resultsIterator.Next()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> asset Asset</span><br><span class="line">err = json.Unmarshal(queryResponse.Value, &amp;asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">assets = <span class="built_in">append</span>(assets, &amp;asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> assets, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…-v3">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.6.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_6.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v3">å®‰è£…é“¾ç åŒ…</h3><p>ä¸€çº§ä¾›åº”å•†å’Œæ ¸å¿ƒä¼ä¸šéƒ½è¦å®‰è£…ï¼š<br>æ ¸å¿ƒä¼ä¸šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.6.tar.gz --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä¸€çº§ä¾›åº”å•†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.6.tar.gz --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v5">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v3">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_6.0:18a7379ed3b12a57961a735880a71bea3dd242c741fa0970f779b5a338f848de</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v6">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ ¸å¿ƒä¼ä¸šå’Œä¸€çº§ä¾›åº”å•†éƒ½éœ€è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 6.0 --package-id $CC_PACKAGE_ID --sequence 6 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 17:58:55.313 CST [chaincodeCmd] ClientWait -&gt; INFO 001 txid [c4974d5c90ae4fb3bd31f179292d9943dd05aac47248f33e365d9f32ccb5ccb6] committed with status (VALID) at localhost:8051</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v3">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID coreandfirstchannel --name supply --version 6.0 --sequence 6 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;approvals&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;GylCoreOrg1MSP&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">&quot;GylFOrg1MSP&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸¤ä¸ªç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 6.0 --sequence 6 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-28 17:51:08.452 CST [chaincodeCmd] ClientWait -&gt; INFO 001 txid [87bc060e5ccdf4014cd4cf34bbbeb5d2ea10c4ff8ebb6f444d10580e2de2da50] committed with status (VALID) at localhost:8053</span><br><span class="line">2020-12-28 17:51:08.460 CST [chaincodeCmd] ClientWait -&gt; INFO 002 txid [87bc060e5ccdf4014cd4cf34bbbeb5d2ea10c4ff8ebb6f444d10580e2de2da50] committed with status (VALID) at localhost:8051</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID coreandfirstchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹,å¯ä»¥çœ‹åˆ°å·²ç»å‡çº§åˆ°2.0ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Committed chaincode definition for chaincode &#x27;supply&#x27; on channel &#x27;coreandfirstchannel&#x27;:</span><br><span class="line">Version: 2.0, Sequence: 2, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [GylCoreOrg1MSP: true, GylFOrg1MSP: true]</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç -v3">è°ƒç”¨é“¾ç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C coreandfirstchannel -n supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;IssueVoucher&quot;,&quot;Args&quot;:[&quot;asset002&quot;, &quot;1000&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æˆåŠŸä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 10:59:48.513 CST [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 001 Chaincode invoke successful. result: status:200</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during invoke. response: status:500 message:&quot;the asset asset001 already exists&quot;</span><br></pre></td></tr></table></figure><p>**è§£å†³æ–¹æ¡ˆï¼š**åŸå› æ˜¯ä»¥å†…èµ„äº§IDä¸ºasset001çš„èµ„äº§å·²ç»å­˜åœ¨ï¼Œä¿®æ”¹èµ„äº§IDå‚æ•°å³å¯ã€‚</p><h4 id="æŸ¥è¯¢è°ƒç”¨åçš„ç»“æœ-v2">æŸ¥è¯¢è°ƒç”¨åçš„ç»“æœ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C coreandfirstchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-28T10:37:54.271518Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-28T10:37:54.271518Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;test&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset002&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T02:59:48.495257Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T02:59:48.495257Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;test&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨äº¤æ˜“æ–¹æ³•-v2">è°ƒç”¨äº¤æ˜“æ–¹æ³•</h3><p>æŠŠå‡­è¯èµ„äº§æ‹†åˆ†ä¸€éƒ¨åˆ†ï¼ˆ200ï¼‰ç»™ä¸€çº§ä¾›åº”å•†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C coreandfirstchannel -n supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAsset&quot;,&quot;Args&quot;:[&quot;asset002&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;, &quot;200&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥è¯¢ï¼š<code>peer chaincode query -C coreandfirstchannel -n supply -c '&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;'</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;ID&quot;: &quot;asset001&quot;,</span><br><span class="line">    &quot;issuer&quot;: &quot;æ ¸å¿ƒä¼ä¸š&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;ä¸€çº§ä¾›åº”å•†&quot;,</span><br><span class="line">    &quot;amount&quot;: 100,</span><br><span class="line">    &quot;createDate&quot;: &quot;2020-12-28T10:37:54.271518Z&quot;,</span><br><span class="line">    &quot;endDate&quot;: &quot;2021-06-28T10:37:54.271518Z&quot;,</span><br><span class="line">    &quot;contractHash&quot;: &quot;test&quot;,</span><br><span class="line">    &quot;invoiceHash&quot;: &quot;test&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;ID&quot;: &quot;asset002&quot;,</span><br><span class="line">    &quot;issuer&quot;: &quot;æ ¸å¿ƒä¼ä¸š&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;æ ¸å¿ƒä¼ä¸š&quot;,</span><br><span class="line">    &quot;amount&quot;: 800,</span><br><span class="line">    &quot;createDate&quot;: &quot;2020-12-29T02:59:48.495257Z&quot;,</span><br><span class="line">    &quot;endDate&quot;: &quot;2021-06-29T02:59:48.495257Z&quot;,</span><br><span class="line">    &quot;contractHash&quot;: &quot;test&quot;,</span><br><span class="line">    &quot;invoiceHash&quot;: &quot;test&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;ID&quot;: &quot;asset0021&quot;,</span><br><span class="line">    &quot;issuer&quot;: &quot;æ ¸å¿ƒä¼ä¸š&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;ä¸€çº§ä¾›åº”å•†&quot;,</span><br><span class="line">    &quot;amount&quot;: 200,</span><br><span class="line">    &quot;createDate&quot;: &quot;2020-12-29T03:02:49.495789Z&quot;,</span><br><span class="line">    &quot;endDate&quot;: &quot;2021-06-29T03:02:49.495789Z&quot;,</span><br><span class="line">    &quot;contractHash&quot;: &quot;test&quot;,</span><br><span class="line">    &quot;invoiceHash&quot;: &quot;test&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>äº¤æ˜“ä¹‹åï¼Œæ ¸å¿ƒä¼ä¸šå‰©ä½™800çš„å‡­è¯ï¼Œä¸€çº§ä¾›åº”å•†è·å¾—ä¸€ä¸ªæ–°çš„å‡­è¯ã€‚éªŒè¯æ— è¯¯ã€‚</p><h2 id="éƒ¨ç½²v7ç‰ˆæœ¬çš„supply">éƒ¨ç½²v7ç‰ˆæœ¬çš„supply</h2><h3 id="v7ç‰ˆæœ¬æ™ºèƒ½åˆçº¦æºç å¦‚ä¸‹ï¼š">v7ç‰ˆæœ¬æ™ºèƒ½åˆçº¦æºç å¦‚ä¸‹ï¼š</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chaincode</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/golang/protobuf/ptypes&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/hyperledger/fabric-contract-api-go/contractapi&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// SmartContract provides functions for managing an Asset</span></span><br><span class="line"><span class="keyword">type</span> SmartContract <span class="keyword">struct</span> &#123;</span><br><span class="line">contractapi.Contract</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Asset describes basic details of what makes up a simple asset</span></span><br><span class="line"><span class="keyword">type</span> Asset <span class="keyword">struct</span> &#123;</span><br><span class="line">ID           <span class="keyword">string</span>    <span class="string">`json:&quot;ID&quot;`</span></span><br><span class="line">Issuer       <span class="keyword">string</span>    <span class="string">`json:&quot;issuer&quot;`</span></span><br><span class="line">Owner        <span class="keyword">string</span>    <span class="string">`json:&quot;owner&quot;`</span></span><br><span class="line">Amount       <span class="keyword">int64</span>     <span class="string">`json:&quot;amount&quot;`</span></span><br><span class="line">CreateDate   time.Time <span class="string">`json:&quot;createDate&quot;`</span></span><br><span class="line">EndDate      time.Time <span class="string">`json:&quot;endDate&quot;`</span></span><br><span class="line">ContractHash <span class="keyword">string</span>    <span class="string">`json:&quot;contractHash&quot;`</span></span><br><span class="line">InvoiceHash  <span class="keyword">string</span>    <span class="string">`json:&quot;invoiceHash&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IssueVoucher å‘è¡Œå‡­è¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">IssueVoucher</span><span class="params">(ctx contractapi.TransactionContextInterface, assetID <span class="keyword">string</span>, amount <span class="keyword">int64</span>, owner <span class="keyword">string</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºèµ„äº§</span></span><br><span class="line"><span class="keyword">return</span> s.CreateAssetAndSave(ctx, assetID, amount, <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>, owner, contractHash, invoiceHash)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CreateAssetAndSave åˆ›å»ºèµ„äº§å¹¶ä¿å­˜</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">CreateAssetAndSave</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, amount <span class="keyword">int64</span>, issuerName <span class="keyword">string</span>, owner <span class="keyword">string</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">asset, err := s.createAsset(ctx, id, amount, issuerName, owner, contractHash, invoiceHash)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> s.PutState(ctx, asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// createAsset issues a new asset to the world state with given details.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">createAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, amount <span class="keyword">int64</span>, issuerName <span class="keyword">string</span>, owner <span class="keyword">string</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="params">(*Asset, error)</span></span> &#123;</span><br><span class="line">exists, err := s.AssetExists(ctx, id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> exists &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;the asset %s already exists&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line">now, err := getNow(ctx)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">asset := Asset&#123;ID: id, Issuer: issuerName, Amount: amount, Owner: owner, CreateDate: now,</span><br><span class="line">EndDate: now.AddDate(<span class="number">0</span>, <span class="number">6</span>, <span class="number">0</span>), ContractHash: contractHash, InvoiceHash: invoiceHash&#125;</span><br><span class="line"><span class="keyword">return</span> &amp;asset, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getNow</span><span class="params">(ctx contractapi.TransactionContextInterface)</span> <span class="params">(time.Time, error)</span></span> &#123;</span><br><span class="line">now, err := ctx.GetStub().GetTxTimestamp()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> time.Now(), err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ptypes.Timestamp(now)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadAsset returns the asset stored in the world state with given id.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">ReadAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>)</span> <span class="params">(*Asset, error)</span></span> &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;failed to read from world state: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> assetJSON == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;the asset %s does not exist&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> asset Asset</span><br><span class="line">err = json.Unmarshal(assetJSON, &amp;asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &amp;asset, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AssetExists returns true when asset with given ID exists in world state</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">AssetExists</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">bool</span>, error)</span></span> &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>, fmt.Errorf(<span class="string">&quot;failed to read from world state: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> assetJSON != <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TransferAssetByID æ ¹æ®èµ„äº§IDè½¬è´¦</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">TransferAssetByID</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, newOwner <span class="keyword">string</span>, amount <span class="keyword">int64</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">asset, err := s.ReadAsset(ctx, id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> s.TransferAsset(ctx, asset, newOwner, amount, contractHash, invoiceHash)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TransferAsset updates the owner field of asset with given id in world state.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">TransferAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, asset *Asset, newOwner <span class="keyword">string</span>, amount <span class="keyword">int64</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="comment">// å¦‚æœé‡‘é¢åˆšå¥½ç­‰äºå‡­è¯èµ„äº§çš„é‡‘é¢ï¼Œç›´æ¥æ›´æ–°å‡­è¯èµ„äº§çš„æ‹¥æœ‰è€…</span></span><br><span class="line"><span class="keyword">if</span> asset.Amount == amount &#123;</span><br><span class="line">asset.Owner = newOwner</span><br><span class="line"><span class="keyword">return</span> s.PutState(ctx, asset)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> asset.Amount &gt; amount &#123; <span class="comment">// å¦‚æœå‡­è¯èµ„äº§çš„é‡‘é¢å¤§äºè½¬è´¦çš„é‡‘é¢ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„äº§</span></span><br><span class="line"><span class="comment">// åˆ›å»ºæ–°çš„èµ„äº§å¹¶ä¿å­˜</span></span><br><span class="line">err := s.CreateAssetAndSave(ctx, asset.ID+<span class="string">&quot;1&quot;</span>, amount, asset.Issuer, newOwner, contractHash, invoiceHash)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ›´æ–°æ—§èµ„äº§çš„é‡‘é¢</span></span><br><span class="line">asset.Amount = asset.Amount - amount</span><br><span class="line"><span class="keyword">return</span> s.PutState(ctx, asset)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> asset.Amount &lt; amount &#123; <span class="comment">// å¦‚æœèµ„äº§çš„é¢åº¦å°äºè¦è½¬è´¦çš„é‡‘é¢ï¼Œåˆ™ç›´æ¥æŠ¥é”™</span></span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;è½¬è´¦é‡‘é¢=%d,ä¸èƒ½è¶…è¿‡èµ„äº§çš„é‡‘é¢=%d&quot;</span>, amount, asset.Amount)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PutState æ›´æ–°èµ„äº§</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">PutState</span><span class="params">(ctx contractapi.TransactionContextInterface, asset *Asset)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">assetJSON, err := json.Marshal(asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ctx.GetStub().PutState(asset.ID, assetJSON)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetAllAssets returns all assets found in world state</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">GetAllAssets</span><span class="params">(ctx contractapi.TransactionContextInterface)</span> <span class="params">([]*Asset, error)</span></span> &#123;</span><br><span class="line"><span class="comment">// range query with empty string for startKey and endKey does an</span></span><br><span class="line"><span class="comment">// open-ended query of all assets in the chaincode namespace.</span></span><br><span class="line">resultsIterator, err := ctx.GetStub().GetStateByRange(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resultsIterator.Close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> assets []*Asset</span><br><span class="line"><span class="keyword">for</span> resultsIterator.HasNext() &#123;</span><br><span class="line">queryResponse, err := resultsIterator.Next()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> asset Asset</span><br><span class="line">err = json.Unmarshal(queryResponse.Value, &amp;asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">assets = <span class="built_in">append</span>(assets, &amp;asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> assets, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…-v4">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.7.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_7.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v4">å®‰è£…é“¾ç åŒ…</h3><p>ä¸€çº§ä¾›åº”å•†å’Œæ ¸å¿ƒä¼ä¸šéƒ½è¦å®‰è£…ï¼š<br>æ ¸å¿ƒä¼ä¸šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.7.tar.gz --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä¸€çº§ä¾›åº”å•†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.7.tar.gz --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v7">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v4">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_7.0:770f0c8f4fe3a348314f546594d402ccb3eb5f5779f12e7edee48f6ce474227b</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v8">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ ¸å¿ƒä¼ä¸šå’Œä¸€çº§ä¾›åº”å•†éƒ½éœ€è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 7.0 --package-id $CC_PACKAGE_ID --sequence 7 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v4">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID coreandfirstchannel --name supply --version 7.0 --sequence 7 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>åœ¨ä¸¤ä¸ªç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID coreandfirstchannel --name supply --version 7.0 --sequence 7 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID coreandfirstchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç -v4">è°ƒç”¨é“¾ç </h3><p>è°ƒç”¨é“¾ç ä¹‹å‰å…ˆç”Ÿæˆæµ‹è¯•çš„åˆåŒhashå€¼å’Œå‘ç¥¨hashå€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shasum -a 256 CORE_AND_F1_CONTRACT.txt &gt; core_and_f1_contract_hash.txt</span><br><span class="line">shasum -a 256 CORE_AND_F1_INVOICE.txt &gt; CORE_AND_F1_INVOICE_hash.txt</span><br></pre></td></tr></table></figure><h4 id="å‘è¡Œå‡­è¯">å‘è¡Œå‡­è¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C coreandfirstchannel -n supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;IssueVoucher&quot;,&quot;Args&quot;:[&quot;asset003&quot;, &quot;1000&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;, &quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;, &quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢è°ƒç”¨åçš„ç»“æœ-v3">æŸ¥è¯¢è°ƒç”¨åçš„ç»“æœ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C coreandfirstchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æˆåŠŸç»“æœå¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-28T10:37:54.271518Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-28T10:37:54.271518Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;test&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset002&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T02:59:48.495257Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T02:59:48.495257Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;test&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0021&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T03:02:49.495789Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T03:02:49.495789Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;test&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset003&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T06:20:30.868298Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T06:20:30.868298Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>IDä¸ºasset003çš„èµ„äº§å½’å±ä¸ºä¸€çº§ä¾›åº”å•†ï¼Œé‡‘é¢æ— è¯¯ã€‚</p><h2 id="åˆ›å»ºä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†ä¹‹é—´çš„channel">åˆ›å»ºä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†ä¹‹é—´çš„channel</h2><h3 id="åˆ›å»ºé€šé“ï¼š">åˆ›å»ºé€šé“ï¼š</h3><p>è¿è¡Œä¸‹é¢çš„ç¨‹åºæ¥ä¸º<code>firstandsecondchannel</code>é€šé“åˆ›å»ºä¸€ä¸ªâ€œåˆ›å»ºé€šé“çš„äº¤æ˜“â€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configtxgen -profile FirstAndSecondChannel -outputCreateChannelTx ./channel-artifacts/firstandsecondchannel.tx -channelID firstandsecondchannel</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:27:37.416 CST [common.tools.configtxgen] main -&gt; INFO 001 Loading configuration</span><br><span class="line">2020-12-29 14:27:37.430 CST [common.tools.configtxgen.localconfig] Load -&gt; INFO 002 Loaded configuration: /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/config/configtx.yaml</span><br><span class="line">2020-12-29 14:27:37.430 CST [common.tools.configtxgen] doOutputChannelCreateTx -&gt; INFO 003 Generating new channel configtx</span><br><span class="line">2020-12-29 14:27:37.436 CST [common.tools.configtxgen] doOutputChannelCreateTx -&gt; INFO 004 Writing new channel tx</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä»¥ä¸€çº§ä¾›åº”å•†ç®¡ç†å‘˜èº«ä»½æ“ä½œ<code>peer</code>CLIï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŠŠäº¤æ˜“å‘ç»™orderæœåŠ¡åˆ›å»ºé€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel create -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com -c firstandsecondchannel -f ./channel-artifacts/firstandsecondchannel.tx --outputBlock ./channel-artifacts/firstandsecondchannel.block --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯ä¿¡æ¯è®°å½•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: got unexpected status: BAD_REQUEST -- error validating channel creation transaction for new channel &#x27;firstandsecondchannel&#x27;, could not successfully apply update to template configuration: error authorizing update: error validating DeltaSet: policy for [Group]  /Channel/Application not satisfied: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the &#x27;Admins&#x27; sub-policies to be satisfied</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š</strong></p><p>ç”±äºé…ç½®æ–‡ä»¶é‡Œé¢é…ç½®çš„firstandsecondchannelé‡Œé¢åŒ…å«ä¸€çº§ä¾›åº”å•†å’Œä¸¤ä¸ªäºŒçº§ä¾›åº”å•†ï¼Œè€Œä¸Šé¢çš„å‘½ä»¤æ˜¯ä»¥æ ¸å¿ƒä¼ä¸šçš„ç®¡ç†å‘˜èº«ä»½è¿è¡Œçš„ã€‚æ‰€ä»¥æœ‰é—®é¢˜ã€‚åˆ‡æ¢æˆä¸€çº§ä¾›åº”å•†çš„ç¯å¢ƒæ‰§è¡Œå³å¯ã€‚</p><p>æ­£ç¡®æ‰§è¡Œä¹‹åçš„æ—¥å¿—ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:34:06.203 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:34:06.231 CST [cli.common] readBlock -&gt; INFO 002 Expect block, but got status: &amp;&#123;NOT_FOUND&#125;</span><br><span class="line">2020-12-29 14:34:06.244 CST [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:34:06.450 CST [cli.common] readBlock -&gt; INFO 004 Expect block, but got status: &amp;&#123;SERVICE_UNAVAILABLE&#125;</span><br><span class="line">2020-12-29 14:34:06.458 CST [channelCmd] InitCmdFactory -&gt; INFO 005 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:34:06.667 CST [cli.common] readBlock -&gt; INFO 006 Expect block, but got status: &amp;&#123;SERVICE_UNAVAILABLE&#125;</span><br><span class="line">2020-12-29 14:34:06.676 CST [channelCmd] InitCmdFactory -&gt; INFO 007 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:34:06.885 CST [cli.common] readBlock -&gt; INFO 008 Expect block, but got status: &amp;&#123;SERVICE_UNAVAILABLE&#125;</span><br><span class="line">2020-12-29 14:34:06.892 CST [channelCmd] InitCmdFactory -&gt; INFO 009 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:34:07.099 CST [cli.common] readBlock -&gt; INFO 00a Expect block, but got status: &amp;&#123;SERVICE_UNAVAILABLE&#125;</span><br><span class="line">2020-12-29 14:34:07.108 CST [channelCmd] InitCmdFactory -&gt; INFO 00b Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:34:07.320 CST [cli.common] readBlock -&gt; INFO 00c Received block: 0</span><br></pre></td></tr></table></figure><h2 id="æŠŠä¸€çº§ä¾›åº”å•†å’ŒäºŒçº§ä¾›åº”å•†çš„peeråŠ å…¥é€šé“">æŠŠä¸€çº§ä¾›åº”å•†å’ŒäºŒçº§ä¾›åº”å•†çš„peeråŠ å…¥é€šé“</h2><h3 id="ä¸€çº§ä¾›åº”å•†çš„peeråŠ å…¥é€šé“">ä¸€çº§ä¾›åº”å•†çš„peeråŠ å…¥é€šé“</h3><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å°†peeråŠ å…¥é€šé“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel join -b ./channel-artifacts/firstandsecondchannel.block</span><br></pre></td></tr></table></figure><p>æˆåŠŸä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:35:00.679 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:35:00.724 CST [channelCmd] executeJoin -&gt; INFO 002 Successfully submitted proposal to join channel</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡è·å–é€šé“ä¿¡æ¯ç¡®è®¤åŠ å…¥æˆåŠŸ">é€šè¿‡è·å–é€šé“ä¿¡æ¯ç¡®è®¤åŠ å…¥æˆåŠŸ</h3><h4 id="è·å–é€šé“ä¿¡æ¯">è·å–é€šé“ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel getinfo -c firstandsecondchannel</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:35:28.593 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">Blockchain info: &#123;&quot;height&quot;:1,&quot;currentBlockHash&quot;:&quot;270CWtnSyXJmeGCxJx41sX7uTchRZpljYWKJ48dD434=&quot;&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒçº§ä¾›åº”å•†1åŠ å…¥é€šé“">äºŒçº§ä¾›åº”å•†1åŠ å…¥é€šé“</h3><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç„¶åæ‹‰å–é€šé“çš„åˆ›ä¸–çºªåŒºå—(å› ä¸ºæ˜¯æµ‹è¯•æœ¬æ¬¡å¿½ç•¥)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel fetch 0 ./channel-artifacts/coreandfirstchannel.block -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com -c coreandfirstchannel --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>åŠ å…¥é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel join -b ./channel-artifacts/firstandsecondchannel.block</span><br></pre></td></tr></table></figure><p>æˆåŠŸä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:47:03.684 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:47:03.722 CST [channelCmd] executeJoin -&gt; INFO 002 Successfully submitted proposal to join channel</span><br></pre></td></tr></table></figure><p><strong>æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">supply-finance apple$ peer channel join -b ./channel-artifacts/coreandfirstchannel.block</span><br><span class="line">2020-12-29 14:43:56.186 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">Error: proposal failed (err: rpc error: code = Unknown desc = error validating proposal: access denied: channel [] creator org [GylSOrg1M])</span><br></pre></td></tr></table></figure><p>**é”™è¯¯åŸå› ï¼š**ç”±äºç¯å¢ƒå˜é‡è®¾ç½®çš„æœ‰é—®é¢˜ï¼Œ<code>CORE_PEER_LOCALMSPID</code>è®¾ç½®æˆäº†<code>GylSOrg1M</code>ï¼Œåº”è¯¥è®¾ç½®ä¸º<code>GylSOrg1MSP</code></p><h3 id="äºŒçº§ä¾›åº”å•†2åŠ å…¥é€šé“">äºŒçº§ä¾›åº”å•†2åŠ å…¥é€šé“</h3><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç„¶åæ‹‰å–é€šé“çš„åˆ›ä¸–çºªåŒºå—(å› ä¸ºæ˜¯æµ‹è¯•æœ¬æ¬¡å¿½ç•¥)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel fetch 0 ./channel-artifacts/coreandfirstchannel.block -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com -c coreandfirstchannel --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>åŠ å…¥é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel join -b ./channel-artifacts/firstandsecondchannel.block</span><br></pre></td></tr></table></figure><p>æˆåŠŸä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:52:12.969 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:52:13.010 CST [channelCmd] executeJoin -&gt; INFO 002 Successfully submitted proposal to join channel</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®é”šèŠ‚ç‚¹">è®¾ç½®é”šèŠ‚ç‚¹</h3><h4 id="ä¸ºGylFOrg1MSPè®¾ç½®é”šèŠ‚ç‚¹">ä¸ºGylFOrg1MSPè®¾ç½®é”šèŠ‚ç‚¹</h4><h5 id="æ‹‰å–æœ€æ–°çš„channelé…ç½®åŒºå—">æ‹‰å–æœ€æ–°çš„channelé…ç½®åŒºå—</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel fetch config channel-artifacts/firstandsecondchannel_config_block.pb -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com -c firstandsecondchannel --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æˆåŠŸä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:55:57.114 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:55:57.120 CST [cli.common] readBlock -&gt; INFO 002 Received block: 0</span><br><span class="line">2020-12-29 14:55:57.120 CST [channelCmd] fetch -&gt; INFO 003 Retrieving last config block: 0</span><br><span class="line">2020-12-29 14:55:57.125 CST [cli.common] readBlock -&gt; INFO 004 Received block: 0</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹é€šé“é…ç½®åŒºå—">ä¿®æ”¹é€šé“é…ç½®åŒºå—</h5><p>åˆ‡æ¢åˆ°<code>channel-artifacts</code>ç„¶åæŠŠåŒºå—å†…å®¹è½¬æ¢æˆjsonæ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd channel-artifacts</span><br><span class="line">configtxlator proto_decode --input firstandsecondchannel_config_block.pb --type common.Block --output firstandsecondchannel_config_block.json</span><br><span class="line">jq .data.data[0].payload.data.config firstandsecondchannel_config_block.json &gt; firstandsecondchannel_config.json</span><br><span class="line"><span class="meta">#</span><span class="bash"> copyä¸€ä»½</span></span><br><span class="line">cp firstandsecondchannel_config.json firstandsecondchannel_config_copy.json</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>jq</code> å·¥å…·æ¥æ·»åŠ GylFOrg1MSPç»„ç»‡çš„é”šèŠ‚ç‚¹åˆ°é€šé“é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jq &#x27;.channel_group.groups.Application.groups.GylFOrg1MSP.values += &#123;&quot;AnchorPeers&quot;:&#123;&quot;mod_policy&quot;: &quot;Admins&quot;,&quot;value&quot;:&#123;&quot;anchor_peers&quot;: [&#123;&quot;host&quot;: &quot;peer0.f1.supply.com&quot;,&quot;port&quot;: 8053&#125;]&#125;,&quot;version&quot;: &quot;0&quot;&#125;&#125;&#x27; firstandsecondchannel_config_copy.json &gt; modified_firstandsecondchannel_config.json</span><br></pre></td></tr></table></figure><p>å°†åŸå§‹çš„å’Œä¿®æ”¹åçš„é€šé“é…ç½®éƒ½è½¬æ¢å›protobufæ ¼å¼ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configtxlator proto_encode --input firstandsecondchannel_config.json --type common.Config --output firstandsecondchannel_config.pb</span><br><span class="line">configtxlator proto_encode --input modified_firstandsecondchannel_config.json --type common.Config --output modified_firstandsecondchannel_config.pb</span><br><span class="line">configtxlator compute_update --channel_id firstandsecondchannel --original firstandsecondchannel_config.pb --updated modified_firstandsecondchannel_config.pb --output firstandsecondchannel_config_update.pb</span><br></pre></td></tr></table></figure><h5 id="æŠŠæ›´æ–°åçš„äº¤æ˜“æ‰“åŒ…æˆä¸€ä¸ªæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“ï¼š">æŠŠæ›´æ–°åçš„äº¤æ˜“æ‰“åŒ…æˆä¸€ä¸ªæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configtxlator proto_decode --input firstandsecondchannel_config_update.pb --type common.ConfigUpdate --output firstandsecondchannel_config_update.json</span><br><span class="line">echo &#x27;&#123;&quot;payload&quot;:&#123;&quot;header&quot;:&#123;&quot;channel_header&quot;:&#123;&quot;channel_id&quot;:&quot;firstandsecondchannel&quot;, &quot;type&quot;:2&#125;&#125;,&quot;data&quot;:&#123;&quot;config_update&quot;:&#x27;$(cat firstandsecondchannel_config_update.json)&#x27;&#125;&#125;&#125;&#x27; | jq . &gt; firstandsecondchannel_config_update_in_envelope.json</span><br><span class="line">configtxlator proto_encode --input firstandsecondchannel_config_update_in_envelope.json --type common.Envelope --output firstandsecondchannel_config_update_in_envelope.pb</span><br></pre></td></tr></table></figure><h5 id="æäº¤â€œæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“â€">æäº¤â€œæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“â€</h5><p>è¿›åˆ°ä¸Šä¸€çº§ç›®å½•<code>cd ..</code>ï¼Œä¹‹åè¿è¡Œå‘½ä»¤å°†äº¤æ˜“æäº¤ç»™æ’åºæœåŠ¡è¿›è¡Œé€šé“é…ç½®çš„æ›´æ–°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br><span class="line">peer channel update -f channel-artifacts/firstandsecondchannel_config_update_in_envelope.pb -c firstandsecondchannel -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸçš„ç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:57:48.872 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 14:57:48.894 CST [channelCmd] update -&gt; INFO 002 Successfully submitted channel update</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯ï¼Œè·å–é€šé“ä¿¡æ¯-peer-channel-getinfo-c-firstandsecondchannel">éªŒè¯ï¼Œè·å–é€šé“ä¿¡æ¯:<code>peer channel getinfo -c firstandsecondchannel</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 14:58:15.937 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">Blockchain info: &#123;&quot;height&quot;:2,&quot;currentBlockHash&quot;:&quot;4lhXvhRKDNxBsOIGL0H0A5QDdNkySgv/ehtUkobtW9Y=&quot;,&quot;previousBlockHash&quot;:&quot;270CWtnSyXJmeGCxJx41sX7uTchRZpljYWKJ48dD434=&quot;&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸ºäºŒçº§ä¾›åº”å•†1ï¼ˆGylSOrg1MSPï¼‰è®¾ç½®é”šèŠ‚ç‚¹">ä¸ºäºŒçº§ä¾›åº”å•†1ï¼ˆGylSOrg1MSPï¼‰è®¾ç½®é”šèŠ‚ç‚¹</h4><p>ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œæ‹‰å–æœ€æ–°çš„channelé…ç½®åŒºå—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel fetch config channel-artifacts/firstandsecondchannel_config_block.pb -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com -c firstandsecondchannel --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹é€šé“é…ç½®åŒºå—-v2">ä¿®æ”¹é€šé“é…ç½®åŒºå—</h5><p>åˆ‡æ¢åˆ°<code>channel-artifacts</code>ç„¶åæŠŠåŒºå—å†…å®¹è½¬æ¢æˆjsonæ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd channel-artifacts</span><br><span class="line">configtxlator proto_decode --input firstandsecondchannel_config_block.pb --type common.Block --output firstandsecondchannel_config_block.json</span><br><span class="line">jq .data.data[0].payload.data.config firstandsecondchannel_config_block.json &gt; firstandsecondchannel_config.json</span><br><span class="line"><span class="meta">#</span><span class="bash"> copyä¸€ä»½</span></span><br><span class="line">cp firstandsecondchannel_config.json firstandsecondchannel_config_copy.json</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>jq</code> å·¥å…·æ¥æ·»åŠ GylCoreOrg1MSPç»„ç»‡çš„é”šèŠ‚ç‚¹åˆ°é€šé“é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jq &#x27;.channel_group.groups.Application.groups.GylSOrg1MSP.values += &#123;&quot;AnchorPeers&quot;:&#123;&quot;mod_policy&quot;: &quot;Admins&quot;,&quot;value&quot;:&#123;&quot;anchor_peers&quot;: [&#123;&quot;host&quot;: &quot;peer0.s1.supply.com&quot;,&quot;port&quot;: 8055&#125;]&#125;,&quot;version&quot;: &quot;0&quot;&#125;&#125;&#x27; firstandsecondchannel_config_copy.json &gt; modified_firstandsecondchannel_config.json</span><br></pre></td></tr></table></figure><p>å°†åŸå§‹çš„å’Œä¿®æ”¹åçš„é€šé“é…ç½®éƒ½è½¬æ¢å›protobufæ ¼å¼ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configtxlator proto_encode --input firstandsecondchannel_config.json --type common.Config --output firstandsecondchannel_config.pb</span><br><span class="line">configtxlator proto_encode --input modified_firstandsecondchannel_config.json --type common.Config --output modified_firstandsecondchannel_config.pb</span><br><span class="line">configtxlator compute_update --channel_id firstandsecondchannel --original firstandsecondchannel_config.pb --updated modified_firstandsecondchannel_config.pb --output firstandsecondchannel_config_update.pb</span><br></pre></td></tr></table></figure><h5 id="æŠŠæ›´æ–°åçš„äº¤æ˜“æ‰“åŒ…æˆä¸€ä¸ªæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“ï¼š-v2">æŠŠæ›´æ–°åçš„äº¤æ˜“æ‰“åŒ…æˆä¸€ä¸ªæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configtxlator proto_decode --input firstandsecondchannel_config_update.pb --type common.ConfigUpdate --output firstandsecondchannel_config_update.json</span><br><span class="line">echo &#x27;&#123;&quot;payload&quot;:&#123;&quot;header&quot;:&#123;&quot;channel_header&quot;:&#123;&quot;channel_id&quot;:&quot;firstandsecondchannel&quot;, &quot;type&quot;:2&#125;&#125;,&quot;data&quot;:&#123;&quot;config_update&quot;:&#x27;$(cat firstandsecondchannel_config_update.json)&#x27;&#125;&#125;&#125;&#x27; | jq . &gt; firstandsecondchannel_config_update_in_envelope.json</span><br><span class="line">configtxlator proto_encode --input firstandsecondchannel_config_update_in_envelope.json --type common.Envelope --output firstandsecondchannel_config_update_in_envelope.pb</span><br></pre></td></tr></table></figure><h5 id="æäº¤â€œæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“â€-v2">æäº¤â€œæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“â€</h5><p>è¿›åˆ°ä¸Šä¸€çº§ç›®å½•<code>cd ..</code>ï¼Œä¹‹åè¿è¡Œå‘½ä»¤å°†äº¤æ˜“æäº¤ç»™æ’åºæœåŠ¡è¿›è¡Œé€šé“é…ç½®çš„æ›´æ–°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br><span class="line">peer channel update -f channel-artifacts/firstandsecondchannel_config_update_in_envelope.pb -c firstandsecondchannel -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸçš„ç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 15:01:14.643 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 15:01:14.670 CST [channelCmd] update -&gt; INFO 002 Successfully submitted channel update</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯ï¼Œè·å–é€šé“ä¿¡æ¯">éªŒè¯ï¼Œè·å–é€šé“ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(base) w:supply-finance apple$ peer channel getinfo -c firstandsecondchannel</span><br><span class="line">2020-12-29 15:01:26.952 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">Blockchain info: &#123;&quot;height&quot;:3,&quot;currentBlockHash&quot;:&quot;DPXkm090OpH9ww862WmR4EktxT0NHEM2i3Py0yHAGPE=&quot;,&quot;previousBlockHash&quot;:&quot;4lhXvhRKDNxBsOIGL0H0A5QDdNkySgv/ehtUkobtW9Y=&quot;&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸ºäºŒçº§ä¾›åº”å•†2ï¼ˆGylSOrg2MSPï¼‰è®¾ç½®é”šèŠ‚ç‚¹">ä¸ºäºŒçº§ä¾›åº”å•†2ï¼ˆGylSOrg2MSPï¼‰è®¾ç½®é”šèŠ‚ç‚¹</h4><p>ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œæ‹‰å–æœ€æ–°çš„channelé…ç½®åŒºå—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer channel fetch config channel-artifacts/firstandsecondchannel_config_block.pb -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com -c firstandsecondchannel --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹é€šé“é…ç½®åŒºå—-v3">ä¿®æ”¹é€šé“é…ç½®åŒºå—</h5><p>åˆ‡æ¢åˆ°<code>channel-artifacts</code>ç„¶åæŠŠåŒºå—å†…å®¹è½¬æ¢æˆjsonæ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd channel-artifacts</span><br><span class="line">configtxlator proto_decode --input firstandsecondchannel_config_block.pb --type common.Block --output firstandsecondchannel_config_block.json</span><br><span class="line">jq .data.data[0].payload.data.config firstandsecondchannel_config_block.json &gt; firstandsecondchannel_config.json</span><br><span class="line"><span class="meta">#</span><span class="bash"> copyä¸€ä»½</span></span><br><span class="line">cp firstandsecondchannel_config.json firstandsecondchannel_config_copy.json</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>jq</code> å·¥å…·æ¥æ·»åŠ GylCoreOrg1MSPç»„ç»‡çš„é”šèŠ‚ç‚¹åˆ°é€šé“é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jq &#x27;.channel_group.groups.Application.groups.GylSOrg2MSP.values += &#123;&quot;AnchorPeers&quot;:&#123;&quot;mod_policy&quot;: &quot;Admins&quot;,&quot;value&quot;:&#123;&quot;anchor_peers&quot;: [&#123;&quot;host&quot;: &quot;peer0.s2.supply.com&quot;,&quot;port&quot;: 8151&#125;]&#125;,&quot;version&quot;: &quot;0&quot;&#125;&#125;&#x27; firstandsecondchannel_config_copy.json &gt; modified_firstandsecondchannel_config.json</span><br></pre></td></tr></table></figure><p>å°†åŸå§‹çš„å’Œä¿®æ”¹åçš„é€šé“é…ç½®éƒ½è½¬æ¢å›protobufæ ¼å¼ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configtxlator proto_encode --input firstandsecondchannel_config.json --type common.Config --output firstandsecondchannel_config.pb</span><br><span class="line">configtxlator proto_encode --input modified_firstandsecondchannel_config.json --type common.Config --output modified_firstandsecondchannel_config.pb</span><br><span class="line">configtxlator compute_update --channel_id firstandsecondchannel --original firstandsecondchannel_config.pb --updated modified_firstandsecondchannel_config.pb --output firstandsecondchannel_config_update.pb</span><br></pre></td></tr></table></figure><h5 id="æŠŠæ›´æ–°åçš„äº¤æ˜“æ‰“åŒ…æˆä¸€ä¸ªæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“ï¼š-v3">æŠŠæ›´æ–°åçš„äº¤æ˜“æ‰“åŒ…æˆä¸€ä¸ªæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configtxlator proto_decode --input firstandsecondchannel_config_update.pb --type common.ConfigUpdate --output firstandsecondchannel_config_update.json</span><br><span class="line">echo &#x27;&#123;&quot;payload&quot;:&#123;&quot;header&quot;:&#123;&quot;channel_header&quot;:&#123;&quot;channel_id&quot;:&quot;firstandsecondchannel&quot;, &quot;type&quot;:2&#125;&#125;,&quot;data&quot;:&#123;&quot;config_update&quot;:&#x27;$(cat firstandsecondchannel_config_update.json)&#x27;&#125;&#125;&#125;&#x27; | jq . &gt; firstandsecondchannel_config_update_in_envelope.json</span><br><span class="line">configtxlator proto_encode --input firstandsecondchannel_config_update_in_envelope.json --type common.Envelope --output firstandsecondchannel_config_update_in_envelope.pb</span><br></pre></td></tr></table></figure><h5 id="æäº¤â€œæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“â€-v3">æäº¤â€œæ›´æ–°é€šé“é…ç½®çš„äº¤æ˜“â€</h5><p>è¿›åˆ°ä¸Šä¸€çº§ç›®å½•<code>cd ..</code>ï¼Œä¹‹åè¿è¡Œå‘½ä»¤å°†äº¤æ˜“æäº¤ç»™æ’åºæœåŠ¡è¿›è¡Œé€šé“é…ç½®çš„æ›´æ–°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br><span class="line">peer channel update -f channel-artifacts/firstandsecondchannel_config_update_in_envelope.pb -c firstandsecondchannel -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸçš„ç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-12-29 15:03:39.793 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">2020-12-29 15:03:39.817 CST [channelCmd] update -&gt; INFO 002 Successfully submitted channel update</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯ï¼Œè·å–é€šé“ä¿¡æ¯-v2">éªŒè¯ï¼Œè·å–é€šé“ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(base) w:supply-finance apple$ peer channel getinfo -c firstandsecondchannel</span><br><span class="line">2020-12-29 15:04:10.414 CST [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized</span><br><span class="line">Blockchain info: &#123;&quot;height&quot;:4,&quot;currentBlockHash&quot;:&quot;PWXXje7tci4mk1ggQ9QMVzkvkP3i+N8WslOGDXreIQ0=&quot;,&quot;previousBlockHash&quot;:&quot;DPXkm090OpH9ww862WmR4EktxT0NHEM2i3Py0yHAGPE=&quot;&#125;</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²supply-v7åˆ°äºŒçº§ä¾›åº”å•†çš„peerèŠ‚ç‚¹">éƒ¨ç½²supply-v7åˆ°äºŒçº§ä¾›åº”å•†çš„peerèŠ‚ç‚¹</h2><h3 id="æ‰“åŒ…-v5">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.7.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_7.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v5">å®‰è£…é“¾ç åŒ…</h3><p>ä¸¤ä¸ªäºŒçº§ä¾›åº”å•†éƒ½è¦å®‰è£…ï¼š<br>äºŒçº§ä¾›åº”å•†1ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.7.tar.gz --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>äºŒçº§ä¾›åº”å•†2ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode install supply.7.tar.gz --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v9">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v5">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_7.0:770f0c8f4fe3a348314f546594d402ccb3eb5f5779f12e7edee48f6ce474227b</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v10">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>ä¸€çº§ä¾›åº”å•†å’Œä¸¤ä¸ªäºŒçº§ä¾›åº”å•†éƒ½éœ€è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID firstandsecondchannel --name supply --version 7.0 --package-id $CC_PACKAGE_ID --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v5">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID firstandsecondchannel --name supply --version 7.0 --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>åœ¨æ‰€æœ‰ç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID firstandsecondchannel --name supply --version 7.0 --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID firstandsecondchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯ä¿¡æ¯è®°å½•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) w:supply-finance apple$ peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID firstandsecondchannel --name supply --version 7.0 --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br><span class="line">Error: proposal failed with status: 500 - channel &#x27;firstandsecondchannel&#x27; not found</span><br></pre></td></tr></table></figure><p>**é”™è¯¯åŸå› ï¼š**ç”±äºæ‰¹å‡†çš„ç»„ç»‡ä¸­åŒ…å«æ ¸å¿ƒä¼ä¸šï¼Œæ ¸å¿ƒä¼ä¸šå¹¶æ²¡æœ‰åŠ å…¥<code>firstandsecondchannel</code>é€šé“ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚</p><h3 id="è°ƒç”¨é“¾ç -v5">è°ƒç”¨é“¾ç </h3><p>è°ƒç”¨é“¾ç ä¹‹å‰å…ˆç”Ÿæˆæµ‹è¯•çš„åˆåŒhashå€¼å’Œå‘ç¥¨hashå€¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a  f1_and_s1_contract.txt</span><br><span class="line">792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49  f1_and_s1_invoice.txt</span><br><span class="line">f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb  f1_and_s2_contract.txt</span><br><span class="line">f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468  f1_and_s2_invoice.txt</span><br></pre></td></tr></table></figure><p>è°ƒç”¨è½¬è´¦äº¤æ˜“ï¼šTODO é—®é¢˜æ¥äº†ï¼Œä¸¤ä¸ªchannelä¹‹é—´å¦‚ä½•äº¤æ¢èµ„äº§ï¼Ÿè¿™æ˜¯ä¸ªé—®é¢˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com -C firstandsecondchannel -n supply --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;IssueVoucher&quot;,&quot;Args&quot;:[&quot;asset003&quot;, &quot;1000&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;, &quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;, &quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C firstandsecondchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h2 id="æ ¸å¿ƒä¼ä¸šã€ä¸€çº§å’ŒäºŒçº§ä¾›åº”å•†åŠ å…¥åŒä¸€ä¸ªchannel">æ ¸å¿ƒä¼ä¸šã€ä¸€çº§å’ŒäºŒçº§ä¾›åº”å•†åŠ å…¥åŒä¸€ä¸ªchannel</h2><p>æŸ¥çœ‹<a href="https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E5%88%9B%E5%BB%BAchannel/">åˆ›å»ºchannel</a></p><h2 id="éƒ¨ç½²supply-v7åˆ°alljoinchannelé€šé“">éƒ¨ç½²supply-v7åˆ°alljoinchannelé€šé“</h2><h3 id="æ‰“åŒ…-v6">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> peer lifecycle chaincode package supply.7.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_7.0</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v6">å®‰è£…é“¾ç åŒ…</h3><p>æ¯ä¸ªpeeréƒ½è¦å®‰è£…ï¼š<code>peer lifecycle chaincode install supply.7.tar.gz</code></p><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v11">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v6">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_7.0:770f0c8f4fe3a348314f546594d402ccb3eb5f5779f12e7edee48f6ce474227b</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v12">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ¯ä¸ªpeeréƒ½è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name supply --version 7.0 --package-id $CC_PACKAGE_ID --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v6">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID alljoinchannel --name supply --version 7.0 --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>åœ¨æ‰€æœ‰ç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name supply --version 7.0 --sequence 1 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID alljoinchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç -v6">è°ƒç”¨é“¾ç </h3><p>è°ƒç”¨é“¾ç ä¹‹å‰å…ˆç”Ÿæˆæµ‹è¯•çš„åˆåŒhashå€¼å’Œå‘ç¥¨hashå€¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9  CORE_AND_F1_INVOICE.txt</span><br><span class="line">93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14  CORE_AND_F1_CONTRACT.txt</span><br><span class="line">76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a  f1_and_s1_contract.txt</span><br><span class="line">792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49  f1_and_s1_invoice.txt</span><br><span class="line">f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb  f1_and_s2_contract.txt</span><br><span class="line">f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468  f1_and_s2_invoice.txt</span><br></pre></td></tr></table></figure><h4 id="å‘è¡Œå‡­è¯-v2">å‘è¡Œå‡­è¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;IssueVoucher&quot;,&quot;Args&quot;:[&quot;asset003&quot;, &quot;1000&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;, &quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;, &quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢èµ„äº§">æŸ¥è¯¢èµ„äº§</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C alljoinchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset003&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T10:07:43.665003Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T10:07:43.665003Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†1äº¤æ˜“">ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†1äº¤æ˜“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAssetByID&quot;,&quot;Args&quot;:[&quot;asset003&quot;, &quot;äºŒçº§ä¾›åº”å•†1&quot;, &quot;500&quot;, &quot;76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a&quot;, &quot;792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢èµ„äº§-v2">æŸ¥è¯¢èµ„äº§</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C alljoinchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset003&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T10:07:43.665003Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T10:07:43.665003Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0031&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T10:12:37.227293Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T10:12:37.227293Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†2äº¤æ˜“">ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†2äº¤æ˜“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAssetByID&quot;,&quot;Args&quot;:[&quot;asset003&quot;, &quot;äºŒçº§ä¾›åº”å•†2&quot;, &quot;300&quot;, &quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;, &quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯ä¿¡æ¯è®°å½•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: endorsement failure during invoke. response: status:500 message:&quot;the asset asset0031 already exists&quot;</span><br></pre></td></tr></table></figure><p>åŸå› å¦‚ä¸‹ï¼šå¦‚æœåŒä¸€ä¸ªèµ„äº§IDäº¤æ˜“ä¸¤æ¬¡ï¼Œåˆ™ä¼šå‡ºç°èµ„äº§IDé‡å¤çš„é—®é¢˜ï¼›ä»£ç bugã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := s.CreateAssetAndSave(ctx, asset.ID+<span class="string">&quot;1&quot;</span>, amount, asset.Issuer, newOwner, contractHash, invoiceHash)</span><br></pre></td></tr></table></figure><h4 id="ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†2äº¤æ˜“-v2">ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†2äº¤æ˜“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAssetByID&quot;,&quot;Args&quot;:[&quot;asset0031&quot;, &quot;äºŒçº§ä¾›åº”å•†2&quot;, &quot;300&quot;, &quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;, &quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢èµ„äº§ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset003&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T10:07:43.665003Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T10:07:43.665003Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0031&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T10:12:37.227293Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T10:12:37.227293Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset00311&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">300</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-29T10:17:26.148125Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-29T10:17:26.148125Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²supply-v8åˆ°alljoinchannelé€šé“">éƒ¨ç½²supply-v8åˆ°alljoinchannelé€šé“</h2><h3 id="æºç ">æºç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chaincode</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/golang/protobuf/ptypes&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/hyperledger/fabric-contract-api-go/contractapi&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// SmartContract provides functions for managing an Asset</span></span><br><span class="line"><span class="keyword">type</span> SmartContract <span class="keyword">struct</span> &#123;</span><br><span class="line">contractapi.Contract</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Asset describes basic details of what makes up a simple asset</span></span><br><span class="line"><span class="keyword">type</span> Asset <span class="keyword">struct</span> &#123;</span><br><span class="line">ID           <span class="keyword">string</span>    <span class="string">`json:&quot;ID&quot;`</span></span><br><span class="line">Issuer       <span class="keyword">string</span>    <span class="string">`json:&quot;issuer&quot;`</span></span><br><span class="line">Owner        <span class="keyword">string</span>    <span class="string">`json:&quot;owner&quot;`</span></span><br><span class="line">Amount       <span class="keyword">int64</span>     <span class="string">`json:&quot;amount&quot;`</span></span><br><span class="line">CreateDate   time.Time <span class="string">`json:&quot;createDate&quot;`</span></span><br><span class="line">EndDate      time.Time <span class="string">`json:&quot;endDate&quot;`</span></span><br><span class="line">ContractHash <span class="keyword">string</span>    <span class="string">`json:&quot;contractHash&quot;`</span></span><br><span class="line">InvoiceHash  <span class="keyword">string</span>    <span class="string">`json:&quot;invoiceHash&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IssueVoucher å‘è¡Œå‡­è¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">IssueVoucher</span><span class="params">(ctx contractapi.TransactionContextInterface, assetID <span class="keyword">string</span>, amount <span class="keyword">int64</span>, owner <span class="keyword">string</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºèµ„äº§</span></span><br><span class="line"><span class="keyword">return</span> s.CreateAssetAndSave(ctx, assetID, amount, <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>, owner, contractHash, invoiceHash)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CreateAssetAndSave åˆ›å»ºèµ„äº§å¹¶ä¿å­˜</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">CreateAssetAndSave</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, amount <span class="keyword">int64</span>, issuerName <span class="keyword">string</span>, owner <span class="keyword">string</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">asset, err := s.createAsset(ctx, id, amount, issuerName, owner, contractHash, invoiceHash)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> s.PutState(ctx, asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// createAsset issues a new asset to the world state with given details.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">createAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, amount <span class="keyword">int64</span>, issuerName <span class="keyword">string</span>, owner <span class="keyword">string</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="params">(*Asset, error)</span></span> &#123;</span><br><span class="line">exists, err := s.AssetExists(ctx, id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> exists &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;the asset %s already exists&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line">now, err := getNow(ctx)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">asset := Asset&#123;ID: id, Issuer: issuerName, Amount: amount, Owner: owner, CreateDate: now,</span><br><span class="line">EndDate: now.AddDate(<span class="number">0</span>, <span class="number">6</span>, <span class="number">0</span>), ContractHash: contractHash, InvoiceHash: invoiceHash&#125;</span><br><span class="line"><span class="keyword">return</span> &amp;asset, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getNow</span><span class="params">(ctx contractapi.TransactionContextInterface)</span> <span class="params">(time.Time, error)</span></span> &#123;</span><br><span class="line">now, err := ctx.GetStub().GetTxTimestamp()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> time.Now(), err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ptypes.Timestamp(now)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadAsset returns the asset stored in the world state with given id.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">ReadAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>)</span> <span class="params">(*Asset, error)</span></span> &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;failed to read from world state: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> assetJSON == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;the asset %s does not exist&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> asset Asset</span><br><span class="line">err = json.Unmarshal(assetJSON, &amp;asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &amp;asset, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AssetExists returns true when asset with given ID exists in world state</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">AssetExists</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">bool</span>, error)</span></span> &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>, fmt.Errorf(<span class="string">&quot;failed to read from world state: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> assetJSON != <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TransferAssetByID æ ¹æ®èµ„äº§IDè½¬è´¦</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">TransferAssetByID</span><span class="params">(ctx contractapi.TransactionContextInterface, id <span class="keyword">string</span>, newID <span class="keyword">string</span>, newOwner <span class="keyword">string</span>, amount <span class="keyword">int64</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">asset, err := s.ReadAsset(ctx, id)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> s.TransferAsset(ctx, asset, newID, newOwner, amount, contractHash, invoiceHash)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TransferAsset updates the owner field of asset with given id in world state.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">TransferAsset</span><span class="params">(ctx contractapi.TransactionContextInterface, asset *Asset, newID <span class="keyword">string</span>, newOwner <span class="keyword">string</span>, amount <span class="keyword">int64</span>, contractHash <span class="keyword">string</span>, invoiceHash <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="comment">// å¦‚æœé‡‘é¢åˆšå¥½ç­‰äºå‡­è¯èµ„äº§çš„é‡‘é¢ï¼Œç›´æ¥æ›´æ–°å‡­è¯èµ„äº§çš„æ‹¥æœ‰è€…</span></span><br><span class="line"><span class="keyword">if</span> asset.Amount == amount &#123;</span><br><span class="line">asset.Owner = newOwner</span><br><span class="line"><span class="keyword">return</span> s.PutState(ctx, asset)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> asset.Amount &gt; amount &#123; <span class="comment">// å¦‚æœå‡­è¯èµ„äº§çš„é‡‘é¢å¤§äºè½¬è´¦çš„é‡‘é¢ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„äº§</span></span><br><span class="line"><span class="keyword">if</span> newID == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;è½¬è´¦é‡‘é¢å°äºèµ„äº§çš„é‡‘é¢æ—¶ï¼ŒnewIDå¿…é¡»ä¸èƒ½ä¸ºç©º&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ›å»ºæ–°çš„èµ„äº§å¹¶ä¿å­˜</span></span><br><span class="line">err := s.CreateAssetAndSave(ctx, newID, amount, asset.Issuer, newOwner, contractHash, invoiceHash)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ›´æ–°æ—§èµ„äº§çš„é‡‘é¢</span></span><br><span class="line">asset.Amount = asset.Amount - amount</span><br><span class="line"><span class="keyword">return</span> s.PutState(ctx, asset)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> asset.Amount &lt; amount &#123; <span class="comment">// å¦‚æœèµ„äº§çš„é¢åº¦å°äºè¦è½¬è´¦çš„é‡‘é¢ï¼Œåˆ™ç›´æ¥æŠ¥é”™</span></span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;è½¬è´¦é‡‘é¢=%d,ä¸èƒ½è¶…è¿‡èµ„äº§çš„é‡‘é¢=%d&quot;</span>, amount, asset.Amount)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PutState æ›´æ–°èµ„äº§</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">PutState</span><span class="params">(ctx contractapi.TransactionContextInterface, asset *Asset)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">assetJSON, err := json.Marshal(asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ctx.GetStub().PutState(asset.ID, assetJSON)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetAllAssets returns all assets found in world state</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">GetAllAssets</span><span class="params">(ctx contractapi.TransactionContextInterface)</span> <span class="params">([]*Asset, error)</span></span> &#123;</span><br><span class="line"><span class="comment">// range query with empty string for startKey and endKey does an</span></span><br><span class="line"><span class="comment">// open-ended query of all assets in the chaincode namespace.</span></span><br><span class="line">resultsIterator, err := ctx.GetStub().GetStateByRange(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resultsIterator.Close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> assets []*Asset</span><br><span class="line"><span class="keyword">for</span> resultsIterator.HasNext() &#123;</span><br><span class="line">queryResponse, err := resultsIterator.Next()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> asset Asset</span><br><span class="line">err = json.Unmarshal(queryResponse.Value, &amp;asset)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">assets = <span class="built_in">append</span>(assets, &amp;asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> assets, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…-v7">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.8.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_8.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v7">å®‰è£…é“¾ç åŒ…</h3><p>æ¯ä¸ªpeeréƒ½è¦å®‰è£…ï¼š<code>peer lifecycle chaincode install supply.8.tar.gz</code></p><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v13">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v7">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_8.0:797ec1d00145482b746640d0b8bb9bea64cb69dea3e95abb69a1195a19e34511</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v14">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ¯ä¸ªpeeréƒ½è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name supply --version 8.0 --package-id $CC_PACKAGE_ID --sequence 2 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v7">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID alljoinchannel --name supply --version 8.0 --sequence 2 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>åœ¨æ‰€æœ‰ç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name supply --version 8.0 --sequence 2 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID alljoinchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç -v7">è°ƒç”¨é“¾ç </h3><p>è°ƒç”¨é“¾ç ä¹‹å‰å…ˆç”Ÿæˆæµ‹è¯•çš„åˆåŒhashå€¼å’Œå‘ç¥¨hashå€¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9  CORE_AND_F1_INVOICE.txt</span><br><span class="line">93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14  CORE_AND_F1_CONTRACT.txt</span><br><span class="line">76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a  f1_and_s1_contract.txt</span><br><span class="line">792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49  f1_and_s1_invoice.txt</span><br><span class="line">f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb  f1_and_s2_contract.txt</span><br><span class="line">f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468  f1_and_s2_invoice.txt</span><br></pre></td></tr></table></figure><h4 id="å‘è¡Œå‡­è¯-v3">å‘è¡Œå‡­è¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;IssueVoucher&quot;,&quot;Args&quot;:[&quot;asset001&quot;, &quot;1000&quot;, &quot;ä¸€çº§ä¾›åº”å•†&quot;, &quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;, &quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢èµ„äº§-v3">æŸ¥è¯¢èµ„äº§</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C alljoinchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†1äº¤æ˜“-v2">ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†1äº¤æ˜“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAssetByID&quot;,&quot;Args&quot;:[&quot;asset001&quot;, &quot;asset0011&quot;, &quot;äºŒçº§ä¾›åº”å•†1&quot;, &quot;500&quot;, &quot;76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a&quot;, &quot;792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢èµ„äº§-v4">æŸ¥è¯¢èµ„äº§</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C alljoinchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0011&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:57:50.047189Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:57:50.047189Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†2äº¤æ˜“-v3">ä¸€çº§ä¾›åº”å•†ä¸äºŒçº§ä¾›åº”å•†2äº¤æ˜“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAssetByID&quot;,&quot;Args&quot;:[&quot;asset001&quot;, &quot;asset0012&quot;, &quot;äºŒçº§ä¾›åº”å•†2&quot;, &quot;300&quot;, &quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;, &quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢èµ„äº§ï¼Œç»“æœå¦‚ä¸‹<code>peer chaincode query -C alljoinchannel -n supply -c '&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;'</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;ä¸€çº§ä¾›åº”å•†&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0011&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:57:50.047189Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:57:50.047189Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0012&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">300</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:58:33.143818Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:58:33.143818Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="è½¬è´¦é‡‘é¢å¤§äºå‡­è¯èµ„äº§çš„é‡‘é¢-æœŸå¾…é”™è¯¯">è½¬è´¦é‡‘é¢å¤§äºå‡­è¯èµ„äº§çš„é‡‘é¢(æœŸå¾…é”™è¯¯)</h3><p>å‡ºç°é”™è¯¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) w:supply-finance apple$ peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;TransferAssetByID&quot;,&quot;Args&quot;:[&quot;asset001&quot;, &quot;asset0013&quot;, &quot;äºŒçº§ä¾›åº”å•†2&quot;, &quot;300&quot;, &quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;, &quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;]&#125;&#x27;</span><br><span class="line">Error: endorsement failure during invoke. response: status:500 message:&quot;\350\275\254\350\264\246\351\207\221\351\242\235=300,\344\270\215\350\203\275\350\266\205\350\277\207\350\265\204\344\272\247\347\232\204\351\207\221\351\242\235=200&quot;</span><br></pre></td></tr></table></figure><p>é”™è¯¯ä¿¡æ¯è§£ç å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/guozhe001/images/raw/master/image-20201230151742496-20201230173424532.png" alt></p><h3 id="è½¬è´¦é‡‘é¢ç­‰äºå‡­è¯èµ„äº§çš„é‡‘é¢ï¼ˆå˜æ›´ownerï¼Œä¸äº§ç”Ÿæ–°çš„å‡­è¯èµ„äº§ï¼‰">è½¬è´¦é‡‘é¢ç­‰äºå‡­è¯èµ„äº§çš„é‡‘é¢ï¼ˆå˜æ›´ownerï¼Œä¸äº§ç”Ÿæ–°çš„å‡­è¯èµ„äº§ï¼‰</h3><p>ä¸€çº§ä¾›åº”å•†æŠŠå‰©ä½™çš„200è½¬ç»™äºŒçº§ä¾›åº”å•†2:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;&#x2F;organizations&#x2F;ordererOrganizations&#x2F;supply.com&#x2F;orderers&#x2F;orderer.supply.com&#x2F;msp&#x2F;tlscacerts&#x2F;tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;&#x2F;organizations&#x2F;peerOrganizations&#x2F;f1.supply.com&#x2F;peers&#x2F;peer0.f1.supply.com&#x2F;tls&#x2F;ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;&#x2F;organizations&#x2F;peerOrganizations&#x2F;s1.supply.com&#x2F;peers&#x2F;peer0.s1.supply.com&#x2F;tls&#x2F;ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;&#x2F;organizations&#x2F;peerOrganizations&#x2F;s2.supply.com&#x2F;peers&#x2F;peer0.s2.supply.com&#x2F;tls&#x2F;ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;&#x2F;organizations&#x2F;peerOrganizations&#x2F;core.supply.com&#x2F;peers&#x2F;peer0.core.supply.com&#x2F;tls&#x2F;ca.crt -c &#39;&#123;&quot;function&quot;:&quot;TransferAssetByID&quot;,&quot;Args&quot;:[&quot;asset001&quot;, &quot;asset0013&quot;, &quot;äºŒçº§ä¾›åº”å•†2&quot;, &quot;200&quot;, &quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;, &quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;]&#125;&#39;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢èµ„äº§ï¼Œç»“æœå¦‚ä¸‹<code>peer chaincode query -C alljoinchannel -n supply -c '&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;'</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:57:06.963617Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0011&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:57:50.047189Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:57:50.047189Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;ID&quot;</span>: <span class="string">&quot;asset0012&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;issuer&quot;</span>: <span class="string">&quot;æ ¸å¿ƒä¼ä¸š&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;äºŒçº§ä¾›åº”å•†2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;amount&quot;</span>: <span class="number">300</span>,</span><br><span class="line">    <span class="attr">&quot;createDate&quot;</span>: <span class="string">&quot;2020-12-30T06:58:33.143818Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;endDate&quot;</span>: <span class="string">&quot;2021-06-30T06:58:33.143818Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;contractHash&quot;</span>: <span class="string">&quot;f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;invoiceHash&quot;</span>: <span class="string">&quot;f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰äº§ç”Ÿæ–°çš„èµ„äº§ï¼Œè€Œæ˜¯æŠŠåŸæ¥çš„èµ„äº§çš„æ‹¥æœ‰è€…å˜æ›´äº†ã€‚</p><p><em>æ³¨æ„ï¼šè¿™æ ·æœ‰ä¸ªé—®é¢˜ï¼ŒåˆåŒhashå’Œå‘ç¥¨hashä¸åº”è¯¥è¿˜æ˜¯åŸæ¥çš„ã€‚</em></p><h2 id="éƒ¨ç½²supply-v9åˆ°alljoinchannelé€šé“">éƒ¨ç½²supply-v9åˆ°alljoinchannelé€šé“</h2><h3 id="æºç -v2">æºç </h3><p>ä¸v8ç‰ˆæœ¬ç›¸æ¯”ï¼Œå¢åŠ åˆ é™¤èµ„äº§çš„æ–¹æ³•</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelState åˆ é™¤èµ„äº§</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">DelState</span><span class="params">(ctx contractapi.TransactionContextInterface, assetIds ...<span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> _, assetID := <span class="keyword">range</span> assetIds &#123;</span><br><span class="line">exists, err := s.AssetExists(ctx, assetID)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> !exists &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;assetID=%sçš„èµ„äº§ä¸å­˜åœ¨&quot;</span>, assetID)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ctx.GetStub().DelState(assetID)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…-v8">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.18.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance-chaincode/ --lang golang --label secured_supply_22.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v8">å®‰è£…é“¾ç åŒ…</h3><p>æ¯ä¸ªpeeréƒ½è¦å®‰è£…ï¼š<code>peer lifecycle chaincode install supply.18.tar.gz</code></p><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v15">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v8">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=secured_supply_22.0:e815ca2d270dea029bc6992952140b1288a440aba8c430853f72eee7d5de24a7</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v16">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ¯ä¸ªpeeréƒ½è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name secured_supply --version 22.0 --package-id $CC_PACKAGE_ID --sequence 22 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v8">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID alljoinchannel --name secured_supply --version 22.0 --sequence 22 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>åœ¨æ‰€æœ‰ç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name secured_supply --version 22.0 --sequence 22 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID alljoinchannel --name secured_supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç -v8">è°ƒç”¨é“¾ç </h3><p>è°ƒç”¨é“¾ç ä¹‹å‰å…ˆç”Ÿæˆæµ‹è¯•çš„åˆåŒhashå€¼å’Œå‘ç¥¨hashå€¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9  CORE_AND_F1_INVOICE.txt</span><br><span class="line">93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14  CORE_AND_F1_CONTRACT.txt</span><br><span class="line">76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a  f1_and_s1_contract.txt</span><br><span class="line">792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49  f1_and_s1_invoice.txt</span><br><span class="line">f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb  f1_and_s2_contract.txt</span><br><span class="line">f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468  f1_and_s2_invoice.txt</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤èµ„äº§">åˆ é™¤èµ„äº§</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;DelState&quot;,&quot;Args&quot;:[&quot;asset001 asset0011 asset0012 asset003 asset0031 asset00311&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯ä¿¡æ¯è®°å½•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) w:supply-finance apple$ peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;DelState&quot;,&quot;Args&quot;:[&quot;asset001 asset0011 asset0012 asset003 asset0031 asset00311&quot;]&#125;&#x27;</span><br><span class="line">Error: endorsement failure during invoke. response: status:500 message:&quot;Error managing parameter param0. Conversion error. Value asset001 asset0011 asset0012 asset003 asset0031 asset00311 was not passed in expected format []string&quot;</span><br></pre></td></tr></table></figure><p>**é”™è¯¯åŸå› ï¼š**å› ä¸ºæ–¹æ³•ä½¿ç”¨çš„æ˜¯å¯å˜é•¿å‚æ•°ï¼Œä½†æ˜¯ä¸çŸ¥é“è¯¥æ€ä¹ˆç»™ä»–ä¼ å‚æ•°</p><h2 id="éƒ¨ç½²supply-v9-1åˆ°alljoinchannelé€šé“">éƒ¨ç½²supply-v9.1åˆ°alljoinchannelé€šé“</h2><h3 id="æºç -v3">æºç </h3><p>ä¸v9ç‰ˆæœ¬ç›¸æ¯”ï¼Œä¿®æ”¹åˆ é™¤èµ„äº§çš„æ–¹æ³•ä¸ºåˆ é™¤å•ä¸ªèµ„äº§</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelState åˆ é™¤èµ„äº§</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SmartContract)</span> <span class="title">DelState</span><span class="params">(ctx contractapi.TransactionContextInterface, assetID <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">exists, err := s.AssetExists(ctx, assetID)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> !exists &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;assetID=%sçš„èµ„äº§ä¸å­˜åœ¨&quot;</span>, assetID)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ctx.GetStub().DelState(assetID)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…-v9">æ‰“åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode package supply.9.1.tar.gz --path /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/chaincode-go/ --lang golang --label supply_9.1</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é“¾ç åŒ…-v9">å®‰è£…é“¾ç åŒ…</h3><p>æ¯ä¸ªpeeréƒ½è¦å®‰è£…ï¼š<code>peer lifecycle chaincode install supply.9.1.tar.gz</code></p><h3 id="æ‰¹å‡†é“¾ç å®šä¹‰-v17">æ‰¹å‡†é“¾ç å®šä¹‰</h3><h4 id="æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode-v9">æŸ¥çœ‹å·²ç»å®‰è£…çš„chaincode</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode queryinstalled</span><br></pre></td></tr></table></figure><p>å°†é“¾ç çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªç»„ç»‡éƒ½éœ€è¦å®šä¹‰æ­¤å˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CC_PACKAGE_ID=supply_9.1:f733e8484c17cb415e38ac1fb14ed646622f2980762906c97d6e7e1c1a90f2c3</span><br></pre></td></tr></table></figure><h4 id="æ‰¹å‡†é“¾ç å®šä¹‰-v18">æ‰¹å‡†é“¾ç å®šä¹‰</h4><p>æ¯ä¸ªpeeréƒ½è¦æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name supply --version 9.1 --package-id $CC_PACKAGE_ID --sequence 4 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“-v9">å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“</h3><p>æ£€æŸ¥channelä¸Šçš„æˆå‘˜æ˜¯å¦å·²ç»æ‰¹å‡†äº†é“¾ç å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode checkcommitreadiness --channelID alljoinchannel --name supply --version 9.1 --sequence 4 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --output json</span><br></pre></td></tr></table></figure><p>åœ¨æ‰€æœ‰ç»„ç»‡éƒ½æ‰¹å‡†ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†é“¾ç å®šä¹‰æäº¤åˆ°é€šé“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o localhost:8050  --ordererTLSHostnameOverride orderer.supply.com --channelID alljoinchannel --name supply --version 9.1 --sequence 4 --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/commands/peerlifecycle.html#peer-lifecycle-chaincode-querycommitted">peer lifecycle chaincode querycommitted</a> å‘½ä»¤æ¥ç¡®è®¤é“¾ç å®šä¹‰å·²ç»æäº¤åˆ°é€šé“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode querycommitted --channelID alljoinchannel --name supply --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨é“¾ç -v9">è°ƒç”¨é“¾ç </h3><p>è°ƒç”¨é“¾ç ä¹‹å‰å…ˆç”Ÿæˆæµ‹è¯•çš„åˆåŒhashå€¼å’Œå‘ç¥¨hashå€¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">83c02ac2d48c863dab2ccf6870455aadfc2cec073b8db269b517c879d76aa6d9  CORE_AND_F1_INVOICE.txt</span><br><span class="line">93b46869be90a6b1f688357965f89b5a8a5e32bf13710fb4ad00e25cca0f0b14  CORE_AND_F1_CONTRACT.txt</span><br><span class="line">76307cd9d79c76a2a7894677692ce421ff1a31e32717a7de6f07deb5de395e7a  f1_and_s1_contract.txt</span><br><span class="line">792376c209f338959be4cf00c54dbf82662b90516082e23106faec4c43c69e49  f1_and_s1_invoice.txt</span><br><span class="line">f46555b7ddd1f8dd232bdc0dcbc5b1f34bdf1d4bb7c123a79a6ed628175f29bb  f1_and_s2_contract.txt</span><br><span class="line">f807fe6dc767be2e7021d41540114b33b30fa7784f6de5521251f23a3eb66468  f1_and_s2_invoice.txt</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤èµ„äº§-v2">åˆ é™¤èµ„äº§</h4><p>èµ„äº§IDåˆ—è¡¨ï¼šâ€œasset001 asset0011 asset0012 asset003 asset0031 asset00311â€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;DelState&quot;,&quot;Args&quot;:[&quot;asset00311&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤ä¹‹åæŸ¥è¯¢ï¼š">åˆ é™¤ä¹‹åæŸ¥è¯¢ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C alljoinchannel -n supply -c &#x27;&#123;&quot;Args&quot;:[&quot;GetAllAssets&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>è¿”å›çš„èµ„äº§åˆ—è¡¨ä¸ºç©ºï¼Œåˆ é™¤æ–¹æ³•éªŒè¯æˆåŠŸã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;Practice_SmartContract:InitLedger&quot;,&quot;Args&quot;:[]&#125;&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply --peerAddresses localhost:8053 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt --peerAddresses localhost:8055 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt --peerAddresses localhost:8151 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;Practice_SmartContract:SomeStubMethod&quot;,&quot;Args&quot;:[&quot;asset1&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o localhost:8050 --ordererTLSHostnameOverride orderer.supply.com --tls --cafile $&#123;PWD&#125;/organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp/tlscacerts/tlsca.supply.com-cert.pem -C alljoinchannel -n secured_supply --peerAddresses localhost:8051 --tlsRootCertFiles $&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt -c &#x27;&#123;&quot;function&quot;:&quot;Practice_SmartContract:InitLedger&quot;,&quot;Args&quot;:[]&#125;&#x27;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;éƒ¨ç½²æ–°çš„æ™ºèƒ½åˆçº¦åˆ°channel&quot;&gt;éƒ¨ç½²æ–°çš„æ™ºèƒ½åˆçº¦åˆ°channel&lt;/h1&gt;
&lt;h2 id=&quot;éƒ¨ç½²V1ç‰ˆæœ¬&quot;&gt;éƒ¨ç½²V1ç‰ˆæœ¬&lt;/h2&gt;
&lt;h3 id=&quot;æ‰“åŒ…&quot;&gt;æ‰“åŒ…&lt;/h3&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/tags/Hyperledger-Fabric/"/>
    
    <category term="peer" scheme="https://guozhe001.github.io/tags/peer/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/tags/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
    <category term="chaincode" scheme="https://guozhe001.github.io/tags/chaincode/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘æ™ºèƒ½åˆçº¦</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E5%BC%80%E5%8F%91%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E5%BC%80%E5%8F%91%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/</id>
    <published>2021-04-01T10:18:21.497Z</published>
    <updated>2021-04-01T10:18:21.497Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¼€å‘æ™ºèƒ½åˆçº¦">å¼€å‘æ™ºèƒ½åˆçº¦</h1><p>æœ¬æ¬¡çš„æ™ºèƒ½åˆçº¦ä»<a href="https://github.com/hyperledger/fabric-samples.git">fabric-samples</a>çš„<code>asset-transfer-basic/chaincode-go</code>æ‹·è´ç„¶åè¿›è¡Œäº†ä¿®æ”¹ã€‚</p><p>æ™ºèƒ½åˆçº¦ä»£ç <code>smartcontract.go</code>å¦‚ä¸‹ï¼šæœ¬æ–‡æ¡£æ›´æ–°ä¸åŠæ—¶ï¼Œå¯åˆ°<a href="https://github.com/guozhe001/supply-finance.git">æºç åœ°å€</a>æŸ¥çœ‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">package chaincode</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;encoding/json&quot;</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;time&quot;</span><br><span class="line"></span><br><span class="line">&quot;github.com/golang/protobuf/ptypes&quot;</span><br><span class="line">&quot;github.com/hyperledger/fabric-contract-api-go/contractapi&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// SmartContract provides functions for managing an Asset</span><br><span class="line">type SmartContract struct &#123;</span><br><span class="line">contractapi.Contract</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Asset describes basic details of what makes up a simple asset</span><br><span class="line">type Asset struct &#123;</span><br><span class="line">ID           string    `json:&quot;ID&quot;`</span><br><span class="line">Issuer       string    `json:&quot;issuer&quot;`</span><br><span class="line">Owner        string    `json:&quot;owner&quot;`</span><br><span class="line">Amount       int64     `json:&quot;amount&quot;`</span><br><span class="line">CreateDate   time.Time `json:&quot;createDate&quot;`</span><br><span class="line">EndDate      time.Time `json:&quot;endDate&quot;`</span><br><span class="line">ContractHash string    `json:&quot;contractHash&quot;`</span><br><span class="line">InvoiceHash  string    `json:&quot;invoiceHash&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// IssueVoucher å‘è¡Œå‡­è¯</span><br><span class="line">func (s *SmartContract) IssueVoucher(ctx contractapi.TransactionContextInterface, assetID string, amount int64, owner string, contractHash string, invoiceHash string) error &#123;</span><br><span class="line">// åˆ›å»ºèµ„äº§</span><br><span class="line">return s.CreateAssetAndSave(ctx, assetID, amount, &quot;æ ¸å¿ƒä¼ä¸š&quot;, owner, contractHash, invoiceHash)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// CreateAssetAndSave åˆ›å»ºèµ„äº§å¹¶ä¿å­˜</span><br><span class="line">func (s *SmartContract) CreateAssetAndSave(ctx contractapi.TransactionContextInterface, id string, amount int64, issuerName string, owner string, contractHash string, invoiceHash string) error &#123;</span><br><span class="line">asset, err := s.createAsset(ctx, id, amount, issuerName, owner, contractHash, invoiceHash)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">return s.PutState(ctx, asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// createAsset issues a new asset to the world state with given details.</span><br><span class="line">func (s *SmartContract) createAsset(ctx contractapi.TransactionContextInterface, id string, amount int64, issuerName string, owner string, contractHash string, invoiceHash string) (*Asset, error) &#123;</span><br><span class="line">exists, err := s.AssetExists(ctx, id)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil, err</span><br><span class="line">&#125;</span><br><span class="line">if exists &#123;</span><br><span class="line">return nil, fmt.Errorf(&quot;the asset %s already exists&quot;, id)</span><br><span class="line">&#125;</span><br><span class="line">now, err := getNow(ctx)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil, err</span><br><span class="line">&#125;</span><br><span class="line">asset := Asset&#123;ID: id, Issuer: issuerName, Amount: amount, Owner: owner, CreateDate: now,</span><br><span class="line">EndDate: now.AddDate(0, 6, 0), ContractHash: contractHash, InvoiceHash: invoiceHash&#125;</span><br><span class="line">return &amp;asset, nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è·å–å½“å‰æ—¶é—´</span><br><span class="line">func getNow(ctx contractapi.TransactionContextInterface) (time.Time, error) &#123;</span><br><span class="line">now, err := ctx.GetStub().GetTxTimestamp()</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return time.Now(), err</span><br><span class="line">&#125;</span><br><span class="line">return ptypes.Timestamp(now)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ReadAsset returns the asset stored in the world state with given id.</span><br><span class="line">func (s *SmartContract) ReadAsset(ctx contractapi.TransactionContextInterface, id string) (*Asset, error) &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil, fmt.Errorf(&quot;failed to read from world state: %v&quot;, err)</span><br><span class="line">&#125;</span><br><span class="line">if assetJSON == nil &#123;</span><br><span class="line">return nil, fmt.Errorf(&quot;the asset %s does not exist&quot;, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var asset Asset</span><br><span class="line">err = json.Unmarshal(assetJSON, &amp;asset)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return &amp;asset, nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// AssetExists returns true when asset with given ID exists in world state</span><br><span class="line">func (s *SmartContract) AssetExists(ctx contractapi.TransactionContextInterface, id string) (bool, error) &#123;</span><br><span class="line">assetJSON, err := ctx.GetStub().GetState(id)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return false, fmt.Errorf(&quot;failed to read from world state: %v&quot;, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return assetJSON != nil, nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// TransferAssetByID æ ¹æ®èµ„äº§IDè½¬è´¦</span><br><span class="line">func (s *SmartContract) TransferAssetByID(ctx contractapi.TransactionContextInterface, id string, newID string, newOwner string, amount int64, contractHash string, invoiceHash string) error &#123;</span><br><span class="line">asset, err := s.ReadAsset(ctx, id)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">return s.TransferAsset(ctx, asset, newID, newOwner, amount, contractHash, invoiceHash)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// TransferAsset updates the owner field of asset with given id in world state.</span><br><span class="line">func (s *SmartContract) TransferAsset(ctx contractapi.TransactionContextInterface, asset *Asset, newID string, newOwner string, amount int64, contractHash string, invoiceHash string) error &#123;</span><br><span class="line">// å¦‚æœé‡‘é¢åˆšå¥½ç­‰äºå‡­è¯èµ„äº§çš„é‡‘é¢ï¼Œç›´æ¥æ›´æ–°å‡­è¯èµ„äº§çš„æ‹¥æœ‰è€…</span><br><span class="line">if asset.Amount == amount &#123;</span><br><span class="line">asset.Owner = newOwner</span><br><span class="line">return s.PutState(ctx, asset)</span><br><span class="line">&#125; else if asset.Amount &gt; amount &#123; // å¦‚æœå‡­è¯èµ„äº§çš„é‡‘é¢å¤§äºè½¬è´¦çš„é‡‘é¢ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„äº§</span><br><span class="line">if newID == &quot;&quot; &#123;</span><br><span class="line">return fmt.Errorf(&quot;è½¬è´¦é‡‘é¢å°äºèµ„äº§çš„é‡‘é¢æ—¶ï¼ŒnewIDå¿…é¡»ä¸èƒ½ä¸ºç©º&quot;)</span><br><span class="line">&#125;</span><br><span class="line">// åˆ›å»ºæ–°çš„èµ„äº§å¹¶ä¿å­˜</span><br><span class="line">err := s.CreateAssetAndSave(ctx, newID, amount, asset.Issuer, newOwner, contractHash, invoiceHash)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">// æ›´æ–°æ—§èµ„äº§çš„é‡‘é¢</span><br><span class="line">asset.Amount = asset.Amount - amount</span><br><span class="line">return s.PutState(ctx, asset)</span><br><span class="line">&#125; else if asset.Amount &lt; amount &#123; // å¦‚æœèµ„äº§çš„é¢åº¦å°äºè¦è½¬è´¦çš„é‡‘é¢ï¼Œåˆ™ç›´æ¥æŠ¥é”™</span><br><span class="line">return fmt.Errorf(&quot;è½¬è´¦é‡‘é¢=%d,ä¸èƒ½è¶…è¿‡èµ„äº§çš„é‡‘é¢=%d&quot;, amount, asset.Amount)</span><br><span class="line">&#125;</span><br><span class="line">return nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// PutState æ›´æ–°èµ„äº§</span><br><span class="line">func (s *SmartContract) PutState(ctx contractapi.TransactionContextInterface, asset *Asset) error &#123;</span><br><span class="line">assetJSON, err := json.Marshal(asset)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">return ctx.GetStub().PutState(asset.ID, assetJSON)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// DelState åˆ é™¤èµ„äº§</span><br><span class="line">func (s *SmartContract) DelState(ctx contractapi.TransactionContextInterface, assetID string) error &#123;</span><br><span class="line">exists, err := s.AssetExists(ctx, assetID)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil</span><br><span class="line">&#125;</span><br><span class="line">if !exists &#123;</span><br><span class="line">return fmt.Errorf(&quot;assetID=%sçš„èµ„äº§ä¸å­˜åœ¨&quot;, assetID)</span><br><span class="line">&#125;</span><br><span class="line">return ctx.GetStub().DelState(assetID)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// GetAllAssets returns all assets found in world state</span><br><span class="line">func (s *SmartContract) GetAllAssets(ctx contractapi.TransactionContextInterface) ([]*Asset, error) &#123;</span><br><span class="line">// range query with empty string for startKey and endKey does an</span><br><span class="line">// open-ended query of all assets in the chaincode namespace.</span><br><span class="line">resultsIterator, err := ctx.GetStub().GetStateByRange(&quot;&quot;, &quot;&quot;)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil, err</span><br><span class="line">&#125;</span><br><span class="line">defer resultsIterator.Close()</span><br><span class="line"></span><br><span class="line">var assets []*Asset</span><br><span class="line">for resultsIterator.HasNext() &#123;</span><br><span class="line">queryResponse, err := resultsIterator.Next()</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var asset Asset</span><br><span class="line">err = json.Unmarshal(queryResponse.Value, &amp;asset)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return nil, err</span><br><span class="line">&#125;</span><br><span class="line">assets = append(assets, &amp;asset)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return assets, nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¼€å‘æ™ºèƒ½åˆçº¦&quot;&gt;å¼€å‘æ™ºèƒ½åˆçº¦&lt;/h1&gt;
&lt;p&gt;æœ¬æ¬¡çš„æ™ºèƒ½åˆçº¦ä»&lt;a href=&quot;https://github.com/hyperledger/fabric-samples.git&quot;&gt;fabric-samples&lt;/a&gt;çš„&lt;code&gt;asset-transfer-b</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/tags/Hyperledger-Fabric/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/tags/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
  </entry>
  
  <entry>
    <title>ç¯å¢ƒå˜é‡è®¾ç½®</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</id>
    <published>2021-04-01T10:18:21.497Z</published>
    <updated>2021-04-01T10:18:21.498Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹æ‰€æœ‰çš„å‘½ä»¤å‡åœ¨<code>supply-finance</code>ç›®å½•ä¸‹æ‰§è¡Œ</p><h3 id="ç¯å¢ƒå˜é‡è®¾ç½®ï¼š">ç¯å¢ƒå˜é‡è®¾ç½®ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$&#123;PWD&#125;/bin:$PATH</span><br><span class="line">export FABRIC_CFG_PATH=$&#123;PWD&#125;/config</span><br><span class="line">configtxgen --help</span><br></pre></td></tr></table></figure><h3 id="æ ¸å¿ƒä¼ä¸šGylCoreOrg1MSP-Adminï¼š">æ ¸å¿ƒä¼ä¸šGylCoreOrg1MSP,Adminï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export CORE_PEER_TLS_ENABLED=true</span><br><span class="line">export CORE_PEER_LOCALMSPID=&quot;GylCoreOrg1MSP&quot;</span><br><span class="line">export CORE_PEER_TLS_ROOTCERT_FILE=$&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls/ca.crt</span><br><span class="line">export CORE_PEER_MSPCONFIGPATH=$&#123;PWD&#125;/organizations/peerOrganizations/core.supply.com/users/Admin@core.supply.com/msp</span><br><span class="line">export CORE_PEER_ADDRESS=localhost:8051</span><br></pre></td></tr></table></figure><h3 id="ä¸€çº§ä¾›åº”å•†GylFOrg1MSP-Adminï¼š">ä¸€çº§ä¾›åº”å•†GylFOrg1MSP,Adminï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export CORE_PEER_TLS_ENABLED=true</span><br><span class="line">export CORE_PEER_LOCALMSPID=&quot;GylFOrg1MSP&quot;</span><br><span class="line">export CORE_PEER_TLS_ROOTCERT_FILE=$&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls/ca.crt</span><br><span class="line">export CORE_PEER_MSPCONFIGPATH=$&#123;PWD&#125;/organizations/peerOrganizations/f1.supply.com/users/Admin@f1.supply.com/msp</span><br><span class="line">export CORE_PEER_ADDRESS=localhost:8053</span><br></pre></td></tr></table></figure><h3 id="äºŒçº§ä¾›åº”å•†1GylSOrg1MSP-Adminï¼š">äºŒçº§ä¾›åº”å•†1GylSOrg1MSP,Adminï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export CORE_PEER_TLS_ENABLED=true</span><br><span class="line">export CORE_PEER_LOCALMSPID=&quot;GylSOrg1MSP&quot;</span><br><span class="line">export CORE_PEER_TLS_ROOTCERT_FILE=$&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls/ca.crt</span><br><span class="line">export CORE_PEER_MSPCONFIGPATH=$&#123;PWD&#125;/organizations/peerOrganizations/s1.supply.com/users/Admin@s1.supply.com/msp</span><br><span class="line">export CORE_PEER_ADDRESS=localhost:8055</span><br></pre></td></tr></table></figure><h3 id="äºŒçº§ä¾›åº”å•†2GylSOrg2MSP-Adminï¼š">äºŒçº§ä¾›åº”å•†2GylSOrg2MSP,Adminï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export CORE_PEER_TLS_ENABLED=true</span><br><span class="line">export CORE_PEER_LOCALMSPID=&quot;GylSOrg2MSP&quot;</span><br><span class="line">export CORE_PEER_TLS_ROOTCERT_FILE=$&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls/ca.crt</span><br><span class="line">export CORE_PEER_MSPCONFIGPATH=$&#123;PWD&#125;/organizations/peerOrganizations/s2.supply.com/users/Admin@s2.supply.com/msp</span><br><span class="line">export CORE_PEER_ADDRESS=localhost:8151</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»¥ä¸‹æ‰€æœ‰çš„å‘½ä»¤å‡åœ¨&lt;code&gt;supply-finance&lt;/code&gt;ç›®å½•ä¸‹æ‰§è¡Œ&lt;/p&gt;
&lt;h3 id=&quot;ç¯å¢ƒå˜é‡è®¾ç½®ï¼š&quot;&gt;ç¯å¢ƒå˜é‡è®¾ç½®ï¼š&lt;/h3&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/tags/Hyperledger-Fabric/"/>
    
    <category term="peer" scheme="https://guozhe001.github.io/tags/peer/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/tags/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
  </entry>
  
  <entry>
    <title>åˆ›å»ºç½‘ç»œ</title>
    <link href="https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E5%88%9B%E5%BB%BA%E7%BD%91%E7%BB%9C/"/>
    <id>https://guozhe001.github.io/2021/04/01/blockchain/fabric/%E9%80%9A%E8%BF%87%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D%E7%BB%83%E4%B9%A0Fabric/%E5%88%9B%E5%BB%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2021-04-01T10:18:21.496Z</published>
    <updated>2021-04-01T10:18:21.497Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ›å»ºç½‘ç»œ">åˆ›å»ºç½‘ç»œ</h1><p>ä¸€ä¸ªç”Ÿäº§çš„fabricç½‘ç»œåº”è¯¥ç”±å„ä¸ªç»„ç»‡è‡ªå·±ä¿å­˜è‡ªå·±çš„åŠ å¯†ææ–™ï¼Œæµ‹è¯•ç¯å¢ƒä¸ºäº†æ¼”ç¤ºåœ¨æœ¬åœ°ç”Ÿæˆæ‰€æœ‰ç»„ç»‡çš„åŠ å¯†ææ–™ã€‚</p><h2 id="ç”ŸæˆåŠ å¯†ææ–™">ç”ŸæˆåŠ å¯†ææ–™</h2><h3 id="åˆ›å»ºé…ç½®æ–‡ä»¶">åˆ›å»ºé…ç½®æ–‡ä»¶</h3><p>åˆ›å»º<code>supply-finance</code>æ–‡ä»¶å¤¹ï¼Œé…ç½®<code>config/crypto-config.yaml</code>æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">OrdererOrgs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">Orderer</span></span><br><span class="line">    <span class="attr">Domain:</span> <span class="string">supply.com</span></span><br><span class="line">    <span class="attr">Specs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">Hostname:</span> <span class="string">orderer</span></span><br><span class="line"><span class="attr">PeerOrgs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">gyl_core_org1</span></span><br><span class="line">    <span class="attr">Domain:</span> <span class="string">core.supply.com</span></span><br><span class="line">    <span class="attr">Template:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">Users:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">gyl_f_org1</span></span><br><span class="line">    <span class="attr">Domain:</span> <span class="string">f1.supply.com</span></span><br><span class="line">    <span class="attr">Template:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">Users:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">gyl_s_org1</span></span><br><span class="line">    <span class="attr">Domain:</span> <span class="string">s1.supply.com</span></span><br><span class="line">    <span class="attr">Template:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">Users:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">gyl_s_org2</span></span><br><span class="line">    <span class="attr">Domain:</span> <span class="string">s2.supply.com</span></span><br><span class="line">    <span class="attr">Template:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">Users:</span></span><br><span class="line">      <span class="attr">Count:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨é…ç½®æ–‡ä»¶ç”ŸæˆåŠ å¯†ææ–™">ä½¿ç”¨é…ç½®æ–‡ä»¶ç”ŸæˆåŠ å¯†ææ–™</h3><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç”ŸæˆåŠ å¯†ææ–™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cryptogen generate --config=config/crypto-config.yaml --output=&quot;./organizations&quot;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨åŠ å¯†ææ–™ç”Ÿæˆåˆ›ä¸–çºªåŒºå—">ä½¿ç”¨åŠ å¯†ææ–™ç”Ÿæˆåˆ›ä¸–çºªåŒºå—</h4><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆç³»ç»Ÿåˆ›ä¸–çºªåŒºå—ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configtxgen -profile TestOrgsOrdererGenesis -channelID system-channel -outputBlock ./system-genesis-block/genesis.block</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">esis.block</span><br><span class="line">2020-12-24 15:41:52.702 CST [common.tools.configtxgen] main -&gt; INFO 001 Loading configuration</span><br><span class="line">2020-12-24 15:41:52.716 CST [common.tools.configtxgen.localconfig] completeInitialization -&gt; INFO 002 orderer type: etcdraft</span><br><span class="line">2020-12-24 15:41:52.716 CST [common.tools.configtxgen.localconfig] completeInitialization -&gt; INFO 003 Orderer.EtcdRaft.Options unset, setting to tick_interval:&quot;500ms&quot; election_tick:10 heartbeat_tick:1 max_inflight_blocks:5 snapshot_interval_size:16777216</span><br><span class="line">2020-12-24 15:41:52.716 CST [common.tools.configtxgen.localconfig] Load -&gt; INFO 004 Loaded configuration: /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/config/configtx.yaml</span><br><span class="line">2020-12-24 15:41:52.723 CST [common.tools.configtxgen] doOutputBlock -&gt; INFO 005 Generating genesis block</span><br><span class="line">2020-12-24 15:41:52.723 CST [common.tools.configtxgen] doOutputBlock -&gt; INFO 006 Creating system channel genesis block</span><br><span class="line">2020-12-24 15:41:52.724 CST [common.tools.configtxgen] doOutputBlock -&gt; INFO 007 Writing genesis block</span><br></pre></td></tr></table></figure><p><strong>é‡åˆ°çš„é”™è¯¯ä¿¡æ¯ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020-12-24 15:39:28.696 CST [common.tools.configtxgen] main -&gt; FATA 005 Error on outputBlock: could not create bootstrapper: could not create channel group: could not create orderer group: cannot marshal metadata for orderer type etcdraft: cannot load client cert for consenter orderer.supply.com:8050: open /Users/apple/code/open-source/blockchain/hyperledger/supply-finance/cryptogen/crypto-config/ordererOrganizations/supply.com/orderers/orderer.supply.com/tls/server.crt: no such file or directory</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯åŸå› ï¼š</strong><code>$FABRIC_CFG_PATH/configtx.yaml</code>é…ç½®çš„åŠ å¯†æ–‡ä»¶åœ°å€ä¸æ­£ç¡®</p><h2 id="å¯åŠ¨ç½‘ç»œ">å¯åŠ¨ç½‘ç»œ</h2><p>å„ä¸ªç»„ç»‡çš„åŠ å¯†ææ–™ç”Ÿæˆä¹‹åï¼Œåœ¨æœ¬åœ°dockerç¯å¢ƒå¯åŠ¨è¿™äº›ç»„ç»‡çš„peerèŠ‚ç‚¹ã€‚</p><h3 id="é…ç½®docker-compose-ymlæ–‡ä»¶">é…ç½®docker-compose.ymlæ–‡ä»¶</h3><p>åœ¨<code>supply-finance</code>ç›®å½•ä¸‹æ·»åŠ <code>docker/docker-compose.yml</code>æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Copyright IBM Corp. All Rights Reserved.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># SPDX-License-Identifier: Apache-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">orderer.supply.com:</span></span><br><span class="line">  <span class="attr">peer0.core.supply.com:</span></span><br><span class="line">  <span class="attr">peer0.f1.supply.com:</span></span><br><span class="line">  <span class="attr">peer0.s1.supply.com:</span></span><br><span class="line">  <span class="attr">peer0.s2.supply.com:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">test:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">orderer.supply.com:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">orderer.supply.com</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">hyperledger/fabric-orderer:2.2.0</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">FABRIC_LOGGING_SPEC=INFO</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_LISTENADDRESS=0.0.0.0</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_LISTENPORT=8050</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_GENESISMETHOD=file</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_BOOTSTRAPFILE=/etc/hyperledger/orderer/orderer.genesis.block</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_LOCALMSPID=OrdererMSP</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/fabric/msp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_LEDGERTYPE=file</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_OPERATIONS_LISTENADDRESS=0.0.0.0:8443</span></span><br><span class="line">      <span class="comment"># enabled TLS</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_TLS_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_TLS_PRIVATEKEY=/etc/hyperledger/fabric/tls/server.key</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_TLS_CERTIFICATE=/etc/hyperledger/fabric/tls/server.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_TLS_ROOTCAS=[/etc/hyperledger/fabric/tls/ca.crt]</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/etc/hyperledger/fabric/tls/server.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/etc/hyperledger/fabric/tls/server.key</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ORDERER_GENERAL_CLUSTER_ROOTCAS=[/etc/hyperledger/fabric/tls/ca.crt]</span></span><br><span class="line">    <span class="attr">working_dir:</span> <span class="string">/opt/gopath/src/github.com/hyperledger/fabric</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">orderer</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../system-genesis-block/genesis.block:/etc/hyperledger/orderer/orderer.genesis.block</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/msp:/etc/hyperledger/fabric/msp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/ordererOrganizations/supply.com/orderers/orderer.supply.com/tls:/etc/hyperledger/fabric/tls</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">orderer.supply.com:/var/hyperledger/production/orderer</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations:/tmp</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8050</span><span class="string">:8050</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">peer0.core.supply.com:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">peer0.core.supply.com</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">hyperledger/fabric-peer:2.2.0</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment">#Generic peer variables</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span></span><br><span class="line">      <span class="comment"># the following setting starts chaincode containers on the same</span></span><br><span class="line">      <span class="comment"># bridge network as the peers</span></span><br><span class="line">      <span class="comment"># https://docs.docker.com/compose/networking/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=docker_test</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">FABRIC_LOGGING_SPEC=INFO</span></span><br><span class="line">      <span class="comment">#- FABRIC_LOGGING_SPEC=DEBUG</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_PROFILE_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt</span></span><br><span class="line">      <span class="comment"># Peer specific variabes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ID=peer0.core.supply.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ADDRESS=peer0.core.supply.com:8051</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LISTENADDRESS=0.0.0.0:8051</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODEADDRESS=peer0.core.supply.com:8052</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_GOSSIP_BOOTSTRAP=peer0.core.supply.com:8051</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.core.supply.com:8051</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LOCALMSPID=GylCoreOrg1MSP</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/:/host/var/run/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/msp:/etc/hyperledger/fabric/msp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/core.supply.com/peers/peer0.core.supply.com/tls:/etc/hyperledger/fabric/tls</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">peer0.core.supply.com:/var/hyperledger/production</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations:/tmp</span></span><br><span class="line">    <span class="attr">working_dir:</span> <span class="string">/opt/gopath/src/github.com/hyperledger/fabric/peer</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">peer</span> <span class="string">node</span> <span class="string">start</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8051</span><span class="string">:8051</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">peer0.f1.supply.com:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">peer0.f1.supply.com</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">hyperledger/fabric-peer:2.2.0</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment">#Generic peer variables</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span></span><br><span class="line">      <span class="comment"># the following setting starts chaincode containers on the same</span></span><br><span class="line">      <span class="comment"># bridge network as the peers</span></span><br><span class="line">      <span class="comment"># https://docs.docker.com/compose/networking/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=docker_test</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">FABRIC_LOGGING_SPEC=INFO</span></span><br><span class="line">      <span class="comment">#- FABRIC_LOGGING_SPEC=DEBUG</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_PROFILE_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt</span></span><br><span class="line">      <span class="comment"># Peer specific variabes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ID=peer0.f1.supply.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ADDRESS=peer0.f1.supply.com:8053</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LISTENADDRESS=0.0.0.0:8053</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODEADDRESS=peer0.f1.supply.com:8054</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8054</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_GOSSIP_BOOTSTRAP=peer0.f1.supply.com:8053</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LOCALMSPID=GylFOrg1MSP</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/:/host/var/run/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/msp:/etc/hyperledger/fabric/msp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/f1.supply.com/peers/peer0.f1.supply.com/tls:/etc/hyperledger/fabric/tls</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">peer0.f1.supply.com:/var/hyperledger/production</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations:/tmp</span></span><br><span class="line">    <span class="attr">working_dir:</span> <span class="string">/opt/gopath/src/github.com/hyperledger/fabric/peer</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">peer</span> <span class="string">node</span> <span class="string">start</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8053</span><span class="string">:8053</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">peer0.s1.supply.com:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">peer0.s1.supply.com</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">hyperledger/fabric-peer:2.2.0</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment">#Generic peer variables</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span></span><br><span class="line">      <span class="comment"># the following setting starts chaincode containers on the same</span></span><br><span class="line">      <span class="comment"># bridge network as the peers</span></span><br><span class="line">      <span class="comment"># https://docs.docker.com/compose/networking/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=docker_test</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">FABRIC_LOGGING_SPEC=INFO</span></span><br><span class="line">      <span class="comment">#- FABRIC_LOGGING_SPEC=DEBUG</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_PROFILE_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt</span></span><br><span class="line">      <span class="comment"># Peer specific variabes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ID=peer0.s1.supply.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ADDRESS=peer0.s1.supply.com:8055</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LISTENADDRESS=0.0.0.0:8055</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODEADDRESS=peer0.s1.supply.com:8056</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8056</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_GOSSIP_BOOTSTRAP=peer0.s1.supply.com:8055</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LOCALMSPID=GylSOrg1MSP</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/:/host/var/run/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/msp:/etc/hyperledger/fabric/msp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/s1.supply.com/peers/peer0.s1.supply.com/tls:/etc/hyperledger/fabric/tls</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">peer0.s1.supply.com:/var/hyperledger/production</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations:/tmp</span></span><br><span class="line">    <span class="attr">working_dir:</span> <span class="string">/opt/gopath/src/github.com/hyperledger/fabric/peer</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">peer</span> <span class="string">node</span> <span class="string">start</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8055</span><span class="string">:8055</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">peer0.s2.supply.com:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">peer0.s2.supply.com</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">hyperledger/fabric-peer:2.2.0</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment">#Generic peer variables</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span></span><br><span class="line">      <span class="comment"># the following setting starts chaincode containers on the same</span></span><br><span class="line">      <span class="comment"># bridge network as the peers</span></span><br><span class="line">      <span class="comment"># https://docs.docker.com/compose/networking/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=docker_test</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">FABRIC_LOGGING_SPEC=INFO</span></span><br><span class="line">      <span class="comment">#- FABRIC_LOGGING_SPEC=DEBUG</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_PROFILE_ENABLED=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt</span></span><br><span class="line">      <span class="comment"># Peer specific variabes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ID=peer0.s2.supply.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_ADDRESS=peer0.s2.supply.com:8151</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LISTENADDRESS=0.0.0.0:8151</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODEADDRESS=peer0.s2.supply.com:8152</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8152</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.s2.supply.com:8151</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_GOSSIP_BOOTSTRAP=peer0.s2.supply.com:8151</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CORE_PEER_LOCALMSPID=GylSOrg2MSP</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/:/host/var/run/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/msp:/etc/hyperledger/fabric/msp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations/peerOrganizations/s2.supply.com/peers/peer0.s2.supply.com/tls:/etc/hyperledger/fabric/tls</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">../organizations:/tmp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">peer0.s2.supply.com:/var/hyperledger/production</span></span><br><span class="line">    <span class="attr">working_dir:</span> <span class="string">/opt/gopath/src/github.com/hyperledger/fabric/peer</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">peer</span> <span class="string">node</span> <span class="string">start</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8151</span><span class="string">:8151</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">test</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨docker-compose-ymlé…ç½®æ–‡ä»¶å¯åŠ¨å„ç»„ç»‡çš„æœåŠ¡">ä½¿ç”¨docker-compose.ymlé…ç½®æ–‡ä»¶å¯åŠ¨å„ç»„ç»‡çš„æœåŠ¡</h3><p>å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f ./docker/docker-compose.yml up -d</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ä¹‹åä¼šåœ¨dockerå¯åŠ¨ä¸‹é¢è¿™äº›å®¹å™¨ï¼š</p><ul><li><a href="http://orderer.supply.com">orderer.supply.com</a>:æ’åºèŠ‚ç‚¹</li><li><a href="http://peer0.core.supply.com">peer0.core.supply.com</a>:æ ¸å¿ƒä¼ä¸šèŠ‚ç‚¹</li><li><a href="http://peer0.f1.supply.com">peer0.f1.supply.com</a>:ä¸€çº§ä¾›åº”å•†èŠ‚ç‚¹</li><li><a href="http://peer0.s1.supply.com">peer0.s1.supply.com</a>:äºŒçº§ä¾›åº”å•†1èŠ‚ç‚¹</li><li><a href="http://peer0.s2.supply.com">peer0.s2.supply.com</a>:äºŒçº§ä¾›åº”å•†2èŠ‚ç‚¹</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆ›å»ºç½‘ç»œ&quot;&gt;åˆ›å»ºç½‘ç»œ&lt;/h1&gt;
&lt;p&gt;ä¸€ä¸ªç”Ÿäº§çš„fabricç½‘ç»œåº”è¯¥ç”±å„ä¸ªç»„ç»‡è‡ªå·±ä¿å­˜è‡ªå·±çš„åŠ å¯†ææ–™ï¼Œæµ‹è¯•ç¯å¢ƒä¸ºäº†æ¼”ç¤ºåœ¨æœ¬åœ°ç”Ÿæˆæ‰€æœ‰ç»„ç»‡çš„åŠ å¯†ææ–™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç”ŸæˆåŠ å¯†ææ–™&quot;&gt;ç”ŸæˆåŠ å¯†ææ–™&lt;/h2&gt;
&lt;h3 id=&quot;åˆ›å»ºé…ç½®æ–‡ä»¶&quot;&gt;åˆ›å»ºé…ç½®æ–‡ä»¶&lt;/h</summary>
      
    
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
    
    <category term="blockchain" scheme="https://guozhe001.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Hyperledger-Fabric" scheme="https://guozhe001.github.io/tags/Hyperledger-Fabric/"/>
    
    <category term="ä¾›åº”é“¾é‡‘è" scheme="https://guozhe001.github.io/tags/%E4%BE%9B%E5%BA%94%E9%93%BE%E9%87%91%E8%9E%8D/"/>
    
  </entry>
  
</feed>
